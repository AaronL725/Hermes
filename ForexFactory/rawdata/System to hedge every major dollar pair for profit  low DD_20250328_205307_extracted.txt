===== 帖子内容 =====

--- 帖子 #1 ---
This thread is a study in mean/reversion, cointegration, whatever you want to call it trading. We use R which can receive realtime FX data from metatrader due to a special gift from 7bit. Here are the steps to installing it after download: https://sites.google.com/site/prof7b...on-integration All files needed are attached, please see instructions below. I use the demo version, but you can also use the regular arbomat.ex4. In comparing the 2, I like Demo version better it just makes more sense to me. A) PLEASE READ: I will not post rules on trading baskets, please see my update below and read through the thread to discover the best baskets to trade. B) Rules for Arbomat: The idea is to take a position at a major deviation level. This can be one of the horizontal demarcation lines, or some significant "whole" number like .002. If Blue price line is: below mean (middle horizontal line), then: if sign beside the hedge number in upper left is: + = buy if sign beside the hedge number in upper left is: - = sell If Blue price line is: above mean, (middle horizontal line), then: if sign beside the hedge number in upper left is: + = sell if sign beside the hedge number in upper left is:- = buy EXIT: Should be ON OR CLOSE to the mean, being that this is mean reversion trading. OPINION: If you see momentum and want to ride it out, look at the previous price action and see what happened. If there is a trend oscillating about a mean, you could get a few more pips. C) I won't personally guarantee replying to every last question, especially if the information was previously given. I will ignore those messages. D) As a favor: other thread members that are up and running, please help me with configuration questions. Thank you. e) NO POSTING OF OUTSIDE LINKS TO COMMERCIAL PRODUCTS OR OFFER OF THEM OVER PM. FOREXFACTORY WILL SUSPEND/BAN YOU. 1. install R-2.15.0-win Download/install R -&gt; http://www.r-project.org/ then, 2. copy common_functions.mqh &amp; mt4R.mqh into mt4/experts/include 3. copy mt4R.dll into mt4/experts/libraries 4. copy arbomat.mq4 into mt4/experts 5. open arbomat.mq4 with metaeditor, 6. edit #define RPATH "C:/Programme/R/R-2.11.1/bin/Rterm.exe --no-save" to appropriate directory in your pc (example of mine ... #define RPATH "C:\Program Files\RR-2.15.0\bin\i386\Rterm.exe --no-save") 7. restart your mt4 8. attach arbomat.mq4 to chart .... (thanks to Begamer for writing down instructions) Inspired by: 7bit, Ultimate6, FXEZ and Mediator -&gt; http://www.forexfactory.com/showthread.php?t=262827 Attached Image (click to enlarge) Attached Image (click to enlarge) In the above example, on 4/26, I took those positions based on hedge ratios calculated by arbomat. drawdown has never been bad on this hedge, never more than $500. The basket jumped huge this week though! now at $2,426.00 profit (minus swap fees). See that standard deviation suddenly spike down towards 2? this looks like the inverse of my floating equity curve. Just a few days ago the basket was near breakeven, with the dollar movement really saw value shoot up. even though the hedge ratios change, they are just used for entry and the chart remains valid as long as you update it on the next trade. I placed this hedge while experimenting with the Arb-o-mat (see signature). Wanted to know: if I hedge every major dollar pair like its telling me, can i eventually make money and not get huge DD? Answer: YES. At the open of markets Sunday, I plan to close this basket and place a new one in the portions shown above from the arbomat indicator. Premise: Dollar hedge ratios recommended by arbomat done near extreme standard deviation results in profitable trades with low drawdown. Update 5/25/12: Basket arb-o-mat_5.mq4 Order Entry EA by Sym Note I haven't tested this yet but will start that next week. you attach the EA to any 1h chart you want. If you are going to trade a basket (i.e. USDCAD, EURUSD, GBPUSD) you have to attach the EA to only one of these 3 pairs. From arbomat (TF of arbomat can be whatever you want) you read 3 values (i.e. 80, -100, -20) and you have to input these values into the 3 pairs window value, set the magic number for the basket and a target (if you wish). That's all . You can manage different baskets simultaneously, but remember each basket must have a different magic number.. -Sym Update 5/26/2012: The only difference between the demo and final arbomat version seems to be the intercept variable on the final release arbomat version. The demo seems to have the intercept on by default. You have to set it manually in arbomat.mq4 if using that version. All else seems to be the same so I may just take the demo down. Update 5/27/12: Focusing on nzdusd / usdcad hedge in the coming days as we are at key deviation levels here. This pair shows exceptional cointegration. You will see memebers playing other pairs, it's a free world go for it, but the smart money hedger should take only the most cointegrated pairs trade. Another basket trade possibility are all dollar pairs EXCEPT usdchf and nzdusd since these are correlated to their obvious eurusd / audusd counterparts. Update: 5/30/2012: We now have a complete automated EA integrated with Arbomat that can be tested -&gt; http://www.forexfactory.com/showthread.php?p=5710770#post5710770 Mediator -&gt; http://www.forexfactory.com/showthre...42#post5711542 &lt;- Big thread on this I'm reading now. I will also be posting Mediator's code. Let's try to keep focus on finding cointegrated pairs/baskets that can be consistently traded in a strategic manner. Feel free to post any EA or indicators. Secondary focus after this will be testing the EA's: by xlitang/sym/mediator Edit 6/9/12: See Donny's posts, he made an indicator for hedging every dollar pair looks to have some merit: http://www.forexfactory.com/search.php?searchid=2717773

--- 帖子 #2 ---
I'll probably remove usdchf since its over 90% inversely correlated to euro no point to be in the basket. That way risk can be more evenly distributed across pairs moving in slightly different directions.

--- 帖子 #3 ---
Looks interesting DB. I look forward to your results. Thanks for sharing.

--- 帖子 #4 ---
Here's the June futures contract for Gold relative to Silver that you asked to see. Looks like the spread is in an up trend over the last month.

--- 帖子 #5 ---
nzdusd and usdcad are commodity neutral cointegrated pairs. Theoretically you should be able to profit from a move back to the mean here. According to this, short 1 lot nzdusd and short 1.45 lots USDCAD. You can all try this when markets open and see how it goes the next few days. No stoploss needed.

--- 帖子 #6 ---
Oh, cool.. the gold to silver ratio. You hear a lot about it being artificially suppressed by banks supposedly keeping silver weak compared to gold. Wonder if you could go back far enough, make some kind of system based strictly on deviation of the ratio. Unfortunately I can't trigger new R charts to come up when the market is closed, when it opens tomorrow I'll post an R plot of gold/silver.

--- 帖子 #7 ---
try platinum/gold ratio.. with Sd

--- 帖子 #8 ---
Thanks that will be a good one to try. unfortunately im a US citizen so not many fx brokers available to trade platinum. Broco offers it if someone wants to try.

--- 帖子 #9 ---
try right clicking the chart arbomat is attached to and select "refresh" from the popup menu..

--- 帖子 #10 ---
Not working for me im on 64 bit windows that can be a problem at times. there's a way to do it from excel, I'll post it later.

--- 帖子 #11 ---
Ok, seems like I finally managed to attach the Arbomat EA to a chart. But it is not doing anything, probably because market is closed?

--- 帖子 #12 ---
Hi, Yes, it seems to new charts don't come up until live data comes through MT, will be there when market opens.

--- 帖子 #13 ---
Are the charts you posted from MT4? So, the EA creates such a new chart?

--- 帖子 #14 ---
In fact, the charts are created directly by R. Here's the thing: a) R can be triggered externally using python statements b) 7bit's DLL tell's meat-trader how to send python statements to a new R terminal instance. c) Each instance of the EA on the chart in meatrader will spawn a new R instance and make a new chart. You can make as many as you want. So really it is a whole new world of data analysis for all of us used to being stuck in the shitland of meat-trader. Arbomat performs a mean reversion calculation. It is 1 method of calculation among dozens, any existing R script can potentially be converted to analyszing realtime fx data if someone can code the EA using the custom python library in mql. I call it meat-trader cause we are just throwing around gobs of meat in mql. With R we can slice up the meat properly so we can eat it :nerd:

--- 帖子 #15 ---
Attached Image (click to enlarge) The spread between eurusd and gbpusd at the given ratios (short 1 lot eurusd per long .86 lot gbpusd) looks to be at an inflection point here with a potential reversion to the mean statistically likely at some point, as long as you can stomach the ride.

--- 帖子 #16 ---
To be honest, what you wrote is too complicated for me as I do not know much about codes and programming and stuff like this. But I am very much waiting to see what will happen in the morning when I open my terminal. At least, I have all elements in place, I think, for the EA to work. And it shows a smiley face although doing nothing yet

--- 帖子 #17 ---
haha, sorry yeah basically when the markets come up, you will get the charts with the timeframe chosen in metatrader. As soon as you change the TF on metatrader chart, the same will be loaded to the R chart right away. Best thing about the R charts, they are based on ticks.. and NO REPAINTING! cause it's a real statistical package, no BS lies.

--- 帖子 #18 ---
Hope, it will work. But as much as I understand, the data can change not on every tick but after the close of a period? If using it on H4 then changes occur after every 4 hours? If on daily then once per 24 h?

--- 帖子 #19 ---
my understanding is it wil simply compress the calculation further when the TF is changed. It still calculates the same way on the same tick data, but naturally cause of more data the levels will be different. From my studies on hedging i use 1 hr data, based on my discussions with FXEZ on 7bit's synthetic hedge thread, when hedging all dollar pairs as originally mentioned a longer time frame will probably be best. Less than 1 hr. and it will be harder to make money. This may not be the case if you only compare 2 currency pairs though, I have to do more study to know the ramifications there. Don't know.

--- 帖子 #20 ---
Yes, it is the question of style. Also, the higher the timeframe, the longer the trades last. How many bars are you calculating on hourly timeframe? I think, no sense to use thousands?

--- 帖子 #21 ---
You can see the date range on the bottom, i always hit the home button on all charts before starting the EA to make sure the history file pulls in all available data. other than that no tricks. The question of comparing MT to R charts, scaling.. I don't understand. At all really, it would be better to get a time scale on the bottom instead of bar count .. Can be done again a question of getting coders involved who really understand how to make it happen.

--- 帖子 #22 ---
In fact, the time range can be easily calculated. We have approx 500 hourly bars in every trading month. I see that you have near 4000 bars on the R chart, so it is sth like 8 months. Another question is how much market changes during such period. I mean - maybe we should calculate less than that. Best question is, of course, when to exit such a basket. If it is in profit - how to estimate if the profit will increase or not

--- 帖子 #23 ---
Yes, how does one define entry/exit levels?

--- 帖子 #24 ---
Entry is clear - at the beginning of a new period when you have fresh data. If using hourly calculation, you just open trades right after new hour begins based on the calculation. But exit is more difficult

--- 帖子 #25 ---
There is no hard and fast rules yet, that's why I made this thread I placed the above trades near the mean. The premise was: If all dollar trades are hedged near the mean can it be profitable? yes. Using mean reversion, you wait some X number of deviation then take the position, assuming the ratio will go back to 0 eventually, that is why no stop losses on the positions., this is a diffferent mindset of trading than most are used to. It is up to the thread to decide the best levels to take positions. Based on previous experience using the tools, reversions usually start at the first or second deviation on hourly TF's if several currencies are compared... Since on all USD pairs we are near the 2nd standard deviation, my guess it this is a key area for the markets. Only time will tell. This is an experiment still. Lots of questions, few answers. I put this thread in the discussion forum, mods moved it to system. Not my choice.

--- 帖子 #26 ---
My first guess is that it is too complicated. I think, we may open the trades at the open of a new period. When using hourly charts - at the open of a new hour. No matter what deviation is etc. The idea is that different pairs, if calculated in a proper way, balance each other. But it is all theoretical until market will open

--- 帖子 #27 ---
Yes, just remember this is outside of any chart technical analysis. This is in the quantitative realm where time is not as important as statistical anomaly. For me personally, a new potential period to open trades is a new week on hourly data when we are in the near area of a major standard deviation .. Currently a whole number, -.02. Markets like whole numbers. This is what got me thinking now is a key point and to start the thread. All of the previous week's news should be reflected in price and the market is ready to react to fresh news. The hedge ratios at any given time tell you the precise ratio it refers. Statistics don't lie they tell you what has happen and what will happen again. Wildcard is DD, manage that and you have a winner. That is the moving piece to the equation. This will not work if you arbitrarily make up your own hedge ratios.

--- 帖子 #28 ---
Did you trade with different numbers of pairs? How would that effect profit levels and DD?

--- 帖子 #29 ---
Exactly my point - hedge ratios at ANY GIVEN TIME... So, my idea is that we may enter at any given time. But let us see. One more remark. As much as I understand, the calculation is based on price changes. But it does not include pip value that may influence the result.

--- 帖子 #30 ---
The trade ratios in post #1 were given by R on 4/26/12 at time of entry. I had decided to compare/enter on ALL dollar pairs. I did not try a fewer number of pairs, since my goal was to capture all major pair price movement. As mentioned, now I will omit usdchf as its guaranteed to cancel out most of eurusd. Other than that, the correlations are under 90% so fair game to me. This will naturally alter the overall ratio. How it will effect profit, this is what we will discover in the coming days.

--- 帖子 #31 ---
In your opinion, more pairs: more or less DD?

--- 帖子 #32 ---
Should be less drawdown with more pairs. So your question makes me think. Since it costs nothing to setup a demo, will be a good idea to try it both ways with and without usdchf so the results can be compared daily. Maybe its best to leave it there! Don't you just love these concepts, it counters everything most of us have learned from directional systems.

--- 帖子 #33 ---
Actually, I'm at home here. I never fully understood directional systems, I always considered them to be some sort of a conspiracy theory.

--- 帖子 #34 ---
Yes, at any time you are confident in a change in the standard deviation go for it bossman. If you have some other system to go by, this could be used as a guide or vice versa. Possibilities are endless.

--- 帖子 #35 ---
Exit when arbomat value is 0?

--- 帖子 #36 ---
Think so, it should be in good profit at that time. All of that consolidation near 0 was evident on my floating profit equity curve. In theory you should be able to close out all in profit a while before 0 exactly gets hit. Trust me, you will see it. You decide and let us know

--- 帖子 #37 ---
OK, this will be my set up: time frame: 5 min. pairs: eurusd, gbpusd entry: at start of a new candle exit: when arbomat hits 0 We'll see where I am at the end of the day.

--- 帖子 #38 ---
Go for it, but this thread is focused on all or most all dollar pairs. Focus on specific pairs at your own peril. You will run into a number of challenges as we have seen on the Overlay Hedge EA thread. As you know, I'm using R to time when I turn the Overlay EA on. The same should work manually as you've mentioned, but everyone needs to know that's a different ballgame.

--- 帖子 #39 ---
There is one method that is always successful: trial and error. This will be my first trial (and probably an error ), but step by step and we'll find the best set up.

--- 帖子 #40 ---
I majored in Anthropology because I wanted to know what sets us aparts as living beings? The answer is shared knowledge transmitted differentially. This is the definition of culture.

--- 帖子 #42 ---
Hi Dirtybrown, Do you close the trades manually rather then letting the EA do it for you?

--- 帖子 #43 ---
These are manually opened trades. Yes, I will close the trades as soon as the market opens. The Arbomat EA itself has no trading logic. The only purpose it has it to display th R chart. Trading as I described, the trades will be opens likely for weeks so patience is needed. But if found to be reliable, lots can be multiplied. If you can make $23,000/mo. roughly with a hands off method with managable DD, it will be more profitable than most of the shoter term strategies used IMO. Feel free to disagree with that assessment.

--- 帖子 #44 ---
its good during normal times but not good right now usd is about to go on a hockey stick curve. Ever heard of the trillion dollar bet? My advise would be to find one in a trend and trade it until it breaks. Thats what 7bit and old dog did anyways. Dont add every std dev its a high chance of margin call and stress esp imagine if u made 100 k then lose it all on one basket

--- 帖子 #45 ---
I've avoided using the trend-o-mat or any trend analysis with the arb-o-mat specifically because 7bit said the trend-o-mat was flawed. I know for a fact drawdown was extremely low on this basket. it is every dollar pair. For one pair to rise, another has to fall. The beauty of forex. Given: USD used in 75% of all fx transactions. It only stands to reason a drop in one pair will reflect in another major pair which you will capture. Sort of like a casino. They don't care who wins, when the deal is over, all chips get cashed out by someone.

--- 帖子 #46 ---
My theory (and probably why the trades have to be open for weeks to be profitable) these trades reflect new money coming into the dollar. Naturally, this will take time.

--- 帖子 #47 ---
well its only flawed in that the moves are respective of the last biggest move so if your basket was ranging for a week then broke out you can easily hit 3 std devs which is high dd if ur adding at each dev. Here you will go opposite for achieving the mean which will give u another 2k but what if it keeps going like 2008? whats ur exit strategy? will you krep adding to try to be? Thats why i asked u if u read about the trillion dollar bet as long as u keep some sort of mm in place with positive expectancy over a good sized num trades u can profit. if it was flawed in creating synthetic trends or ranges wouldnt that same flaw plague u during this mean reversion targetting?

--- 帖子 #48 ---
if rba does a cut and grexit happens what happens to ur basket more imp how can u detect and or react in respect to your strategic positioning of ur basket to avoid losing ur collar?

--- 帖子 #49 ---
So, I am assuming that to use R you have to have a fair bit of computer knowledge? I have very little when it comes to computer language and codes. I got stumped with redirecting the path of the Arbomat and trendomat, so I used the vitrite overlay method that uses transparency with two metatraders open. But regardless of what entry method used, is the overlay EA still sufficient enough in it's standard settings to execute and handle the trade till you decide to exit it?

--- 帖子 #50 ---
I am basing it on the current window. It could possibly go to a lower deviation. But based on what i know is going on now, i don't think 2 standard deviations lower from here is in the cards. Statistically, the odds are better for price to go back to 0 first. Not sure of an exit strategy yet. Possibly 2 standard deviations.. or 1. Let's find out

--- 帖子 #51 ---
Read the whole synthetic hedge thread. There is no issue with arbo-mat, just the trend-o-mat. The arbo-mat works best with USD pairs. hedge ratios may be inaccurate if using non USD pairs.

--- 帖子 #52 ---
i didnt execute trades from his mt4 hook but there were calls in his python that called buy and sell functions from what i remem you can have a closeall function in there too similarily. So a viable approach may be to wait for 2nd dev and hit a 1:1 basket so ur saying odds are it will come to mean thats what u are playing. End of the day it might avert broker manipulation since ur not playing with one pair. Ive always been a fan of baskets i play with A basket system based on jpy and usd vs all chart except chf ofcourse because of snb

--- 帖子 #53 ---
Totally separate from overlays. just find out where the Rterm.exe file is doing a search and put that path there. All of the instructions are described you don't need to know any coding just follow instructions.

--- 帖子 #54 ---
All evens out. You think the banks will let euro crash? not in their interest, so it won't happen. all hype.

--- 帖子 #55 ---
dont assume u dont know their interests. Eu may be gone i mean abolished gone in a few yrs. If crisis was generated maybe its backfired who knows. Why else would eu tank on greece news when greece is only like 2% of the contributer to total gdp? Market will do what its going to do physical demand has to come in order for growth. Cbs cant keep ir propped up forever

--- 帖子 #56 ---
Points taken, any way you look this is a fully hedged dollar position that happens to be short eurusd now. If this hedge was made up of day trading stocks, obviously taking the new positions at -.002 would be stupid. We are talking global currency here, nothing moves in a straight line without retracements to get out, not even USD during crisis.

--- 帖子 #57 ---
Wow this is based on 7bit's work. I had tried trend o mat but failed...the drawdown keep increasing. Im not so sure about arb o mat . This strategy is alot about some portfolio management on some other forum. I didnt remember exactly but the strategy depends a lot on adjusting the lots hedge ratio. Decrease or increase the lot as needed ..the keyword might be rebalancing. The ratio can change time to time. But i heard somebody said that there is no guarantee that it will revert to the mean. As i said in a volatile market maybe you need to adjust more. Im not sure.. i tried this 2 years ago but lost interest. Im curious how this work out. My observations above could be wrong though. Maybe this also comply to the old adage.. cut the losses let the profits run. As you could decrease the exposure on the losing positions and add / maintain the winning position. As of arb o mat it even calculate the hedge ratio for you. the bigger the tf the longer the trade. But it will be good news if we can book some healthy profits weekly . Lastly i dont know if 7bit even trade these ...but lets see...

--- 帖子 #58 ---
Attached Image (click to enlarge) For those wanting more trades, take out usdchf lots more volatility. Some sort of grid system based on the horizontal lines could be created.

--- 帖子 #59 ---
ever tried the Dow, S&amp;P500, Nasdaq indices?

--- 帖子 #60 ---
Yes there was a design flaw in trend-o-mat, not so with arb-o-mat. I can't speak to the other system. My understanding is the ratio's generated from R don't need active rebalancing. Somenoe on the synth thread leave hedges open for months at a time, then builds other hedges from those hedges and a harvest method. Unfortunately few details were given. For me there are no winners/loser individual pairs, the basket is 1 transaction for better or worse. If you clip out winners and hold losers, how do you rebalance? To me that is not sustainable. 7bit doesn't use the framework anymore, he's probably on an island somewhere sipping martini's and ordering strippers. who knows. Synthetic hedges, cointegration, mean reversion and similar stuff -&gt; http://www.forexfactory.com/showthread.php?t=262827

--- 帖子 #61 ---
If you are having trouble and the path is correct, make sure you are using the 32 bit version of R even if you have 64 bit windows. 64 bit wont work cause mt4 is 32 bit. Other than that as long as you put the library file adn enabled dlls on the ea it should work let me know if you are still having an issue ill be happy to assist send a pm

--- 帖子 #62 ---
Attached Image (click to enlarge) tinkering with some trades on this basket

--- 帖子 #63 ---
There is a test called dickey-fuller which can be done on pairs to test cointegration ability (mean reversion), i.e. the ability of a combined time series to revert to a collective mean. Can be done in excel will post some links later.

--- 帖子 #64 ---
DB, Can i know how to get the chart R graphics : Device2 like yours? I not good in computer. THanks

--- 帖子 #65 ---
Hello Dirtybrown, testing, Sold 1 Lot AU buy 1.22 lot NU, did i read the plot correctly? best regards. - guandi

--- 帖子 #66 ---
Is there a tutorial on this,because I don't understand how you know which pair to short and which pair to long? For instance when I place the EA on GBPUSD it will show the lots of GU at 100, and EU at -60. I understand how the lot system works, but when you put the EA on EU it will Show the inverse EU 100, GU -60, but I notice the number that I assume is the spread on the mt4 chart in the upper ride hand corner is much larger on the GU than the EU.

--- 帖子 #67 ---
As much as I understand, the pair to which the EA has been attached is always 100. So, yes, there is a question when to buy or sell. One possible way to handle it might be to wait until some other system gives either buy or sell signal for the "main" pair and enter all trades after that.

--- 帖子 #68 ---
In large part of my brain..i really do believe it will somehow work. Maybe we can kill/reduce some of the unprofitable positions to maximize the profit. Killing and reducing the dd and the profits will take of itself. So if arb o mat doesnt need many rebalancing all we need to do is hold the position until goes to profit. I also believe if the dd steadily increases we do need to interfere so the profits can overcome the losers. This is from the real account perspective trading which i did in live trading. Some positions can go wrong and the only thing to do is deal with it. Again..maybe we didnt need to tinker with the basket...just follow it. Best of luck

--- 帖子 #69 ---
So far it seems that the system gives us a too perfectly hedged basket... I opened trades at midnight and since then the basket is around BE. Six pairs - EU, GU, AU, NU, UCAD and UY.

--- 帖子 #70 ---
Doesn't the threadstarter say if its a minus figure you buy and if its a positive figure you sell in the first post?

--- 帖子 #71 ---
He did but if the initial pair is always 100 then I doubt if it is correct. No proof yet.

--- 帖子 #72 ---
HI DB and everybody I did a simple EA that places orders and checks for basket profit/loss. I did it very quickly so don't blame me if anything is wrong (I'll fix). :-) Attach the EA on EURUSD 1h chart, input the number you read on Arb-o-Mat window and input a target in dollars (or whatever your account currency is). If you won't trade a pair, leave 0 in the input window. i.e. inputs for screenshot on post 1 would be: -13 100 21 45 -11 181 10 that's all Thanks to DB for the thread.

--- 帖子 #73 ---
Wow interesting!! Can't wait to dig into this thanks a lot. For anyone that sent me pm's, my trade system died this morning and I need to get it up. I may be delayed a while until it is fixed. Please don't let me problems stop the thread, i will answer all questions when I am back with my system

--- 帖子 #74 ---
I am having a bit of trouble with this step of the installation: "change the path in RPATH in the files trendomat.mq4 and arbomat.mq4 to point to your installation of R" . I am not exactly sure how to do this.I would appreciate some help. Also it says something about common_functions.mqh, but it doesnt have a link to download.Should i search the internet to find it?

--- 帖子 #75 ---
I'm also having trouble: here are the common functions: https://sites.google.com/site/prof7bit/common_functions you have to open the arbomat EA with Meta Editor and replace the path written inside the mq4 file: Inserted Code // set this so that it points to your R installation. Do NOT remove the --no-save #define RPATH "C:Program Files/RR-2.15.0/bin/R.exe --no-save" I think I've done everything but with no success, do I miss something?

--- 帖子 #76 ---
if you look at the original file it's calling Rterm.exe (not R.exe) and with RR-2.15.0 you can find Rterm.exe in bin/i386 but I can't get it running either

--- 帖子 #77 ---
Your slashes are backwards, may be why this is mine: #define RPATH "C:\Program Files (x86)\R-2.15.0\bin\i386\Rterm.exe --no-save" For anyone having problems, later I will post a full guide to settings up R to read from Metatrader I am getting slammed with PM's which is great to see the interest. My apologies for not posting instructions sooner, stay tuned.

--- 帖子 #78 ---
to: joancb as well: Yes, you have to search common_functions.mqh in Internet and place it in INCLUDE folder. Also in the arbomat.mq4 you have to write something like this: #define RPATH "C:/Program Files (x86)/R/R-2.15.0/bin/i386/Rterm.exe --no-save" Be sure to have installed R 32bit version (even if you have windows7 64bit)

--- 帖子 #79 ---
It won't place orders. Giving me a "unit reason 5" not sure what that means.

--- 帖子 #80 ---
Do you have suffix for your currencies? Like EURUSD# or EURUSDm? Are you allowed to trade micro lots? (i.e. 0.01) If one answer is NO, the EA won't work. For the first one it's not a big issue, it easy to modify the code and add the suffix you need. For the second one, no solution.

--- 帖子 #81 ---
No suffix and its not a micro lot issue. Used 0.70 and raised the account to make sure it wasn't a margin issue. Below is the errors its giving me. http://my.jetscreenshot.com/demo/20120521-e6av-18kb

--- 帖子 #82 ---
Try this one and let me know...

--- 帖子 #83 ---
Thanks for all your help.I am now able to start arbomat in metatrader. I am not exactly sure though that everything is in place.This is what it shows me: http://img855.imageshack.us/img855/2453/72406393.gif

--- 帖子 #84 ---
Exception_continue_search

--- 帖子 #85 ---
Similar concept here http://www.stevehopwoodforex.com/php....php?f=5&amp;t=113

--- 帖子 #86 ---
same error on the stack overflow it wont place orders.

--- 帖子 #87 ---
I'm a bit tired... long day. Hope this works... going to bed

--- 帖子 #88 ---
Is this an answer to my question?If yes,how do i use it?

--- 帖子 #89 ---
Nope getting a uninit reason 1.

--- 帖子 #90 ---
Why would anyone need an EA for opening trades according to the system? Is it so difficult to make 6 manual entries once per day or week or even month? Unbelievable that this happens to every single promising thread...

--- 帖子 #91 ---
Main reason is to get as close to the same time as possible. What if your entering trades and you get a small spike,or a trade context busy,etc. Its no different than entering trades with a script. It just an easy way to place the trades as a buy/sell.

--- 帖子 #92 ---
Hi, can someone please assist. I've installed all the files and I've attached arbomat.mq4 to my MT4 platform. How do I get the R Graphics to show in the R Console? Do I import it from the R Console or would it popup one I attach arbomat.mq4 to my chart? I'm really stuck here... Thanks,

--- 帖子 #93 ---
demo taken yestersday, now +25pips, will hold to see if it get back to mean. - guandi

--- 帖子 #94 ---
This is correct Guandi, good job!! I didn't enter this trade glad to see it's working.

--- 帖子 #95 ---
Just go through the link i posted to the synth hedge thread. They talk about usdcad nzdusd pairs trading there, thats how i found out about. With any luck, these words will eventually be part of the tutorial.

--- 帖子 #96 ---
Thanks for your effort on this I will have to test it. It would be possible to import the levels calculated by R encapsulated in MQL python calls. I'll tinker with this.

--- 帖子 #97 ---
Correct, KingHigh had sent this to me thanks. I am currently looking into the EA, perhaps this thread can take it over. Will post info as I learn, anyone else please feel free to read this link and post back here your comments.

--- 帖子 #98 ---
It is what i recall reading, but we need to put it into practice to be sure we have the signs right. The only thing I myself know to be true is what is stated in post #1. All else is our experiments.

--- 帖子 #99 ---
You should have an R terminal chart somewhere in windows outside of metatrader..

--- 帖子 #100 ---
That's true. The original thread is about all dollar pairs. But I don't mind and encourage to find other cointegrated pairs for this method and an EA may help to use on lower TF's.

--- 帖子 #101 ---
Hello fxglider, it should pop up once you attach arbomat.mq4 and it has finished calculations. before you attached arbomat.mq4, make sure you edit the path of Rterm.exe in arbomat.mq4 to point to the location of your rterm.exe best regards. - guandi

--- 帖子 #102 ---
Did you specify the rterm.exe file in arbomat then recompile? Make sure R is working by itself correctly from your programs menu.

--- 帖子 #103 ---
The more I read into the EA, the more I want to start using it and posting results to the thread. For anyone interested in new ways of data analysis, I would recommend to also do some manual loading of excel files and work in R directly. Just found this example: http://quanttrader.info/public/testForCoint.html I think should work with FX, shall try it out in the coming days. This is what quantitative trading is all about. I don't have a PHD in math, but so much code is already out there, just has to be connected.

--- 帖子 #104 ---
Thanks for the help. I found that my Rterm.exe file was not in my "bin", but under a folder in "bin" called "i386". That is why I never could pickup Rterm.exe, but now it's working great! That's why it's good to ask questions! Thanks!

--- 帖子 #105 ---
Thanks! Got it to work!

--- 帖子 #106 ---
What's your problem? Nobody told you to use the EA, so why blame me? Leave others the choise to use or not it. No harm with it. Sometimes I wonder why someone invented cars, you don't need it, because you have your legs to move around!!!

--- 帖子 #107 ---
I certainly do not use EAs for opening trades. I trade for living, so for me it is a (hard) job not a joke. What I meant is that most good threads have been killed after people started talking about how to use some EA instead of developing the system. Just sorry to see it happening again and again.

--- 帖子 #108 ---
I respect your opinion, but I don't think good threads are "killed" by EA's, no way. Probably they weren't so good threads or methods. If an idea is good, is GOOD with or without EA.

--- 帖子 #109 ---
Very often they are. In cases when majority of participants start discussing how to attach the EA to chart and make it work. Hope, this thread will not lose focus totally.

--- 帖子 #110 ---
I've changed time frame to 1 min, and left everything else the same. So far I haven't had a losing trade. (trade being a combination of 2 trades, EU and GU)

--- 帖子 #111 ---
Hello marijan993, can you post some charts using m1? thanks. -guandi

--- 帖子 #112 ---
Here's one I just opened: buy 0.62 lots of EU, sell 1.0 lots of GU, arbomat is -2.1, will close trade when arbomat hits 0.

--- 帖子 #113 ---
Hello all, a question, should allow_intercept be set to false or true? what about diff? best regards. - guandi

--- 帖子 #114 ---
Quite interesting, I haven't tried trading off the MT charts generated like this on short TF. Excellent, that's why I posted the thread to get new ideas and insights. Any coding efforts are appreciated thanks Sym we are hear to make money in some means or another and its people like you offering support that makes the thread good and not at the bottom of the search engine

--- 帖子 #115 ---
What settings do you have in there are they the default?

--- 帖子 #116 ---
Could you explain the usage of Arbomat number? How big should it be for taking a trade? And how many bars do you calculate for m1 chart?

--- 帖子 #117 ---
Thanks to you Dirtybrown for the thread... I don't understand people who don't appreciate efforts of others... (This is not for you). :-)

--- 帖子 #118 ---
I use default settings in arbomat, haven't changed anything there, I don't even know how. I opened all my trades when a new candle would appear, and arbomat was different than zero. I closed all my trades when arbomat would hit 0. Now, I have no idea why I haven't loose a trade yet. Maybe I found a holy grail, or, which is more likely, I've been incredibly lucky.

--- 帖子 #119 ---
A very nice explanation Still, I would like to understand what the Arbomat number is showing... I have seen it being -4.0 and -4.5, so it cannot be standard deviation. Would appreciate if someone explained it...

--- 帖子 #120 ---
Ok, just realised why sometimes its says buy if you put it on one chart and sell if you put it on the other chart, its because the deviation is totally different between the two, so I've just been choosing the chart with the most deviation, and it works fine

--- 帖子 #121 ---
guys, when trying new pair with this method, they must be cointegrated to reach the mean 0. If not, then this exercise is meaningless. If you look at the cointegration link i posted, this test will tell you if its cointegrated or not.

--- 帖子 #122 ---
I finally made it work(it was a problem with the rpath afterall).I also noticed that the maximum bars arbomat can analyze is 2500. I am like a kid playing with its new toy here but i dont know how exactly this toy should be used.I dont fully agree with what i read about arbomat not repainting. Yes, the lines dont repaint, but the mean and the standard deviations constantly change with each new bar.The good news is that this "change" is so small that it practically doesnt exist.So ,although not theoritically true, we could say that arbomat doesnt repaint. What i cant figure out is how we can use this tool most profitably.In my opinion it is useless to create regressions with more than 2 pairs,as they wont be fundamentally backed up.For example,there is no reason to bet that the +0.39EURUSD-0.12USDCHF+100AUDUSD-15.5USDJPY is going back to its mean after making an extreme because there is nothing backing that up.On the other hand,betting that 100AUDUSD-99NZDUSD is going back to its mean after making an extreme, will probably be a highly profitable bet since these 2 pairs are very highly correlated and this correlation is fundamentally backed up. So, we should find the most hilghly correlated pairs,add them in arbomat's code and trade based on their correlations. Concerning the selection of timeframe,i am totally lost.I dont know whether it would be better if we stayed on longer timeframes or on shorter ones.I ll have to think about this. One last note: I dont think that placing you trades based on MT charts is going to be profitable.MT shows neither the mean of the spread nor the deviation.It just shows the spread.For example,lets say that two pairs are perfectly correlated.What does this mean?It means that their gap should be fixed(this could be 100 pips,200 pips or even 100000 pips).So,you go on MT4 and you see a 200 pip gap between these 2 pairs.This doesnt tell you anything.You cant bet whether this gap wil go to 0 or not.You need to know the mean and the deviation of the gap. If the mean of this gap is for example 400,it is more probable that the gap will widen rather than go to 0.

--- 帖子 #123 ---
will I just start playing with this system. I am thinking of entering trades in both direction and deal with each basket separately. since it is hedge I think it should work fine lets try and see what could happen.!!

--- 帖子 #124 ---
I demoed it but just the opposite what you did. When it closed to 0 , I opened two pairs basket. When its value increased, the profits increased

--- 帖子 #125 ---
Can you please post a screenshot? Thanks!!

--- 帖子 #126 ---
I opened the basket at -14.5, now it is -27.5 and profit is already &gt; $50.

--- 帖子 #127 ---
I've also taken this trade 5min ago! Good Luck!

--- 帖子 #128 ---
Not understand this Normally you must Sell EURUSD and Buy GBPUSD , or I understand something wrong Icemaan

--- 帖子 #129 ---
Attached Image (click to enlarge) For either of you does your R chart look like this for 1 min eurusd / gbpusd?

--- 帖子 #130 ---
Maybe when the spread is positive you must Buy EURUSD and Sell GBPUSD and when it is negative you must Sell GBPUSD and Buy EURUSD or viceversa, I am testing this right now... this is how it looks to me right now with 2000 and 5000 bars back

--- 帖子 #131 ---
This is my chart

--- 帖子 #132 ---
Is that 1 min tf? Edit: NEVERMIND the second thing i talked about!

--- 帖子 #133 ---
Just closed $150 Profit

--- 帖子 #134 ---
Yes this is 1 minute Chart But what I must do now 1. Buy EURUSD or Sell EURUSD 2. When the Spread is negativ Arbomat show me the correct Values and I only must change when Spread is positve? Thanks for Help icemaan

--- 帖子 #135 ---
hmm, I noticed your R chart only based on the last few hrs of data. Mine is from 5/17 9:37 to current. This changes the deviation levels, but amazingly both seem equally valid. I'm up around $20 on this basket entered right before posting the r chart

--- 帖子 #136 ---
I always make the sign opposite, not sure if this is right but i think it is. So in this situation since eu is 100, you would sell 1 lot.

--- 帖子 #137 ---
With this Method you win when the Spread go away from Zero , but i think the Goal is that the Spread returns to Zero , or I`m totally missunderstand this Trading Concept icemaan

--- 帖子 #138 ---
I think your way is better than mine since I have no idea what happened. When do you close your trades?

--- 帖子 #139 ---
IMO its highest percentage to place trades near mean cause it has to deviate in either direction. After sufficient data analysis has been performed, trades can be placed at certain deviation levels, anticipating a move back to the mean. This has been done in the stock market for years. Lookup mean reversion trading in google.

--- 帖子 #140 ---
right before I posted.

--- 帖子 #141 ---
Huh?!

--- 帖子 #142 ---
Any coders here? I think we can turn Arb-o-mat into a trading EA?

--- 帖子 #143 ---
It would not be hard logic, but i think best to pull the deviation levels from R directly. I will try to work on the python code to pull that in, then hopefully sym or someone else can adapt the trading logic to those values. Please document your thoughts fully for the EA and I'm sure we can have it done.

--- 帖子 #144 ---
It 's an important point when you have to be sure. imo work the other buy 1 lot EURUSD and sell .60 GBPUSD.

--- 帖子 #145 ---
Well the trade i entered is getting more profitable as line moves down below from mean. We have to do more experiments on the signs, but this his what experience has taught me.

--- 帖子 #146 ---
in a similar system of correlation functions as follows: http://img20.imageshack.us/img20/3899/91619718.gif Conversely , if you earn increases the deviation.

--- 帖子 #147 ---
hmm, can you post that template or is it commercial? That would help us on the Overlay Hedge Ea thread/

--- 帖子 #148 ---
Search: NeutralHedge Overlay_v4.ex4 NeutralHedge osc_v3.4.ex4

--- 帖子 #149 ---
This is mine

--- 帖子 #150 ---
Looks like you have the trend option on, unless you did it on purpose i would take it off the trending functions don't work right. You should see horizontal lines.

--- 帖子 #151 ---
Thanks! Been meaning to read that thread.

--- 帖子 #152 ---
Can anyone tell me what variable holds value of -27.5 in Arb-o-mat EA?

--- 帖子 #153 ---
Attached Image (click to enlarge) oh my..... could it be this easy? If so, I'll be punching myself in the face cause I never thought to use it this way on short tf.

--- 帖子 #154 ---
It seems that as it moves away from the line it get profits... more experiments need to be done to identify the entry and exit ..... this system gonna be perfect

--- 帖子 #155 ---
Oh My God.

--- 帖子 #156 ---
As someone pointed out earlier it sure looks like you trade the lot directions indicated by arb-o-mat when price is below the mean and the opposite when above. You can think of it like overbought/oversold. If it's oversold you buy the basket (i.e. take the straight arb-o-mat lot size direction) and if it's overbought, you short it (reverse the arb-o-mat lot size signs).

--- 帖子 #157 ---
Attached Image (click to enlarge) Decided to arbitrarily close this position fearing a retrace and how far it came so fast. I think we have a winner.

--- 帖子 #158 ---
Hey thanks Steve, obviously I didn't remember the whole synth hedge thread. This would make sense. Though reversing right at the mean may work, it did in this case at least.

--- 帖子 #159 ---
I think I have understand now after read i little . When the Spread is negativ the shown Value are correct When the Spread is positiv you must chance postive to negativ Here my first Trades on Oanda live Account 1Lot are for me 1000 Units

--- 帖子 #160 ---
I figure the job of the thread is to tease apart the elements that actually have the edge (if there is any). After all, even losing systems still have winning trades due to luck. Logically it seems like taking trades right at the mean is really just a coin toss. Arb-o-mat suggests ratios and directions that have been reverting to the mean "lately". So you'd want to wait for movement away from the mean before entry.

--- 帖子 #161 ---
Thanks a lot Steve for your guidance I know you've been using it a lot longer than myself. You're right, by everyone posting their findings we get closer to solving the puzzle. Logically it seems like taking trades right at the mean is really just a coin toss. Arb-o-mat suggests ratios and directions that have been reverting to the mean "lately" Makese sense.. so seems like we have to be sure to know the direction of the mean break then. Otherwise it is a random trade direction.. edit: For me after looking at these R based tick charts for a few months it was easy to tell the mean would not hold up. Maybe this is some kind of irrelevent technical analysis, but if it makes money consistently don't care what it's called.

--- 帖子 #162 ---
Yes, please everyone refer to Steve's explanation on when to reverse the signals. My apologies I was merely stating the information I could recall, we all are learning about it.

--- 帖子 #163 ---
Attached Image (click to enlarge) Look at the huge movement then retracement on gold during that last move on the euro pound usd hedge

--- 帖子 #164 ---
So have we concluded that this is correct?

--- 帖子 #165 ---
Here my last Entry before I go sleep . I think with great Potential Timeframe 1H -&gt;&gt; Target Spread 0.00

--- 帖子 #166 ---
Instead of trying to reinvent the wheel so to speak, why not just fork mediators ea code to do the co-integrated trades for you? his ea actually worked quite well except for the problem of trying to do too much (ie, hundreds of trades at once) and exiting bad pairings too late which would bring the baskets into deep DD. His ea constantly created new, dynamic pairings based on available currencies from the broker. It should be quite possible to limit the ea to small amounts of static pairings like you're trying to do, which would make it much more manageable.

--- 帖子 #167 ---
Yes this should work.

--- 帖子 #168 ---
Why cannot you take the values from the ARB Indicator - surely that is simple and easier as you just want the values from the indicator?

--- 帖子 #169 ---
Sure, I want to start using the EA.. The only problem is that with the functionality there may also be bugs of course. I'll try to get it running tonight. Anyone with mql skills please have a look at that thread.

--- 帖子 #170 ---
If you run into zero divide errors make sure you right click your market watch and select show all. then let mt4 populate for a while. it needs history for every pair in market watch to work correctly, after which it will constantly find the best co-integration for every pair combination and trigger trades based on the deviation levels you supply. the zero divide error drove us nuts for a while..

--- 帖子 #171 ---
you mean the arbomat EA?

--- 帖子 #172 ---
Yep.. you can the EA to return a value?

--- 帖子 #173 ---
Sure, the arbomat EA itself can simply be altered to use the data to make trades. Just need to understand how to set the trade logic. I think the thread should look at different ways. Both a simple EA that someone can code up and also the other written by Moderator.

--- 帖子 #174 ---
Sorry, I can't seem to find where to make the R Graphics window lines horizontal, I know you said the trend option was on, but can't seem to find it to turn it off?

--- 帖子 #175 ---
its the "trend" settings of the EA properties turn it off.

--- 帖子 #176 ---
I can write basic EA's and understand little coding, but not too major, the EA can you used as a function to return the values that can be placed into another EA (one that take the trades, don't hold me on this... but someone might be able to confirm this, but I need to have a look at the code, but I think it is possible, as the EA to take the trade would be simple, just execute trades based on the threshold values) Though the only issue I have with this... I am not trying to ruin the thread... but this has all been tried and tested before and I think eventually the DD will kill you. Steveharpwod

--- 帖子 #177 ---
no such setting "trend" in the EA.

--- 帖子 #178 ---
The only setting that made any difference was the "diff" setting, if I turn that to false the lines are horizontal but the lot sizes are different also.

--- 帖子 #179 ---
the spread value is already printed by EA on the chart. Can we figure out where it come from? We can base the trading logic on the spread.

--- 帖子 #180 ---
Well maybe one of the biggest things to make sure of before entering a trade is that the pairs are cointegrated. Such a test is not done with the code 7bit provided, but no reason the example I posted couldn't be adapted to work with arbomat. I haven't read the whole Moderator thread, but in my mind if the pairs are cointegrated 200 miliseconds before a trade is taken, it should show mean reversion properties at some point. We'll see how people deal with drawdown, I can't speak to it so far.

--- 帖子 #181 ---
Attached Image (click to enlarge) Entered and posted basket at market open this week. Only supposed to be 1 usdjpy trade. Correlated pairs aren't good for cointegrated baskets, so i removed nzdusd and usdchf, leaving counterparts audusd and eurusd. This may be the optimal pair selection for medium term trading. Would also mention .. If you read through the Synth hedge thread, notice that 7bit never used the ADF (dickey-fuller) test for cointegration because it can be visually backtested. Visually backtest this in R and see how many retracements any given point seems to have.

--- 帖子 #182 ---
not sure it is great. Traded almost 3 lots and gained only $15.75. We only fatten the borkers.

--- 帖子 #183 ---
Risk is lessened though cause you aren't gambling on any single pair. I don't see why several baskets within a deviation range can't be opened for eventual profit. So maybe smaller profits could be made up for through repetition, but micro lots would be preferred. I will rob these non &gt;90%-correlated major pairs like a thief in the night!!!

--- 帖子 #184 ---
Hello DirtyBrown, can you post your version of arbomat? It seems to be different from the one downloaded from 7bit's site. I do not see the trend option in my version, whereas your version seem to have the trend option. best regards. - guandi

--- 帖子 #185 ---
thats weird, here it is

--- 帖子 #186 ---
This can help you track several baskets open and closed p/l: https://sites.google.com/site/market...a/basket-stats Will be trying this out. Should not need the snowroller EA to run as far as I know.

--- 帖子 #187 ---
Hello Dirtybrown, many thanks. It is indeed different from the one downloaded from 7bit's site, where did you get yours from? at 7bit's site, it is named as arbomat.mq4. best regards. edit: also the one from 7bit's site also have the option to set true/false for diff and intercept - guandi

--- 帖子 #188 ---
Thank you Dirtybrown for this thread, its funny cause couple of weeks ago I found out about R, and it was something different then basket one. It's mt4r Forecast indicator. It's same procedure as EA, change path in indicator, compile it and place it on chart. Btw. I noticed one thing about Arb-O-Mat trandlines and info are flickering all the time anyone know how to fix it? Thank you guys in advance.

--- 帖子 #189 ---
you may set diff and intercept to false.

--- 帖子 #190 ---
Dirtybrown, have you calculate difference spread each pair in arbomat EA ? I think, we should pick pair with same spread and we should calculate average daily range each pair to get best combination, thanks

--- 帖子 #191 ---
ahh, yeah I think I got that off the synth hedge forum never updated. Need to do that. Wonder how different it is.

--- 帖子 #192 ---
Wow, that one is pretty cool. It predicts the next x bars (default is 20) and displays them on the chart. Looks like it just uses OLS regression though, so it's probably not super great -- I've seen several other indicators like that with more advanced stats forecasting techniques (e.g., neural networks, fuzzy logic, etc.) Cool though. Maybe time to modify its R code to get at those more advanced forecasting techniques...

--- 帖子 #193 ---
Thanks, will try. yeah this is also by 7bit before he wrote the Arbomat I believe. There is some code here to trigger the R charts to come up when the makrets closed: http://www.forexfactory.com/showthre...54#post4186754

--- 帖子 #194 ---
I cannot get the common_functions.mqh can someone please post it thanks.

--- 帖子 #195 ---
Here u are

--- 帖子 #196 ---
thanks

--- 帖子 #197 ---
Im getting these warning ? http://my.jetscreenshot.com/demo/20120523-wghy-105kb

--- 帖子 #198 ---
Hi DB and all ff forumers, i have read the entire thread and would like to find out the whole ways to use this system and conclusion to read the chart whether to buy the pair when it has positive ratio or sell? May be DB can update it at page 1?

--- 帖子 #199 ---
I am newbie and after read all posts, and downloaded R, arbomat_demo.ex4, mt4R-1.3.0.27.zip, I didn't know how to use it. Opened Rgui and I do not know how to use it. Any guides or anyone can help?

--- 帖子 #200 ---
sidhujag, The flaw in trend-o-mat is based on an unsound regression equation, not the reason you state. The formula in arb-o-mat uses sound mathematics to achieve cointegation. It appears to be the Engel-Granger formula. Does this guarantee success? No because any sound analysis may be mis-used. Cointegration is a long term relationship or co-movement, and as such is best suited to long term trading strategies.

--- 帖子 #201 ---
I took a look through Mediator's code a while back. I'm trying to be diplomatic... I wasn't impressed. Essentially the code turned a perfectly decent idea into a martingale grid strategy that sort of missed the boat on the underlying theory. A perfectly decent stat arb concept became Hopwooded.

--- 帖子 #203 ---
Here step by step i've done : 1. install R-2.15.0-win 2. copy common_functions.mqh &amp; mt4R.mqh into mt4/experts/scripts 3. copy mt4R.dll into mt4/experts/libraries 4. copy arbomat.mq4 into mt4/experts 5. open arbomat.mq4 with metaeditor, 6. edit #define RPATH "C:/Programme/R/R-2.11.1/bin/Rterm.exe --no-save" to appropriate directory in your pc (example of mine ... #define RPATH "C:\Program Files\RR-2.15.0\bin\i386\Rterm.exe --no-save") 7. restart your mt4 8. run Rterm program (windows program --- i'm not sure it is mandatory or not) 9. attach arbomat.mq4 to chart .... hope it help cheers

--- 帖子 #204 ---
I'm posting the last version of basket arb-o-mat. I tried it with different brokers and it works (micro lots must be allowed by the broker). Just as remind: insert the number you read in arbomat into the input window. Also you can add the spread arbomat value in START, it's just a remind of the value if you manage many baskets. The EA shows the max loss/gain reached by the basket and can close it when a target in $ is reached. It's isn't a "state of the art" of coding, but it works. :-) I'm also uploading 2 arbomat screenshot taken at the same time. The difference is: one had the intercept value = true the other had intercept value = false. As you can see the lots size are very different between the 2 (base was 50, not 100). Does anybody has any explanation about this discrepance in arbomat? Thanks

--- 帖子 #205 ---
This basically comes down to what it means to run a regression with an intercept and without one. What are the assumptions of the model? Try reading the text on this page: (many others on the web, do a search on regression with / without intercept) http://www.ats.ucla.edu/stat/mult_pk...noconstant.htm Many times no intercept forces unreasonable assumptions on the model which make for an inaccurate regression. You could check the R^2 values by creating both models, doing summary(model) in the code and reading the log and comparing them.

--- 帖子 #206 ---
I entered these trades yesterday. Profits reach 1000$ now

--- 帖子 #207 ---
Hello all, this is quoted from 7bit at his website about the diff and intercept:

--- 帖子 #208 ---
Many thanks... @ guandi as well

--- 帖子 #209 ---
So, do we have definite rules? Time frame: 1 min. Enter: at any value that arbomat gives us (when negative value: sell negative pair, buy positive pair. when positive value: buy negative pair, sell positive pair) Exit: when arbomat hits 0. Am I right?

--- 帖子 #210 ---
Yes. I gained over $600 using 1 standard lot on demo today.

--- 帖子 #211 ---
I'd set some threshold for entry, not just any value above/below 0. Just look at the chart and you can eyeball a reasonable entry threshold. If you're too close to 0 then you'd be potentially entering trades where you're aiming to make 5 pips. That's too small a target when spreads are taken into account.

--- 帖子 #212 ---
Agreed, some threshold should be set. Perhaps looking at historical arbomat readings ( if that's possible) and see at which value arbomat reverses most times. I.e. if arbomat would reverse at +/- 3 most of times, we would enter our trades there. Also, when choosing this value, we should take DD into account.

--- 帖子 #213 ---
Perhaps +/- one standard deviation (or two, perhaps?)? That's what those lines are on the Arb-o-Mat, right?

--- 帖子 #214 ---
Yes, I think they are. But I'm no math guy.

--- 帖子 #215 ---
Demo report : 1. 6 pair, 1H TF , 8 hours trading, TP $76, max DD 200 2. 2 pair, 1M TF, 3 hours trade (not monitor continously), TP $120, max DD 200 3. 2 pair, 1m TF, 2 hours trade (not monitor continously), TP $120, max DD 300 2nd &amp; 3rd trade attached, my conclusion, better trade in low TF, watch max spread at arbomat, OP, and TP when it get profit 15 pips --- because we played in 1M TF, look at picture attached, after I TP 1st trade, spread getting bigger

--- 帖子 #216 ---
Does anybody know what the "Spread" in the Arb-o-Mat window actually represents?

--- 帖子 #217 ---
Could someone write an EA which will "close all trades when arbomat=0"?

--- 帖子 #218 ---
Wonder why my R graph has no diff: false, inter: false?

--- 帖子 #219 ---
I'm sorry but don't know what they exactly represent, I think that they are not absolute values, they are relative to the history bars in the chart. what now is the zero line cannot be touched again in the future.

--- 帖子 #220 ---
Attached Image (click to enlarge) Steve, I think you are right that positions need to be set at some deviation level not the mean. In this particular case it seems the trade directions were opposite than what I intended, when I looked about 4 hrs ago this basket was in some DD. On the other hand, see how much this basket retraces around any given point. Almost enough to make you think a coin toss direction near the mean may be a good trade strategy. Just theories, I'm enthralled and glad to see all of the interest. Will post more later.

--- 帖子 #221 ---
Begamer, this is very encouraging please continue to keep us updated on your results. Given the feedback from FXEZ (who along with ultimate6 gave me the inspiration to look more to this type of trading), on the Mediator EA I'm not sure if it's a good idea to post it here. With manual results such as the below, I see no reason why an EA needs to do much work at all. It should just be very simple based on floating profit and deviation levels.

--- 帖子 #222 ---
Today I entered a position EU/GU when arbomat was at -3.7 Unfortunately, arbomat went all the way to -9.1 and into a severe DD. I think all mayors should be traded into a basket. Of course, arbomat will eventually hit 0, and my trade will profit, but DD is too big. Therefore, more pairs, more profit, less DD.

--- 帖子 #223 ---
Also, for all you math guys: today I observed movement in arbomat value and profit/loss movements and I think it could be calculated at which arbomat value will our position be at break even and when at profit.

--- 帖子 #224 ---
thanks DB, unfortunetly ... I'm negative floating now .... max DD $800 sell GU 1, buy EU 1.24, OP spread at 4, max spread 11. btw, I'm maintain my position with add position scalp base on max/min spread (see leg red line below) - I got some profit from it any advise very welcome, keep trying guys

--- 帖子 #225 ---
Less DD = less risk = less profit. Law of nature But yes, hedging two pairs is a big lottery, no matter what calculating tools we have. By the way... Would be nice to have the Arbomat EA with the option to choose any pair. If it is based on math then it should work on any pair, no matter USD or not.

--- 帖子 #226 ---
I am pretty sure there is an issue with the hedge calculation when using non-usd pairs. Check through the synth hedge thread I read it somewhere there.

--- 帖子 #227 ---
you should Buy GU and sell EU not the opposite. what I figure out is that when the trend is going up the sign on arbomat is correct positive buy and negative sell. In the down trend it is the opposite .... Thats why you get high DD

--- 帖子 #228 ---
It might have problems if trying to hedge USD pairs with Yen pairs because they have different number of decimals but I believe that it could be used for hedging one Yen pair with another or a USD pair with a CHF pair etc. The calculation is probably based very much on volatility. And mathematically every number is just a number; how could EA recognize that a pair is not a USD pair

--- 帖子 #229 ---
No, he did it right. When the spread is above 0 it's considered overbought so you short it. When it's below 0 is considered oversold so you buy it. The ratios displayed on arb-o-mat are for buying an oversold condition. The reason he's in drawdown right now is because it hasn't reverted to mean yet but continued up after he shorted. It's all part of the trading game.

--- 帖子 #230 ---
Correct!

--- 帖子 #231 ---
Hello Traders, I'm trading with Arb-o-mat a long time and i'm the creator from the hugh Co-Integration thread at the stevehoopwood-board. so if you need assistance in most every questions about R, coinetgration, the different root-tests, arb-o-mat etc. go ahead and ask. i have spare time and it could happen that i'm not able to answer immediately to your question. so please be patience. i'm a busy man codeing for a company the Co-Integration Search Engine V2 and trading incidentally to push my accounts. Thank you Mediator

--- 帖子 #232 ---
Hi Mediator Thanks for willing to help. Do you know the answer to post 152? http://www.forexfactory.com/showthre...03#post5690403

--- 帖子 #233 ---
Can you create an EA which would close all trades when arbomat hits 0? Thanks

--- 帖子 #234 ---
Hi Mediator, Thanks for popping by... I read some of that thread... and I think here are recycling what has already been done. Can you let us know what the main obstacles issues were with this system? What MM techniques did you have to enter and exit and take a loss where necessary? Thanks, Vip

--- 帖子 #235 ---
This variable is the added spread (drift) between the two pairs apart from the mean line (yellow zero line). Don't be confused about the word 'spread'. it does not mean the ask-bid range. i call it drift. this are the pips of both pairs calculated from the distance of their zero mean. in this example the value is -27.5(?) then subtract the ask-bid spread of both pairs from this value and you get the gained pips if it returns back to zero mean. but be cautions there could happen a phase shift, which means if the drift returns back to zero it does not guaranty a profit, because both or one of the two pairs extented their drift movement out of range boarder, even if you dynamicly adjust your lot-ratio.

--- 帖子 #236 ---
yes, i could, but sorry i'm very busy with coding another project. maybe you'll find another helpful person here. simply permanently test the pred[0] value in the code and if it crosses zero then close basket.

--- 帖子 #237 ---
Thanks for the quick reply. If I try to write EA based on Arb-o-mat EA, how do I get this value from Arb-o-mat EA?

--- 帖子 #238 ---
So I think that I am using it differently and I am still making profits. I consider the trend rather then the mean. up ward shows correct sign down ward shows opposite sign. I also consider the fluctuated yellow line in MT4. I still don't now where to exit thou. I am using two pairs only with 1M TF

--- 帖子 #239 ---
the most known obstacles with this system is mostly the same with every countertrend system. one pair is drifting far apart from his drift range, that a return to zero mean does not close the basket in profit. in this situation you will win with the trend-o-mat. but who knows if trend continue? Or if you spoted the reversal? there are many MM technics like in real trading too. enter at extreme StD-Dev (+-2) and if it goes against you, you could exit or reentry like a grid system. another problem is the lot adjustment. It is only possible if you trade with oanda units or big accounts. And last but not least is the key to determine the 'phase shift' of one, both or multiple pairs. But before i forget to say: if you trade multiple USD-Pair baskets then take as the base instrument the UDX (Dollar Index) against all other USD-pairs. if you find the most cointegrated pair then the probability of a return to mean is bigger. usually u trade this kind of portfolio with stocks of one sector against their indices.

--- 帖子 #240 ---
Have a search in the plot()-function. After this lines: Inserted Code Rgv("regressand-pred", pred); plotOsc("spread", pred, 1, 0, clr_spreadline, clr_spreadline); Add: Inserted Code if(crossedValue(pred[0], 0)) { call close routine // pseudocode } crossedValue is an already build-in function. or use the buttons in the top-right corner called 'close' and extend the autoclose()-function with a basketclose-routine. the latter will be a manual basket-closer

--- 帖子 #241 ---
Thanks. Got it.

--- 帖子 #242 ---
Mediator, since you popped back into existence for a moment, are you going to be able to post V2 of your ea on steves forum or are you now locked out of public domain since a company is paying for you to work on the project? or are you keeping your public version separate from your payed project version???

--- 帖子 #243 ---
Hello Mediator, Many, many thanks for stopping by I am pleasently surprised. So regarding dollar pairs, if eurusd most cointegrated pair and dollar is strong, you would short eurusd at some standard deviation above the mean. This is very valuable to know and hope others can benefit from this knowledge as mush as myself. Thanks again for posting we appreciate it a lot. -Dinesh

--- 帖子 #244 ---
hello Blahn, nice to meet you again. good question. Yes i will post V2 if it is ready, but with a seperated code for the public. i do not code this V2 into mql. i use a higher level language, because we have to analyse a whole lot more instruments in different sectors in a very much faster time with every aspect of long-term and short-term calculations. the public domain code will in the first stage written in mql with help of R. but some algorithms will be excluded into a .dll for better performance curve. i know it was a long time since i published a piece of code, but the companys work has higher priority. some in steve's thread extended the existing code and i hoped for a little more evolving. fact is, that i'm only able to assist. one path would be that one coder take this assistance and all the ideas and finish it. no company are able to say i published their code, but... pssst

--- 帖子 #245 ---
You are our Robin Hood

--- 帖子 #246 ---
Hi Folks ! I get the same warning messages after compiling the arbomat file in the MQL Editor. After compilation the EA didn't show a smiley ;-((. Maybe Mediator can help.. Thanks in advance Bernhard

--- 帖子 #247 ---
Please see post #1 I just updated, did you do each one?

--- 帖子 #248 ---
Hi Dirtybrown ! Thanks for the quick reply ;-) I've done all mentioned steps. Nethertheless Tomorrow I'll do a new installation and try it once more. Happy Pippin Bernhard

--- 帖子 #249 ---
The warnings are harmless. They come from functions in the common_functions.mqh file that aren't used in the EA.

--- 帖子 #250 ---
Here are the most interesting readings i have found on this subject.I thinks it is essential to read them if you consider trading with this method. http://www.yats.com/doc/cointegration-en.html#htoc9 http://tradingwithmatlab.blogspot.co...n-testing.html http://www.ufrgs.br/PPGE/pcientifica/2012_03.pdf

--- 帖子 #251 ---
Well I think I got it but no numbers yet.

--- 帖子 #252 ---
Thanks for the links, yes its important to have a theoretical understanding. The advantage the stock market has that we don't have is sectors, per se. But we can make up for that by measuring baskets of course. Attached is an R script i modified to test cointegration using ADF between eurusd and nzdusd it pulls data from yahoo. Could easily be adapted to be done in arbomat. Wanted to compare it to usdcad but there's a syntax problem for cad. You may need to import the tseries package before running i could only get it to work like this: install.packages() then select tseries from the list, and your good to run script. If you want to substitute your own pairs and run it, just open the file in R, select edit then run all. you can change the symbols, im not sure how to change tf's in the yahoo http code.

--- 帖子 #253 ---
I've got your point I will try it, .. Did you see arbomat graphic like chart price ? so, we might use discretion trading system, like supply demand, Price action, etc look at graphic below ... what do you think? one question, how you use fluctuated yellow line in MT4 ... could you give sample chart ?

--- 帖子 #254 ---
Hey, that's an awesome looking price analysis you did on that chart. This is an art so hopefully you can teach us, haha.

--- 帖子 #255 ---
What is the advantage in using only two currency pairs in Arb-o-Mat, instead of all of the available? When only using two currency pairs, it seems more likely to place the Arb-o-Mat "spread" graph further away from zero... but wouldn't it be more accurate with more pairs?

--- 帖子 #256 ---
Thx that's great.I have never used R before.To be honest though, i think that if we need to use econometric tests,Matlab would be better.There is also a dll here in forexfactory that connects MT4 with Matlab.

--- 帖子 #257 ---
had the same problem.You havent given the right Rpath.And by the way,R doesnt have to be open....

--- 帖子 #258 ---
K I have never used R before so how are yall getting the white charts up.I got the MT4 working but can't figure out how to open a chart in R.

--- 帖子 #259 ---
it should pop up on its own automatically if you turn on the EA and have smiley face.

--- 帖子 #260 ---
The EA is on in mt4. Do you have to put the EA in the R file ? Sorry if the questions are stupid. Mt4 is easy but this R thing is just to new to me.

--- 帖子 #261 ---
more pairs = more stationarity so less overall movement. This is not to say the drawdown couldn't accumulate eventually with more pairs. Just a general observation. Fewer pairs, less stationarity so more portfolio movement. More risk(beta)? Compare nzdusd usdcad at these levels its still a great time to place a trade on these 2 using 1 hr chart data. These pairs are widely known to be cointegrated.

--- 帖子 #262 ---
No all of the R commands are embedded in the EA. Sorry not sure why it won't work, make sure to use 32 bit version

--- 帖子 #263 ---
I installed r into c:r I got it working by changing the with /... in the mq4. See below. #define RPATH "C:/r/R-2.15.0/bin/i386/Rterm.exe --no-save" Could not get it to work when i installed in C rogram Files...... O

--- 帖子 #264 ---
I agree matlab is more robust. I doubt any MT to matlab API's are as clean as the one developed by 7bit though, that let's us trigger commands and send data realtime. I think I saw the ones you talk about on the metaquotes site they are very basic. Can you post a link to the interface? It would be interesting to have matlab do many simultanous calculations utilizing multi core processors or GPU devices which can be great for parallel processing. Maybe it's best to try to come up requirements for a huge realtime cointegration model using matlab and let an "expert" set the whole thing up with proper error detection. This all looks like very complicated math, not just anyone may really understand how to implement it profitably. There seem to be many qualified people on freelancer sites, so maybe an option, but the risk is that it is either not accurate or timely..in either case not suitable for live trading. With so many on the thread I don't see any use in going that route yet until the concepts are better understood by all.

--- 帖子 #265 ---
Yes 32 bit i have the ea that says arbomat_demo its the one you had posted its working in mt4 so its ok thanks for trying to help.

--- 帖子 #266 ---
it just support resistance level, I did my trade base on price action. I use this hedge methode to control DD. so, my plan to use this methode by discretion trading, watch PA, analyse, make decision for one pair, hedge with the other pair base on arbomat thanks

--- 帖子 #267 ---
See the chart below ... I entered these trades based on 1M TF but I use now the 15M to illustrate my entry clearly. The yellow line actually shows the trend. When it cut the the price bars there was my entry on 1M TF between the red and green areas. I placed that order last Tuesday and I did not use the 1 standard lot as arbomat suggest it would be 1600$ now if I did so. However I did not closed my trade although it reach 200$ so I can identify correctly my exit point. one observation I saw is that as the yellow line goes away from the price bars you are in safe side. So I am thinking to exit when ever the yellow line comes near the bars again

--- 帖子 #268 ---
This chart is better I think. I entered the trades when the arbomat chart was at -0.5 as I remember.

--- 帖子 #269 ---
Hi Mediator and thanks for your disponibility I have a few questions for you based on your experience: what are the best pairs to trade (single pairs and basket pairs)? it is better use arbomat with intercept value true or false? Which is more accurate? Thanks p.s. later I'll post a new version of basket arbomat with little improvements

--- 帖子 #270 ---
Hi traders I have added few things: - security window before opening trades: - spread pairs information (difference bid-ask per pair) - suffix per PAIRS (like #, m, or whatever) feel free to thank me :-)

--- 帖子 #271 ---
Thank you. Now, how does this work???

--- 帖子 #272 ---
J3ifer, if understood correctly,(and although you are in profit in your hedge) you should sell USDCHF and buy USDJPY when the graph is below 0.0 spread.. if it was above 0.0 spread then you should buy USDCCHF and sell USDJPY

--- 帖子 #273 ---
Hi marijan993 you attach the EA to any 1h chart you want. If you are going to trade a basket (i.e. USDCAD, EURUSD, GBPUSD) you have to attach the EA to only one of these 3 pairs. From arbomat (TF of arbomat can be whatever you want) you read 3 values (i.e. 80, -100, -20) and you have to input these values into the 3 pairs window value, set the magic number for the basket and a target (if you wish). That's all. You can manage different baskets simultaneously, but remember each basket must have a different magic number. If I'm not clear, feel free to ask anything else.

--- 帖子 #274 ---
I know that I should trade the reverse way but I am not following the same technique. I am following the trend rather then waiting for it to go back to the mean 0. I hope you understand me.

--- 帖子 #275 ---
Attached Image (click to enlarge) Looking good here

--- 帖子 #276 ---
As you may have read in the links i posted,this method of trading is widely used by hedge funds,large banks etc.So if we are going to do this, we need to compete with the best.I think Matlab is essential for three reasons: First, we can run econometric cointegration tests on multiple pairs to find the right timeframe and deviation levels they should be traded(this is does not require math skills,you just need to know how to trigger these tests in Matlab).Second,we can run backtests in Matlab to find the right SL levels(because this may work now,but after a while DD will essentially kill our accounts).Third,its far mor accurate and multipurpose than R. And if we think about it,the only reason it needs to be connected with MT4 is to import data and analyze.We dont need any advanced dlls or something.The only reason we will use MT4 after that is to place the trades. Here are two ways this connection can be done: http://articles.mql4.com/679 http://articles.mql4.com/440

--- 帖子 #277 ---
It would be ideal, can you please find some example of multiple cointegration across securities? I'll do some searching and that my be the place to start.. worry about data interconnection later, initially csv files can be used to load the data.

--- 帖子 #278 ---
If you want to test for multiple cointegration you need to use the Johansen test.Here is a couple of examples: http://www.mathworks.com/help/toolbox/econ/jcitest.html http://www.mathworks.com/help/toolbo...c.html#btdp660 I have installed Matlab and i ll try to import some data about currencies later and i ll try to run this tests.I hope i can make it since i am not very familiar with Matlab.

--- 帖子 #279 ---
You were very clear, thank you.

--- 帖子 #280 ---
Hi together At the Moment I have open 4 Basket on my Live Account 1. Long NZDUSD -&gt; Short AUDUSD 2. Long NZDUSD -&gt; Short USDCAD 3. Long EURUSD -&gt; Short GBPUSD -&gt; Short USDJPY 4. Long EURUSD -&gt; Short USDCHF -&gt; Short USDJPY All in 1H Timeframe for me also Medium Term May be I win or I die You can follow here if you want http://www.myfxbook.com/members/Gart...-ob-mat/311156

--- 帖子 #281 ---
which method are you following? I thought you should sell one and buy the other and here you bought both of them why?

--- 帖子 #282 ---
I hope you'll win... I think the goal now is to find out what are the best cointegrated pairs. For me (for sure) is GBPUSD-EURUSD. It works like a clock... But it is very important with 2 pair not to fail the entry... entry is the key (I know it's very obvious but still very important). With more pairs I think it's better to choose a even number of pairs (4-6-8) not more... Also my advice trading 4/6 pairs is to open half lots, if the basket goes wrong very bad, open the other half in the same direction. This seems to work fine with me. What do you think boys (and girls)????

--- 帖子 #283 ---
I've noticed that the graph changes depending on which chart you attach the arbomat EA so attaching it to six chart you will have 6 more Arb-O-Tunities... P.S. I need a bigger screen to trade this way

--- 帖子 #284 ---
Thanks for sharing. Did we figure how to enter the trade yet? In my mind it seems we still toss coin to decide which direction to go. We know EU and GU go the same direction and decide long EU . Why would we short GU to limit the profit? I understand hedge. If we want to limit loss, just trade small... Hedge is like "Wide diversification is only required when investors do not understand what they are doing." Warren Buffet. Please help me I don't understand the logic here.

--- 帖子 #285 ---
only quoting as example (don't take it personal please): please all be sure not confused about cointegrated and correlated. these are very different meanings. a correlation between EU and GU exist because of their fundamental mostly equal economics. both have the US economics inside and the european economic within the eurozone. this is why they are correlated. But to be cointegrated they have to be a system in its self. hmm please read wikipedia pages about it. i'm not able to explain it well. cointegrated are the north-hemissphere and south-hemissphere seasons, but the temperatures could correlating but it is not a must.

--- 帖子 #286 ---
Hi Mediator, Since you trade Arb-O-mat for a long time, could you share how you trade??

--- 帖子 #287 ---
No problem Mediator I'm here to learn, not to teach The meaning of what I wrote is to find out what PAIRS suited better this strategy. For scalping (as mentioned) is GBPUSD-EURUSD... I'd like to know what other members are doing... that was the meaning. Your experience is very appreciate and welcomed

--- 帖子 #288 ---
Attached Image (click to enlarge) Please see post 1 i updated yesterday. You take the hedge as listed if price is below the mean, which in this case it is. a few more easy money trades like this and i can retire ahhhhhhhhh freee money!!!!!!!!! Ok, won't get ahad of myself, but im beaming if this can be repeated steadily.

--- 帖子 #289 ---
We need to be able to load spreadhsheets into R and run the R code embedded in the EA from the R command line, because it's reading from .hst file only so much data will be loaded. If we can get years of data loaded will probably help to workout the deviations and how prices have reacted through the course of history, focusing on nzdusd usdcad as their coint. relationship is so strong as seen. Action item for me, if anyone else can do it please feel free

--- 帖子 #290 ---
Hi everyone. I've been really interested looking into a similar method like this and the software looks just what I need, but I have no idea to get this running. What have I missed? Plz someone pinpoint me to the correct post or instructions to get arbo-mat running. The instructions in the 1st post don't make much sense to me. I can't seem to find the same files as mentioned. Thanx in advance.

--- 帖子 #291 ---
OK I have deleted everything then re loaded. I have still got something wrong and can't figure it out I have read all of the Synth. thread and still can't get it this is what I'm getting in the experts tab.Sorry guys http://my.jetscreenshot.com/demo/20120524-2fqx-86kb

--- 帖子 #292 ---
What is the common_functions.mqh file?

--- 帖子 #293 ---
You most likely have not set the path to your R installation correctly in the EA. Before asking questions here about how to install the R interface check this thread . This is where 7bit first released the R interface and explains how to install it, leads noobs through install problems etc.

--- 帖子 #294 ---
Nevermind, got it sorted!

--- 帖子 #295 ---
Here is my path looks right. http://my.jetscreenshot.com/demo/20120524-ok4e-6kb

--- 帖子 #296 ---
Only other thing I can think of is try reversing the direction of the slashes in the string. i.e. use "/" forward slash, not backward

--- 帖子 #297 ---
Yes I have it setup both ways so not sure so frustrating.Pretty good with mt4 and able to modify code a little but never used this R stuff so this is over my head.

--- 帖子 #298 ---
I had trouble setting R up also. Now have it running. Here is my path: #define RPATH "C rogram FilesRR-2.15.0bini386Rterm.exe --no-save" #define RDEBUG 0 I set RDEBUG to "0" and it worked...don't know if it really makes a diff. or not but........ piphunter74

--- 帖子 #299 ---
Did you install the 32 or 64 bit version of R? I believe it should be 32 bit even if you're on a 64 bit system.

--- 帖子 #300 ---
Metatrader is 32 bit so I run the 32 bit Version Icemaan

--- 帖子 #301 ---
Like Steve said. Try forward slash also copy r to a another directory and try that. i.e in you image you have (x86) in the path. The brackets may not be interpreted correctly in MT. So copy to Inserted Code "C:/R/*.*" and adjust the path to Inserted Code "C:/R/R-2.15.0/bin/i386/rterm.exe --no-save" O

--- 帖子 #302 ---
Ok here it is in every single step: http://www.stanford.edu/~avinayan/Report445.pdf What we have to do is program it in Matlab and start making some tests on what timeframes to use, etc.They used D1.I think it can be done on lower timeframes with some optimizations.Unfortunately, i know nothing about Matlab .

--- 帖子 #303 ---
Its tells me its 32 I had the option to check 32 or 64 and chose 32. Also all the errors are the function calls basically the same ones that are warning when you compile it. I can get the mt4 charts to show everything it just won't give me any reading for the numbers the green 0.0 stays that way and all the pairs except for EU have 0's and EU is 100 and I can't get the white charts to come up auto. I have deleted and re-loaded 2 times just to make sure I didn't miss anything and same results probably something simple but just can't get it.

--- 帖子 #304 ---
I have the same problem as turbo. This is what my chart looks like after i follow the install instructions. Any info is appreciated! Attached Image (click to enlarge)

--- 帖子 #305 ---
That's the issue neither do I really. At this time for practicality and for the sake of the thread I will focus my efforts within R, otherwise we are re-inventing the wheel at a VERY early stage. I will experiment with matlab (I also have the latest version) as time permits, but I do have a fulltime job outside of the markets and (hopefully some) social life.

--- 帖子 #306 ---
On the other hand, if this is something you really want and have the money to pay for it, I would recommend going to a freelancer site and have them build a model for all pairs. You could share it to the thread and others could improve it even more. Then get another programmer to write a custom DLL wrapper to interface back to MT for optimal speed done in C++. I'd be willing to put in time getting requirements if that is something you want to do. Depending on interest, maybe some people on the thread could chip in the development fees to have it professionally done, by a math PHD. If there were a dozen or so people splitting the cost, it may be quite affordable. Keep it open source..

--- 帖子 #307 ---
I got it working by moving the R directory out of program files like was mentioned earlier. Sorry for taking yalls time, needed to do more reading...

--- 帖子 #308 ---
I moved it out of program files and into just c: but still won't work so I really have no clue.I even opened up a new demo and still no luck. On the 1st page it says load in scripts pretty sure it should be includes when in scripts it won't compile?

--- 帖子 #309 ---
2. copy common_functions.mqh &amp; mt4R.mqh into mt4/experts/scripts these two files should be in include folder instead of script folders. common_functions.mqh &amp; mt4R.mqh into mt4/experts/include

--- 帖子 #310 ---
hmm it may work that way, but I just double checked my configuration is the same as post #1 and it is working. I'm guessing there may be problems on certain motherboards perhaps that explains the problems of some people not sure.

--- 帖子 #311 ---
Attached Image (click to enlarge) Any scalpers out there? Try trading this 1 minute chart look at those extremes then reversion. Turn directional scalping into shotrt term range trading by hedging.

--- 帖子 #312 ---
Attached Image (click to enlarge) Yo Begamer! Check it.. This is nzdusd and usdcad Attached Image (click to enlarge)

--- 帖子 #313 ---
I am trying to install everything. Where do you find these files? Have MT-4 and R installed. Where do you find common_functions.mqh &amp; mt4R.mqh? Searched my HD and could not find them. And all the other files too! Thanks in advance. 2. copy common_functions.mqh &amp; mt4R.mqh into mt4/experts/scripts these two files should be in include folder instead of script folders. common_functions.mqh &amp; mt4R.mqh into mt4/experts/include

--- 帖子 #314 ---
Guys, before we start to make any constructive and sound trading system around arbomat all of us need to use same EA (arbomat_demo or arbomat) cause in screenshot below arbomat_demo gives different coefficient then arbomat.

--- 帖子 #315 ---
Sorry my fault for not being clear on this. I am using the demo version from the synth hedge thread. I decided to stick to that version for personal preference after hearing the trend functioning was off, altoronto there is a way to take the trending off sorry i deleted mine but its there somewhere. After that i think they should be the same. Sorry I had forgotten about that, i actually had this installed about 6 months ago at least quote=altoronto;5699116]Guys, before we start to make any constructive and sound trading system around arbomat all of us need to use same EA (arbomat_demo or arbomat) cause in screenshot below arbomat_demo gives different coefficient then arbomat.[/quote]

--- 帖子 #316 ---
It is useful if DB can attached all files in post 1 so not so diligent people will be happy.

--- 帖子 #317 ---
OK got it to work the trend was set to false so when I set it to true it brought up the R chart.Finally

--- 帖子 #318 ---
Apologies for my laziness, post #1 now has all files and instructions.

--- 帖子 #319 ---
I prefer 1 hr that seems best trade off between seeing enough data and the price variations. FXEZ, do you think it would be useful to calculate an ADF (dickey-fuller)reading within the arbomat? Also in the links Eremix posted regarding matlab, there are various error detection calculations. Do you think it would be a worthy path of development to explore in R, so any calculations that may be invalid are taken out?

--- 帖子 #320 ---
It could be done - but this is where it turns into a more hands on approach by statisticians typically. It's been a while since I was into this material and I'm not a statistician. A good reference on the procedures used to perform a proper ADF test is chapter 5 from Analysis of Integrated and Cointegrated Time Series with R by Bernhard Pfaff, "Testing the Order of Integration." Pfaff favors his urca package with the ur.df test. And really, if you guys are determined to understand how to do this stuff properly in R, the book is a must read. (lots of examples) I personally find that the output from the Johansen test - ca.jo (also in urca) is a bit clearer to determine fail or not but the methods don't give the exact same results either (Engel Granger vs Johansen). They give different eigen values / coefficients, and I've had more experience with Johansen. I think I recall that Engel Granger minimizes variance while Johansen maximizes stationarity but I might have that backwards.

--- 帖子 #321 ---
Here is some code to get the juices flowing for some of you who aren't that familiar with R. I hope it will inspire some of you who are unfamiliar with R to play with some of the packages and do your own analysis. Assume a price series AUDUSD, NZDUSD in data frame df. Inserted Code df &lt;- data.frame(x) # perform the regression (get NU to predict AU) m &lt;- lm(AU~NU,data=df) # plot a line chart of the residuals to visually check for cointegration plot(resid(m), type='l') coef(m) Inserted Code (Intercept) NU 0.03141752 1.27344033 You can also perform the linear regression without intercept like: m &lt;- lm(y~x+0) Plot the new series and compare to manually working out the coefficients: Inserted Code # format for maximum graph space, minimum borders par(mar=c(2,4,1,1)) # plot 4 charts one on top of the other for comparison par(mfrow=c(4,1)) plot(ins[,'AU']) # first plot AU for comparison purposes # plot the predicted series for AU - this is made up from NU * 1.27344... + 0.0314... plot(predict(m)) Note how similar the #1 plot looks to the #2 plot. But you can see small discrepencies like the shape of the first bottom. Just in case you don't believe me this is the manual formula for the predicted AU price and it should be identical to plot #2: Inserted Code ns &lt;- df[,'NU']*coef(m)[[2]]+coef(m)[[1]] plot(ns) # 3rd plot And finally, the thing you've been waiting for - the spread between the two. I'll take my predicted or calculated AU price made up from NU and subtract the real AU from it and plot mean and standard deviation lines on the 4th chart. Inserted Code plot(ns-ins[,'AU']) s = sd(ns-ins[,'AU']) mn = mean(ns-ins[,'AU']) abline(a=mn,b=0,col='red') abline(a=mn+s,b=0,col='cyan') abline(a=mn-s,b=0,col='cyan') abline(a=mn-s*2,b=0,col='orange') abline(a=mn+s*2,b=0,col='orange') abline(a=mn+s*3,b=0,col='blue') abline(a=mn-s*3,b=0,col='blue')

--- 帖子 #322 ---
This is the output created from the previous analysis. This is about 34 days worth of data. This was lm(AU~NU) or testing the relationship between AUDUSD and NZDUSD. First plot is simply the AUDUSD price. Second plot is the predicted AUDUSD price based on NZDUSD with the following: (Intercept) NU 0.03141752 1.27344033 Third plot is the same as the 2nd, just to show a different calculation - it explicitly multiplies and adds the coefficients to the NZDUSD price. 4th plot is similar to what you would see if you placed the EA on AU 1 min chart and only used NU as a regressor.

--- 帖子 #323 ---
And then just to continue with the code example, to do the ADF test you could call: Inserted Code library(urca) spread &lt;- ns-ins[,'AU'] # store the spread ur &lt;- ur.df(spread,type='trend',lags=3,selectlags='AIC') If you want to get help on the function try ?ur.df. If you want to inspect the ur object try summary(ur). Inserted Code ur@cval # returns the following critical values table 1pct 5pct 10pct tau3 -3.96 -3.41 -3.12 phi2 6.09 4.68 4.03 phi3 8.27 6.25 5.34 ur@teststat #returns the following test statistics tau3 phi2 phi3 statistic -4.604864 7.146347 10.70934 To determine significance check the tau3 value (-4.604864) against the critical values for tau3. You will see that the test stat for tau3 is lower than all the listed tau3 critical values (first row of critical values table). To understand whether this is a pass/fail look at the 1% vs 5% values. tau3 -3.96 &lt; -3.41 &lt; -3.12 1% &lt; 5% &lt; 10% for tau3 so a lower value indicates significance at the 1% level. phi2 6.09 &gt; 4.68 &gt; 4.03 phi2 goes the other way (highest to lowest) so a higher test stat of 7.14 indicates significance at the 1% level. phi3 8.27 &gt; 6.25 &gt; 5.34 Same for phi3 - significant at the 1% level. The newly formed spread passed the ADF test! lol

--- 帖子 #324 ---
You can create error correction models in R as well using the vars package and requiring a ca.jo (Johansen) object. I never mastered this topic. Here is a link on the topic: http://cran.r-project.org/web/packag...ettes/vars.pdf (I'll stop taking over the thread now)

--- 帖子 #325 ---
The Johansen test is generally preffered to the Engle-Granger test for testing cointegration.It is more a framework rather than a test and it uses five types of regressions to test cointegration (you just need to choose the right one ). DB i dont know if i want to use Matlab.Actually it is not a matter of preference.I have read a lot about this topic and what i have seen is people with PHDs,professors in the world's best universities,professionals,etc, to use the best software out there to do their analyses and the best computers and to come up with an 11% annual profit.So how are we supposed to do better than them (or even the same) with lack of knowledge,worst software,worst computers and without a tested system?

--- 帖子 #326 ---
Does anyone know what's going on with the bars that R analyzes?For example,when i use 8000 bars it analyzes something like 2000 bars in 1min TF,2500 in 5min,5500 in 15min,2500 in 1H etc. The most bars are analyzed in 15min TF.

--- 帖子 #327 ---
I'm not bashing academics (my dad was a college prof) but I'll just point out that tenured university faculty effectively have guaranteed employment for life. They're not motivated to find ways to support themselves with trading like us non-academics. That's our advantage.

--- 帖子 #328 ---
WOW!! Thanks for all of the suggestions this is excellent. Will be playing with the code you've mentioned.

--- 帖子 #329 ---
"Desperation brigs genious."

--- 帖子 #330 ---
My guess would be you don't have enough history, ie: If your broker only allows you to go back 30 days on the H1 chart you will only see 720 bars ( 24 x 30 ), but on the 5M chart you will see 8640 bars ( 12 x 24 x 30 ).

--- 帖子 #331 ---
Would you mind to download those filess and put tehm in post#1. common_functions.mqh mt4R.mqh mt4R.dll In fact, I am not able to open https://sites.google.com/site/prof7b...on-integration Many thanks!

--- 帖子 #332 ---
Hi guys doing too many things at once isn't good. In the last uploaded file basket arb-o-mat_v4 it seems something is missing (security windows before opening orders). My mistake, I apologize. If DirtyBrown can and want post this file (last and ultimate version) in post#1 fot the benefit of all. THANKS AND HOPE NOT ANNOYING

--- 帖子 #333 ---
Eremix, this thread is a free, QA bed. What we lack in knowledge we can make up for with brute force testing. Simply put, R can do most of what matlab can do. matlab has some specialized optimization toolboxes that can sometimes make it run faster, but from my point of view it can do everything needed just fine.

--- 帖子 #334 ---
Kind of a odd ball pair but just traded UCH (-.90) against GU(.80). Closed at just over 200 bucks. Will have to work on exits but just getting familiar with the way to trade it. 30 min trade length. edit:I think I traded this in the wrong direction as its below the 0 line ?

--- 帖子 #335 ---
buy the generated figures below the 0 line, sell the figures above the 0 line.

--- 帖子 #336 ---
Ok thanks, I will look into this and see what can be figured out. Pat, you have my permission to take over this thread any time. We are here to learn from you and (hoepfully) subsequently run with the ideas.

--- 帖子 #337 ---
Thanks Sym, can you please PM full instructions how to use it and I will add to post 1. Thanks for your efforts on this, I haven't had the chance to play with it yet.

--- 帖子 #338 ---
Attached Image (click to enlarge) Attached Image (click to enlarge) See how price kissed the 1st deviation then is starting to pull back. Given its end of week i closed this position and will look to re-enter on pullback next week. This is my first live trade also i just closed it. YAY It may be interesting to note on these pairs the hedge ratio is nearly unchanging, maybe this confirms cointegration? Or maybe it didnt move enough, though it did move 1 standard devition in the last 24 hrs

--- 帖子 #339 ---
Nice. ? for you if one of those pairs had a negative number in front you would have sold that one because its below the mean right and if above you have to buy/sell opposite. Or does it matter just sell above and buy below no matter the +/- .

--- 帖子 #340 ---
I dont know.It doesnt make sense to me.How is it possible to see 5500 15min bars and only 2500 5min bars? Has anyone else tried this?

--- 帖子 #341 ---
You can get more backfill in your charts on each time frame by just scrolling backwards in time. It'll keep backfilling until it hits some limit. Maybe you backfilled your M15 but not your M5 if you don't use M5 as much.

--- 帖子 #342 ---
This happened to me to. Question for you Steve that maybe you can help me ponder: How much data should we be looking at in any chart? Unlike MT, R shows you the whole data set in 1 frame without a scrollbar..so everything get more compressed. Yet, depending on the amount of data, you could get vastly different deviation levels. Likely, we will have to see people's results over the coming days/weeks to better understand this dynamic.

--- 帖子 #343 ---
I didn't know that thanks, Thought it was more of a redraw issue.

--- 帖子 #344 ---
Yes, the amount of data is a crucial factor.Actually the factors we ll need to determine are the amount of data,the timeframe and the settings of the arbomat.Arbomat EA and arbomat_demo EA give different results because in arbomat_demo,you dont have the use_diff and use_intercept choices. Steve, i tried this but nothing happened. I scrolled back in my MT4 chart but the bars analyzed in R didnt change.Anyway,what's the maximum number of bars you can analyze?And what is the optimum(hard question,i know)?

--- 帖子 #345 ---
LOL I have not idea what the best amount of data to analyze is. If some is good, then more is better right? Regarding limits on the number of bars allowed on a chart, you can control that limit in Metatrader. There's a a setting for charts that sets the max number of bars. By default it's like 20,000 but you can set it to 2^32. Just be warned that MT can get really slow when you do that and uses gobs of RAM.

--- 帖子 #346 ---
Hi guys, I´d like to share with you my initial trades with arbomat. I suppose it is time to reverse my trades (it is bottom of the oscillation). I´m trying this kind of setup: all pairs, H1, 2500 bars history (it is over 100 days, it should be enough on H1 and look how nice and stable oscillation is). regards K

--- 帖子 #347 ---
Hi Doarisu, you have to set "use_diff and allow_intercept" to false in EA properties. K

--- 帖子 #348 ---
Attached Image (click to enlarge) Ok guys, I'm also using the non demo version as well to compare. Hi here's mine, notice i've got more data on my .hst Still the levels are pretty close, this one has a bit lower deviation not super far off though.

--- 帖子 #349 ---
best way to do it is keep hitting the home button until no more data loads.

--- 帖子 #350 ---
May I suggest to use this on a live broker feed!!! Metatrader data quality is already shady at best. Don't add to the problem by relying on demo servers to make decisions. This may also affect how much history you can download I bet.

--- 帖子 #351 ---
demo: Attached Image (click to enlarge) arbomat: Attached Image (click to enlarge) demo version is making more sense to me, therefore my account balance. Can't say why, but there is a difference. Demo version seems way more intuitive than final arbomat release.

--- 帖子 #352 ---
Dirtybrown, if you set intercept option= true you get the same graph as demo..

--- 帖子 #353 ---
Hey DB, what is the difference between arbomat and arbomat_demo ?.. I´ve tried only arbomat so far. And unfortunately I have only Dukascopy live account (no mt4 live data feed).

--- 帖子 #354 ---
? Isn't this basket backwards according t the first page below mean should be taken in same direction ?

--- 帖子 #355 ---
Please How do you get rid of this? Thanks Much luv

--- 帖子 #356 ---
I suppose it depends on strategy, I mean -&gt; you can trade it from extrem to mean or from mean to extrem (trend following).. or from top to bottom (+ is sell and - is buy) and from bottom to top (+ is buy and - is sell). or am I wrong DB ?

--- 帖子 #357 ---
K just trying to figure out trades I took some today and they where good but think I was backwards from 1st page. Also If only taking like 2 pair do we take the pair with the closest numbers to each other or the furthest away. I have read both threads and still not real clear

--- 帖子 #358 ---
It seems to be profitable to do the following: If Arb-O-Mat line is currently BELOW the mean, BUY pair that is a POSITIVE value (in upper left corner of R graph); SELL the pair that is NEGATIVE (if any are; there does not necessarily need to be a negative pair, especially if only inputting two pairs). If Arb-O-Mat line is currently ABOVE the mean, SELL pair that is a POSITIVE value; BUY the pair that is NEGATIVE value. It makes the most sense to enter this trade (either above or below the mean) once the Arb-O-Mat line is far away from the mean (i.e., it's peaked or looks like it might be peaking), and then reap profit as it falls (or climbs) back to the mean. The directions above work when Arb-O-Mat line is returning to the mean from a strong deviation up or down. This seems to be the strategy DirtyBrown is employing with NZDUSD/USDCAD on a one hour TF, no? For profit, it would seem. I plan to emulate next week.

--- 帖子 #359 ---
Your Rpath is wrong.

--- 帖子 #360 ---
I've done some forensic investigation regarding the origins of arbomat.mq4 and arbomat_demo.mq4. These 2 versions are floating around in this thread and produce apparently different results so it's important to know where they're from. arbomat_demo.mq4 was posted 15-nov-2010 in this post . It has the "trend" parameter which I think controls if it's "arb-o-mat" or "trend-o-mat". As we know, trend-o-mat is not recommended by 7bit. arbomat.mq4 is posted on 7bit's web site here . It is dated 30-nov-2010 so it's a later and presumably more refined version. The trend parameter has been removed so it's straight "arb-o-mat". This version has a parameter allow_intercept. The _demo version does not have this and it is doing intercept processing all the time. This is probably the main reason we're seeing vastly different results between the 2 EA versions. The apparent conclusion in this thread is to not use intercept, so the _demo version is probably not what we want. There is also a parameter use_diff which is not present in the _demo EA. I don't know what it does yet. I suggest going with the version from 7bit's web site since it seems to be the latest and greatest and gives more control over things like intercept processing. The arbomat_demo.mq4 file should not be used in my opinion.

--- 帖子 #361 ---
Thanks for looking into this Steve. I need to do more research to understand why they are different. 7bit posted a couple of ways to artificially send ticks to charts, to get the arbomat to trigger an R chart/calculations when the market is closed: http://www.forexfactory.com/showthre...54#post4186754 It's not working for me. If anyone gets it working please let us know, thanks.

--- 帖子 #362 ---
The first script he posted called "ticks" definitely works. I just tried it. Copy the code he posted to a new file in the MetaEditor, then save the file in your scripts folder (with filename = ticks.mq4), then click "Compile" in MetaEditor. Open MT4, attach the ticks script you just made to a chart with the ArboMat on it too, and the R graph will pop up, just like during trading hours. I just did that and it worked for me.

--- 帖子 #363 ---
Here's what it looks like: Attached Image (click to enlarge)

--- 帖子 #364 ---
By the way, someone said this earlier, but I can confirm it: The "arbomat_demo" gives the same plot in R as the "arbomat" (newer version) as long as intercept=TRUE is set in the newer version. Not sure if there is a benefit to having intercept=FALSE, but when it's TRUE, the two versions are identical. Having intercept=TRUE (or using the demo version) seems to be leading to more profitable trades, from what I've seen here. Here's a side by side comparison: Arb-O-Mat (newer version, with intercept = TRUE) Attached Image (click to enlarge) Arb-O-Mat Demo Attached Image (click to enlarge)

--- 帖子 #365 ---
Ok must be a local problem them, I'm loading arbomat to another broker and will try it there. For anyone wanting to trigger the R charts from arbomat over the weekend run this script. Thanks.

--- 帖子 #366 ---
I agree with the last few posts. We have to all stick to one setup/method in order to go forwards. Everybody should setup according to 1 post with 1 set of instructions. Step 2 would then be to find the most correlated/co-integrated pairs to trade. Seems like NZDUSD/USDCAD is doing well? I myself am having great fun with EURUSD/GBPUSD. Great thread with limitless possibilities - we have to go forward as one team! Just my opinion... Thanks for sharing by the way :-)

--- 帖子 #367 ---
It does appear the intercept is the source of the differences of the 2, this should not be much of an issue going forward, but newbies need to be aware of this difference. This thread is a test bed. No doubt, it will spawn several child threads implementing specific aspects of this discussion. I fully encourage participants of this thread to start their own more focused studies based on what we talk about here.

--- 帖子 #368 ---
For nzdusd usdcad, I just followed what was mentioned in post 1, to take the hedge directions as listed if below the mean which it was. If price was above the mean around say a .002 deviation, the trade directions would be reversed from what arbomat shows.

--- 帖子 #369 ---
That parameter controls whether the data is differenced before running the regression. Basically the way R's diff function works the current price is subtracted from the last price and so essentially the bar's net change is what the diff represents. If you have a series of prices: 10, 10.5, 11.5, 11 This becomes the differenced series: NA 0.5 1.0 -0.5 There is some academic theory that states that differencing prior to running the regression is the appropriate course. This tends to be the more academic stance. There are other views that state that the proper way is not to difference before running the regression. This tends to be more the practitioners or the academics who have experience in industry. Choose wisely which group you follow!

--- 帖子 #370 ---
The Introduction should give people an idea of the need for error correction in statistical models. Bear in mind this is the art of estimation not necessarily a science: Since the critique of Sims (1980) in the early eighties of the last century, multivariate data analysis in the context of vector autoregressive models (henceforth: VAR) has evolved as a standard instrument in econometrics.1 Because statistical tests are frequently used in determining inter-dependencies and dynamic relationships between variables, this methodology was soon enriched by incorporating non-statistical a priori information. VAR models explain the endogenous variables solely by their own history, apart from deterministic regressors. In contrast, structural vector autoregressive models (henceforth: SVAR) allow the explicit modeling of contemporaneous interdependence between the left-hand side variables. Hence, these types of models try to bypass the shortcomings of VAR models. At the same time as Sims jeopardized the paradigm of multiple structural equation models laid out by the Cowles Foundation in the 1940s and 1950s, Granger (1981) and Engle and Granger (1987) endowed econometricianswithapowerfultoolformodelingandtestingeconomicrelationships,namely, the concept of cointegration. Nowadays these branches of research are uniﬁed in the form of vector error correction (henceforth: VECM) and structural vector error correction models (henceforth: SVEC). A thorough theoretical exposition of all these models is providedin the monographs of L¨utkepohl (2006), Hendry (1995), Johansen (1995), Hamilton (1994), Banerjee, Dolado, Galbraith, and Hendry (1993). There is a java based program used by L¨utkepohl called Jmulti that may be woth looking into for creating models that integrates with R and other progs: http://www.jmulti.de/ Attached Image (click to enlarge) Working on some of the examples you posted earlier.

--- 帖子 #371 ---
I just made a comparison between intercept set to "true" and "false" for my last basket of trades that I opened Friday morning from EURUSD H4 chart and kept until market close. It included all 7 USD pairs. Both versions suggested same direction for EURUSD and 4 more pairs. Lot sizes were certainly different but also the suggested direction of USDCAD and USDJPY was different! As a result, intercept "true" gave much better result. EDIT: If to summarize suggested USD lots then according to intercept "false" we would sell 0.19 lots of USD against the basket of 6 more currencies but according to "true" we would buy 0.25 lots of USD against others. And we would end the day with -436.90 USD on first occasion and with -75.20 on the second.

--- 帖子 #372 ---
It's very dangerous to set intercept TRUE with 2 pairs because lots could be not balanced (in terms of correlation). I had on demo a trade on EURUSD/USDJPY with lots 1/3.75 as stated by arbomat. But the trend changed and this trade went very nasty. Luckily I was on DEMO. With more then 2 pairs probably is less dangerous.

--- 帖子 #373 ---
Hi Dirtybrown it's a pleasure collaborate with you (all) You'll find instructions on post #273. http://www.forexfactory.com/showthre...363198&amp;page=19 Have a nice day.

--- 帖子 #374 ---
Well one thing is for certain you need to be aware of the price action just before the time you consider entering a hedge. While it's not the technical analysis we do on the charts, there is a numerical analysis you need to do around support areas and maybe you just got caught on the wrong side after a bounce off a significant deviation level. Baskets with higher levels of cointegration shouldn't incure huge drawdowns.

--- 帖子 #375 ---
To my mind, hedging two pairs is always a lottery. It may succeed during certain period but then at some point it will kill the account if traded without SL. A basket of 6-7 pairs is safe but the main question is if it is too safe. If trading 2-4 lots total from higher charts, the profit should be much bigger than 200-300 USD to make it worth the trouble.

--- 帖子 #376 ---
it's the lottery if the pairs have a weak relation, shows importance of knowing the statistical reason why trades work.

--- 帖子 #377 ---
100% agreed

--- 帖子 #378 ---
Thought you guys might like this article - http://www.investopedia.com/articles...#axzz1vzq7Vl88

--- 帖子 #379 ---
Here is a perfect tool for playing with correlations: http://www.forexticket.co.uk/en/tools/01-01-correlation

--- 帖子 #380 ---
I meant that two pairs may sometimes be too much influenced by fundamentals, e.g. Euro at the period when Euro zone is collapsing. This cannot be calculated by any statistical method. In bigger basket we have better possibilities to eliminate unexpected aggressive changes with one pair.

--- 帖子 #381 ---
will watch carefully how this voodoo stuff will unravel .....cheers

--- 帖子 #382 ---
Attached Image puzuzu shall guide us

--- 帖子 #383 ---
Is there any chance we can modify Arbomat so that it can be used with all pairs? I had an idea.If this can be done,we will be able to trade pegged currencies(currencies with fixed rates).For example,we know that EURDKK is fixed around 7.46 with a 2.25% band(in reality the central bank of Denmark has never let the currency go above or below the 1% range).So what we can do is trade the spread of USDDKK with EURUSD and of other similar fixed currencies almost risk-free. And the other thing i have been thinking is whether we can trade such fixed currencies alone.What i mean is whether we can make R give us the mean and the standard deviations of these fixed currencies.Well,i guess we know the mean (since they are fixed),but it would be very useful if we could know the standard deviations as well.Actually i think we dont even need the R.This could be done by a simple indicator inside MT4,right?

--- 帖子 #384 ---
Nice!!!

--- 帖子 #385 ---
DB, I think we should post this in post 1 so that newbies know how to enter the trades.

--- 帖子 #386 ---
Yup. I am sure Puzuzu may be of help.... Alternatively, maybe we could all educate ourselves as to how all this stuff actually works... Radical concept, I know, but certainly worth a shot. Maybe even, as a really last resort, read my thread on all this (Old Dogs Taming of the Beast). Best regards Old Dog

--- 帖子 #387 ---
Thanks

--- 帖子 #388 ---
Just finished reading Old Dog's Taming of the Beast thread . It's only 3 pages long and quite full of info. One point Old Dog made that stuck with me was the idea of constructing these baskets from uncorrelated currency pairs. Key post He states that the best baskets contain cointegrated pairs that are uncorrelated. The currently favored combos in this thread (EURUSD/GBPUSD and NZDUSD/AUDUSD) seem to be ruled out by Old Dog's statement. It's not that they won't work for a while but that they'll potentially blow up suddenly. Old Dog's approach is to come up with a basket and weights that will be stable for days to weeks.

--- 帖子 #389 ---
Any suggestions for pairs that fit your description? If not, how do you think we should go about determining which pairs are both cointegrated AND uncorrelated ( and are one of the USD pairs available in the Arb-O-Mat)?

--- 帖子 #390 ---
I tried this, but no luck. I've also tried copying the code manually, both versions by 7bit, but still nothing happens. Anyone with a similar problem? Any ideas how to fix it?

--- 帖子 #391 ---
Hi friends Can anyone who understands the method should kindly post the rules of the method the best time frame to trade the method The Buy and sell rules Thanks Much luv

--- 帖子 #392 ---
We have too much theoretical noise around... Could someone give an example of a well cointegrated basket, please? I know that USDCAD and NZDUSD are a very good combination but what about a bigger basket? What 6 or 7 pairs should be included? I think, I am not the only person here who has no degree in math and who's native language is not English...

--- 帖子 #393 ---
im just trying to understand but could a currency strength meter be used as an aid to the overall trend direction of these currencys as a help for entry maybe its a silly question? im still learning and this is a little above me im not sure yet if i can get this system to run yet on my mt4 ill wait till monday its a liitle complicated but im learning

--- 帖子 #394 ---
Here you have something that you can test the behavior even when the market is closed. Attached File(s) send tick.mq4 1 KB | 271 downloads

--- 帖子 #395 ---
Hey Guys, I love the work and all the effort you are pouring into this project and if I can, I would like to help by demo testing and posting charts. I have a question: I'm not a programmer and I have read the whole thread but when you download R 2.15.0 where do you install that program? I assume to C drive but do I simply create a new file folder for it? Could you be a little more clear for us non-techie types. Thanks for your help.

--- 帖子 #396 ---
Hey FXTopGun. You can install it anywhere according to what I know. Just remember to set your path to where you install the R software. Also remember to set the path to the 32bit version. I think the folder is i368 (or something similar) Let me know if having any troubles. I struggled initially, but could figure it out eventually. Oh and I also have no programming skills so we are in the same boat. Cool Runnings...

--- 帖子 #397 ---
Attached Image (click to enlarge) Here we are working on something similar, yet there are lots of different sizes, therefore, is the middle curve just like the one in this thread, I think it is a good way. http://www.forexfactory.com/images/icons/icon10.gif

--- 帖子 #398 ---
I have also read Old Dog's thread and that was one reason why I started to test hedging all usd pairs without usdchf and nzdusd. This seems to produce a better price pattern.

--- 帖子 #399 ---
Do you suggest to include EURUSD, GBPUSD, AUDUSD, USDCAD and USDJPY in the basket? And trading it with intercept set to "true"?

--- 帖子 #400 ---
I just posted a reply to 7bit's old thread thinking I was posting to this one. Anyway here it is again. I realized after reading that web page how close arbomat is to this; the one thing lacking in arbomat is the cointegration test. Arbomat calculates the spread correctly but never verifies cointegration. It looks like it'd be easy to add by just using the adf.test function and checking it against a threshold: Inserted Code ht &lt;- adf.test(sprd, alternative="stationary", k=0) cat("ADF p-value is", ht$p.value, "n") if (ht$p.value &lt; 0.05) { cat("The spread is likely mean-revertingn") } else { cat("The spread is not mean-reverting.n") } Unfortunately I'm in the middle of rebuilding the carburetor in my tractor right now LOL.

--- 帖子 #401 ---
Yes, this basket seems to be in a decent deviation level below mean so may be a good entry point. Since below mean, you could take the hedge ratio directions as listed in arbomat. Need to verify cointegration.

--- 帖子 #402 ---
And how do you suggest to do that? For people who are not good in math?

--- 帖子 #403 ---
Hard to say for sure. Need to see how things open up, but it does seem like a decent entry zone. Just try it on demo it's free.

--- 帖子 #404 ---
Please can someone tell me what I am doing wrong, my chart never shown any number. Thanks

--- 帖子 #405 ---
Emma, did you verify the location of the R exe file is defined correctly in arbomat then compiled?

--- 帖子 #406 ---
Attached Image (click to enlarge) Getting the expected retrace from the 1st deviation on nzdusd / usdcad, looking for further retracement before re-entry. Not sure where yet let's watch the hedges tell their story.

--- 帖子 #407 ---
Attached Image (click to enlarge)

--- 帖子 #408 ---
1st deviation looks to be taken out, I have re-entered this hedge

--- 帖子 #409 ---
Do we expect retracement from here

--- 帖子 #410 ---
Added this code, it compiles but I don't see output:

--- 帖子 #411 ---
Your using this on the 1 minute charts?? I don't think this is meant to be a scalping strategy, the spread cost of opening any basket is waaay to high to be used on such a short timeframe, the deviation that your seeing here is just a tiny fluctuation, you might get back to break even on your spread costs if your lucky.

--- 帖子 #412 ---
I got it working but I don't trust the results yet. Right now it prints a probability of about 22% and I believe we're looking for something less than 5% to prove it stationary. First you have to install the tseries package with the R console menu "Packages/Install Package(s)..." Next you have to load the tseries library. So in the function init() add the following lines after Rx("options(device='windows')"); Inserted Code Rx("library(zoo)"); Rx("library(tseries)"); In the plot() function add the following lines after label("spread_cur", 10, 70, 1, DoubleToStr(pred[0] / Point / 10, 1), Lime); Inserted Code Rx("ht &lt;- adf.test(pred, alternative="stationary", k=0)"); label("ht",10,90,1,DoubleToStr(Rgd("ht$p.value"),4),Lime); This prints a result in the upper right of the Metatrader screen under the spread value.

--- 帖子 #413 ---
DB, To see R output you need to run DebugView.exe... (read THIS POST ) The easiest way is to simply return the value to MT4 rather than trying to print it. so simply something like (off the top of my head and not error checked) : Inserted Code Rgd("cat(ht$p.value)",ADFVariable); // then just do the comparison in MT4 if (ADFVariable &lt; 0.05) Print ("The spread is likely mean reverting. PValue: " + ADFVariable); if (ADFVariable &gt;= 0.05) Print("Nice try but no cigar... PValue: " +ADFVariable); By the way, I'm not commenting on the validity of statistical analysis or assumptions, just assisting with the code.

--- 帖子 #414 ---
Correct as FXEZ mentioned cointegration is not generally a short term phenom. But I have made a few pips off one min charts like this. Probably less of a probability of true mean reversion taking place No other way to know if its not profitable than trying it out it out tho.

--- 帖子 #415 ---
http://en.wikipedia.org/wiki/Cointegration Read only the last paragraph.

--- 帖子 #416 ---
Thanks Steve and FXEZ. This gives me an opportunity to get my feet wet with the arbomat coding more than anything. If I can get this to work, I'll look to your more complete R codes FXEZ and get those working in the same manner.

--- 帖子 #417 ---
Good point, pips are pips. If you are using a small basket of low spread pairs I suppose, the tough part would be getting the basket open quick enough after you see a deviation, a negative spike of 5-10 pips while opening the basket would probably make it tough to get back in profit.

--- 帖子 #418 ---
Guys, maybe is stupid question but is it possible to draw deviation levels from R on MT4 chart?

--- 帖子 #419 ---
don't see how that's possible, you'd have to graph 2 or more pairs on the same chart. The people who made MT don't want you to do this sorta thing. Ninjatrader may be a better bet for setting up spread charts, but you'd need a custom dll to connect R to it of course.

--- 帖子 #420 ---
Thank you for reply, but is not a big deal let say to make offline chart with in my case EURUSD/GBPUSD basket and then apply deviations from R on it.

--- 帖子 #421 ---
ah, that's true. I have seen Brijon make offline charts do that. I was never sure how to make them, look through his threads. Should be possible if you can get that going.

--- 帖子 #422 ---
Exactly, here is let say manual how can you do that in MT4, 1. copy Basket14v5.mq4 into your indicator folder 2. open 1min EURUSD chart 3. put Basket14v5 on it 4. change NumOfPairs=2 and TF=1 5. then click on file and open offline BSKT02,M1 then you have EURUSD/GBPUSD M1 Basket chart. P.S. If you want to use other baskets, check in code for other NumOfPais.

--- 帖子 #423 ---
Al, can you please re-upload the attachment. For some reason I am not able to download it tried in 2 browsers

--- 帖子 #424 ---
Dirtybrown, I had issues with FF in morning to download files, looks like it's working now. Try again.

--- 帖子 #425 ---
You sold EU when you should buy it according to the rules. Maybe that is the reason?

--- 帖子 #426 ---
Argh, yeah I screwed that one up, should have been long eu.

--- 帖子 #427 ---
How can you tell they're uncorrelated? (Sorry loaded question)

--- 帖子 #428 ---
Oh, sorry for not going to more detail. Generally, since nzdusd and audusd // usdchf eurusd are 90% or more correlated on most TF's I've left them out of the usd baskets. There will of course be correlation among the remaning pairs, just not 90% -&gt; http://www.forexticket.us/en/tools/01-01-correlation

--- 帖子 #429 ---
Sold GU and NZD today just over spread for DD but was late getting home good profit but not as much as should have been.I'm looking at pairs with the numbers close together not sure its right but so far all trades have been good with very small DD.

--- 帖子 #430 ---
Wrong direction again?

--- 帖子 #431 ---
yes, it is wrong direction. below mean: + = buy - = sell above mean: + = sell - = buy

--- 帖子 #432 ---
Still, it is possible that the "wrong" direction is the winner. Hard to say, of course, as so far nobody knows how to trade this system properly. Needs testing and tinkering.

--- 帖子 #433 ---
Yes, you have the choice to trade trendwise from mean or 1st Dev to 2nd Dev (inside-out) or countertrendwise from 2nd Dev to 1st Dev (outside-in). which probability is in majority? trend or countertrend? or both? from the 1st dev line you could also do both. trade inside-out with inverted direction (below mean) and StopLoss at mean AND trade outside-in with non-inverted direction (below mean) with StopLoss at 2nd Dev or 3rd Dev respectively. or instead stoploss use a grid with the outside-in trading.

--- 帖子 #434 ---
Actually is isn't hard to say unless you're ignorant of the underlying concepts. I suggest those who are confused, spend some time educating themselves on what a mean reversion strategy looks like. This is not a case where the wheel needs to be reinvented or a massive amount of tinkering needs to take place in order to understand and execute a mean reversion strategy. Here is some basic info in presentation form on rules for a pairs trading strategy. The rules involve mean reversion and thus can be applied to baskets of pairs as well (specifically read pages 13-14 for RTM strategy): http://www.cs.sunysb.edu/~skiena/691.../lecture23.pdf This is some information regarding model based pairs trading - very similar to what is being attempted here: http://en.wikipedia.org/wiki/Pairs_t..._pairs_trading Here is a thread with some links you can follow to find more discussion on RTM strategies. http://www.elitetrader.com/vb/showth...hreadid=188326 And here is a video for those with short attention spans explaining a RTM strategy applied to EUR/USD. Inserted Video The key to the underlying strategy is to apply the method to a cointegrated series that is stationary. A stationary time series has a fixed mean and variance (standard deviation). This is a deterministic system, which means you can predict where price will go before it goes there. Visualize a sine wave curve. If the basket you're applying the analysis to is not cointegrated then you have systemic risk due to the trend component, and the system is no longer deterministic. Hopefully by now everyone has figured out that the basket you see printed on the arb-o-mat chart is a long basket. You buy below the mean the long basket (the sizes listed) x # of deviations below the mean, and typically close out at or beyond the mean. To short the basket above the mean, you reverse all the signs on the positions. Also a web search on "mean reversion strategy" has lots of useful information.

--- 帖子 #435 ---
Did we already pairtrading? for example EUR/USD is a pair and i did not believe that this pair is stationary or has a fixed mean. so we have to torture the time-series into a stationary mode which helds only for the sliding window. and here lies the problem seen also with a simple 'back to MA' Trading technic. this is why lot adjustment is important and has to be discovered here. would it be better to take the currency indices and build pairs from it? if for example we found that EUR and GBP economy is cointegrated, we wait until the drift is above 2*StdDev and has root unit. we discovered then the reversal-point of EUR/GBP pair and trade this according to the lot coefficients. i hope i could illustrate that pair trading with already currency-pairs is another story than taking the industrial index and a industrial stock and build a pair of these two components if they are cointegrated.

--- 帖子 #436 ---
I think I understand your comments. You're right that EURUSD by itself is not stationary. The video was posted to give ideas regarding how to implement a mean reversion strategy because it appears there are many new traders on this thread who are unfamiliar with that basic concept. However you're correct that the point of the arb-o-mat EAs is to start with a basket of pairs that are cointegrated. If the process is done correctly the resulting spread (chart shown by arb-o-mat) will in fact be stationary, and becomes a deterministic system. Then it is a simple matter to apply a RTM strategy to that basket. Old dog's thread talks about how to achieve cointegration without finding spurious relationships. Links have already been posted a few pages back by stevegee so I'll forbear but the key is to find a basket of pairs with low correlation that is also cointegrated. I prefer to think of it as financial engineering instead of data torture. I think it's important to remember that cointegration is a LONG TERM relationship based on a linear combination. As such, it is easy to find unstable baskets when insufficient data is used in the analysis, or when the cointegration is not performed correctly or you have pairs in the basket that are too highly correlated.

--- 帖子 #437 ---
thank you for your reply and knowledge. would it make sense to use another entrie rule than StdDev (like Bollinger) or do they has enough statistical significance? my idea is to be in the market without closing positions. only adjusting currency net-exposure to take gains with help of the lot-coefficiens. and to build stacked positions then.

--- 帖子 #438 ---
Hi guys it's a pleasure to read your comments... you are very technical and long ahaed of me (at least in statistics) For what I've understood it's important to clarify what you wish to trade: short or long term baskets. You write "cointegration" should be for long term strategy but I find more interesting and less risking using 1m chart and do scalping, also going opposite what 1h chart say. It should be better if 1m and 1h move accordingly (or better if both are above/belove the mean), but not always this happend. Another concept very important for me is: if I want trade 1 lot basket, I DO NOT TRADE all at once but split it in 2 or 3 entries if the first one goes in the wrong direction. That seems to work fine with me (till now). So it's up to anybody choose what fit better for himself. Trying is always the best thing.

--- 帖子 #439 ---
Bollinger bands are really standard deviation bands. Bollinger popularized them so the name stuck. I prefer calling mine standard deviation bands. The thing about standard deviations is that the assumed statistics at the 1st, 2nd and 3rd deviations only make sense when applied to normal data (stationary). This is why so many have difficulty applying BBands on a price chart. Prices have a significant amount of trend and as a result a reversion to the mean strategy is a hit or miss operation. So the statistics associated with standard deviations are appropriate when applied to a series that is cointegrated if it is stationary. 68-95-99.7 Rule Standard deviation is also a good measure of volatility and in many of the papers the terms are used synonymously. But back to your point about a system that is always in the markets. I've come to the realization that markets are efficiency based. The implication of efficiency driven markets is that there must be first an imbalance before an opportunity is present. The imbalance of a pairs trading system is the divergence of the pairs and the increase of the spread. Likewise, when the pairs basket diverges from its historical cointegrated mean in arb-o-mat, an opportunity is created. Divergence from the mean is the trading opportunity (inefficiency) and the convergence of the spread to the mean is the opportunity to cash in on the prior inefficiency. At the mean in these two cases, the markets are maximally efficient and thus there is no theoretical efficiency based opportunity. So I'm not sure how an efficiency based edge can be derived from an always in strategy that is based on a short-term sliding window. I've researched this quite a bit and the lack of stability in the underlying system seemed to be the Achilles heel. An always in strategy must constantly alter size to stay in synch with short term regressions (many/most of which are spurious). Transaction cost is no small matter (including losses taken from realigning positions). I think the cointegration has to be stable in order to derive a real and lasting advantage from a cointegration based strategy. I'm always the optimist, so I'd love to hear someone who can turn this into a short-term and consistent money maker using short-term sliding windows and constant position readjustment.

--- 帖子 #440 ---
Sorry all I did get not get explanation correct. post#1 updated If I had waited to know everything before starting the thread it wouldn't of happened. Appreciate everyone's patience thumbing through the now 30 pages.

--- 帖子 #441 ---
Great instructions, but its a little confusing at point 6, as you have backslashes instead of forwardslashes in your example: Backslashes cause an error, right?

--- 帖子 #442 ---
I believe for North American English windows it is back slashes, this is how mine is. Various foreign versions of Windows I think allow the slashes going forward.

--- 帖子 #443 ---
I modified ARB-O-mat EA to be a Robot to open trades when spread is greater than x time stddev( use specified input) and close trade when Profit target hit. Have fun.

--- 帖子 #444 ---
Thanks for your efforts on this, at the very least it is a good starting point. I will try it out tonight!!! Once comfortable with operation, I will post to thread 1.

--- 帖子 #445 ---
Thanks!!! But instead of a profit target closure could there be a stddev target closure?

--- 帖子 #446 ---
Just remember you can't backtest it in MetaTrader since it opens trades on multiple pairs. The strategy tester only opens trades for the one pair you select in the tester.

--- 帖子 #447 ---
Correct. I found this set of scripts that can backtest multi-pair hedging with some limitations. I wanted to modify it for the Overlay Hedge EA but was quickly overwhelmed by the amount of coding needed. http://articles.mql4.com/445

--- 帖子 #448 ---
added an input as cstddev for closure in addition to profit target.

--- 帖子 #449 ---
THANKS xlitang!!! YOU ROCK! Let the testing begin . . .

--- 帖子 #450 ---
To paraphrase Robert E. Lee, "It is well that backtesting is so terrible, lest we grow too fond of it."

--- 帖子 #451 ---
LOL wow I didn't know that word even existed during his time.. The good thing is this thread is getting a HUGE amount of traffic. If 1 out of 2 readers tested a slightly different variation on one of the settings, you could conduct forward tested parameter sweeps for dozens of baskets and possibly discover some mini-grails? I'll post an excel spreadsheet to post #1 that people can update and email back to me. In this manner, all forward tests and their settings/results would be all one neat place so new traders can understand it quicker.

--- 帖子 #452 ---
There is a bug in the EA. please refrain from use for now.

--- 帖子 #453 ---
Hello, General question. Was this system properly tested out of sample. Becouse I asked 7bit some time ago this question and he confirmed that it dosent work http://www.forexfactory.com/showthre...tk#post4925940 and it is also his comment Any comments on this Krzysztof

--- 帖子 #454 ---
Hi, Yes this was answered early on. Trend o mat is not the implementation we use. We use arbomat and that is not based on flawed logic. As the name implies, Trendomat was designed to combine pairs in a different manner resulting in sloped price trajectory. The trajectory for a well cointegrated basket should look sideways. For those not familiar with the charts, a cointegrated basket should look like a range bound single pair, preferably reversing at the 2nd deviation, but this is not universal depends on basket.

--- 帖子 #455 ---
The Arb-o-mat graph is easy to do in MT4. It is simply a graph of the basket profit. Then you can set your spread lines (deviations) to anything you want. Compare this screenshot to the one from Arb-o-Mat posted here: http://www.forexfactory.com/showthre...01#post5706801

--- 帖子 #456 ---
ZZ, this is quite interesting, can you post a link to the indi you are using to make this?

--- 帖子 #457 ---
How is this done if you don't mine sharing.

--- 帖子 #458 ---
Hi All and thank you about share please help me about Positions Close time in the system in this strategy!! when we must close we positions in profit or loss thanks

--- 帖子 #459 ---
Attached Image (click to enlarge)

--- 帖子 #460 ---
Please Help Me

--- 帖子 #461 ---
Post 1 updated.

--- 帖子 #462 ---
thank you and can you help me when we must Open position? when blue price below or above middle line? or when blue price is on green Lines? thank you again

--- 帖子 #463 ---
or instead stoploss use a grid with the outside-in trading By this, do you mean for example taking positions at the 2nd deviation, then again at first deviation as price reverts. Then, close all at mean? This has been my thoughts for trading usdcad // nzdusd hedge. Stoploss doesn't seem needed if price within 2 deviations of mean or less?.

--- 帖子 #464 ---
Let's try it again.

--- 帖子 #465 ---
i use you new ea, this ea don't show Something on MT4 chart, but send data to R when run this ea i show some changes on R Graphics chart , especially Numbers on the left can you tell me what is this changes and why we must have this changes on chart? thanks

--- 帖子 #466 ---
True??

--- 帖子 #467 ---
So the same question applies to arbomat than. Was it properly out of sample and Walk Forward tested by somebody. Krzysztof

--- 帖子 #468 ---
Hi to all! I'm face the problem with the EA, when i'm attach the EA to the chart, but nothing to appear in the screen, just a smiley icon that's all. Could somebody help me? Thanks, and very much thanks!

--- 帖子 #469 ---
I hope Mediator doesn't mind me posting these here (they seem to be GNU licensed), but there were two toys from his stevehopwoodforex.com thread . Cointegration Search Engine.mq4 and Cointegration - Profitboard.mq4 . Finding cointegrated pairs is a huge piece of the puzzle. According to his first post , put "the EA Cointegration Search Engine into experts folder. And the Cointegration Profitboard into indicators folder." Kenfen said "Make sure you have the Search Engine EA + Profitboard attached to only one chart." More here . He also has an EA which is found here , but it looks like it is being updated at the moment so I haven't installed it.

--- 帖子 #470 ---
Hi Big guys! Want to ask, was it the same when attached the EA to any of the charts? Because when i attach to EurUsd, the figure is different with when i attach to AudUsd. Thanks.

--- 帖子 #471 ---
I'm back, for the peace of Indrek (just a joke) I think the main task isn't to find the more cointegrated pairs, but monitor the market and find out in real-time what pairs/basket are near to a reversal point. The probable reversal point is assumpted on back data history. More data, more accurancy. So my homework now is: - make a list of cointegrated basket/pairs and check them by EA (doing it without an EA is time and eyes consuming) - take the best trades - if the basket goes negative, try to dynamically adjust the lots size in order to reach gains (or at least not loose) The last point needs more tests

--- 帖子 #472 ---
How did you determine the direction of your trades? They all are positive values in the upper-left corner of Arb-O-Mat. How did you know to go short on some and long on others?

--- 帖子 #473 ---
Diff should be set to "false" as much as I understand. By the way, I think that AUDUSD should not be in same basket with USDCAD as they are too heavily correlated. So far, my choice is a 4 pair basket: EURUSD, GBPUSD, USDCAD, USDJPY. If to run arbomat on all these four pairs and different timeframes then we should have enough entries.

--- 帖子 #474 ---
This basket seems to be stable and predictable (TF 1m) In 1 hour profit/loss between -20 &lt;--&gt; +33.

--- 帖子 #475 ---
yes, i think we must Elimination NZDUSD and USDCHF from basket and dont use The route pairs and only use EURUSD GBPUSD USDCAD and Own another pair USDJPY or ... and use 100% H1 Chart, Small time chart show false Signal, for good Profit H1 chart is Best remember we must Remember equivalent on basket!!! can you tell me what is Task of Diff in ea?? thanks

--- 帖子 #476 ---
Attached Image (click to enlarge) update on my nzdusd // usdcad pair, live account This is the arbomatdemo version R chart

--- 帖子 #477 ---
Yes it was tested, please see the link in post #1 to the Synthetic Hedge thread by 7bit. You can also refer to posts by FXEZ on this thread regarding the validity of the output

--- 帖子 #478 ---
Thks PipTheRipper for your help and I just might take you up on your offer. Thanks Again

--- 帖子 #479 ---
New Signal

--- 帖子 #480 ---
I found a very simple walkthrough of how to run cointegration tests in R. I just used the CSV output data from my Metatrader 4 History Center, for two pairs, and it worked perfectly. It uses the ADF Test to give you a p-value for the "cointegration" of the two pairs (i.e., time series data) you enter. So far I've tested many combinations of pairs, and the cointegration test worked perfectly and was very easy to understand. Here's the link to the walkthrough: http://quanttrader.info/public/testForCoint.html You want the final p-value of the ADF Test to be less than 0.05, which is the customary, albeit arbitrary, cutoff for deeming statistical significance (at least in the social sciences it is p &lt; 0.05 ... the hard sciences might look for p &lt; 0.01). Enjoy! Good Luck!

--- 帖子 #481 ---
Thanks Mwduke, I had posted this a few pages ago. Please everyone trading baskets run it through this test before spending time trading it. Randomly pairing up baskets is a waste of time, as mentioned baskets that are not cointegrated will not be profitable using this method.

--- 帖子 #482 ---
Oops, my bad. Sorry! Didn't mean to take credit where credit was not due...

--- 帖子 #483 ---
No problem, the page count is getting high very quickly and thats probably my fault to an extent. I'll make link index on post #1 for succintness.

--- 帖子 #484 ---
i got this error whenever i compile the abormat 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;40:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;41:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;42:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;43:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;44:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;45:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;46:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;47:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;48:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;49:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;50:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;51:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;52:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;53:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;54:1;'extern' - unexpected external variable storage 2;66;C ROGRA~1SIGTRA~2expertsarbomat.mq4;55:1;'extern' - unexpected external variable storage 2;116;C ROGRA~1SIGTRA~2expertsarbomat.mq4;72:12;'(' - function definition unexpected 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;75:20;'symbol' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;81:4;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;82:8;'AUDUSD' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;83:8;'EURUSD' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;84:8;'GBPUSD' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;85:8;'NZDUSD' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;86:8;'USDCAD' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;87:8;'USDCHF' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;88:8;'USDJPY' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;89:4;'this' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;90:15;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;91:10;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;92:10;'this' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;96:8;'this' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;98:7;'this' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;98:14;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;107:4;'time_last' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;127:16;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;128:11;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;129:10;'prices' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;129:29;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;131:10;'prices' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;134:24;'prices' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;143:19;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;144:30;'base_units' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;144:43;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;145:77;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;147:31;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;148:63;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;149:13;'time_last' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;155:19;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;156:29;'base_units' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;156:42;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;157:77;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;159:31;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;160:63;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;161:13;'time_last' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;167:19;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;168:69;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;170:31;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;171:63;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;172:13;'time_last' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;178:66;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;179:10;'time_last' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;185:65;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;186:67;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;187:13;'time_last' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;206:11;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;212:11;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;226:4;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;226:11;'back_bars' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;227:4;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;227:10;'now_bars' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;230:7;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;234:7;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;237:8;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;237:15;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;238:7;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;241:16;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;242:17;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;242:31;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;243:10;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;243:23;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;244:16;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;244:38;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;248:16;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;248:22;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;249:16;'prices' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;249:24;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;250:16;'regressors' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;250:28;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;250:35;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;251:16;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;251:22;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;252:14;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;253:13;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;254:15;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;258:16;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;259:19;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;260:29;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;261:10;'regressors' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;261:25;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;261:45;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;264:20;'regressors' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;264:32;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;264:38;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;269:15;'this' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;276:8;'use_diff' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;283:8;'allow_intercept' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;292:8;'allow_intercept' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;293:29;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;295:25;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;298:4;'stddev' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;307:16;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;310:16;'this' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;311:10;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;313:10;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;313:21;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;317:24;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;318:10;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;318:20;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;318:37;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;326:10;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;326:20;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;335:4;'ratios' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;335:31;'use_diff' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;335:72;'allow_intercept' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;336:4;'ratios' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;336:13;'ratios' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;337:16;'pairs' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;338:7;'ratios' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;338:16;'ratios' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;338:25;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;339:36;'base_units' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;339:49;'coef' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;340:78;'symb' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;342:12;'ratios' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;352:21;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;355:19;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;359:8;'use_diff' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;360:90;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;362:18;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;364:23;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;364:29;'clr_below' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;364:40;'clr_above' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;366:8;'use_diff' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;368:49;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;370:29;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;373:21;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;373:33;'clr_spreadline' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;373:49;'clr_spreadline' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;374:46;'pred' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;378:42;'back' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;379:16;'ratios' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;383:8;'use_diff' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;387:8;'use_diff' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;395:7;'stddev' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;403:7;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;405:65;'now' - variable not defined 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;418:19;'time_last' - variable not defined both the demo and live 2;75;C ROGRA~1SIGTRA~2expertsarbomat.mq4;425:4;'time_last' - variable not defined

--- 帖子 #485 ---
Post 1 updated. Mediator and Xlitang: you guys cannot be appreciated enough for your work.

--- 帖子 #486 ---
HI xlitang, This EA still has bug. I am trading all the usd pairs. As soon as one of the currency pair value is 0, like AUDUSD is zero this morning, the trades opened and closed in few seconds and reopen trades again. This cycle repeats until I switch off the EA. error message on screen is : AromatEA AUDUSD OP_SELL order send failed with error(0); no error. MT4 build is 419. I hope u can fix this bug and thanks for the effort to make it automated.

--- 帖子 #487 ---
Can you post all the pairs involved?

--- 帖子 #488 ---
Also please check the journal tab may be another error message there..

--- 帖子 #489 ---
Pairs involved are: audusd, eurusd, gbpusd, nzdusd, usdcad, usdchf and usdjpy. From the AromatEA shows only audusd = 0 lot. The rest shows some lot sizes for which I cannot recall the lot sizes because currently using my friend's computer and not at home.

--- 帖子 #490 ---
Make sure you've opened a chart for each of the pairs involved to ensure that the data has been downloaded for that pair. You don't run the EA on each pair, just open a chart to refresh the data. If the EA sees no data for a given pair it'll probably give it a 0 weight in the output.

--- 帖子 #491 ---
Hi all i test this system on some Pairs, but don't find a Good pairs for Hedge can you Introduction some good pairs for hedge??

--- 帖子 #492 ---
Attached Image (click to enlarge) All, here is my update on my live manual trade. nzdusd usdcad have hit the second deviation and I have closed the position as shown. This is arbomat demo on 1 hr data. Will wait to see some consolidation at the 2nd deviation above mean before taking another hedge. No way to know how high the hedge will overshoot the 2nd deviation. However, price action will tell the story when it's ready to revert.

--- 帖子 #493 ---
Please read my last several posts on which pairs i'm trading before just blindly asking. Thanks

--- 帖子 #494 ---
be careful this repaints or resizes, you name it... a few hours after Attached Image (click to enlarge) a few hours later Attached Image (click to enlarge)

--- 帖子 #495 ---
It is not repainting. Think about it. What we have on R chart is the average close price of last 2000 (or whatever number of) candles and the deviations from it. Resizing comes from the fact that with every candle, the average changes. So, also deviation lines change place.

--- 帖子 #496 ---
that's right but everybody should know that if you enter at the second green line and it spikes like this, when it returns back to the line your floating profit/loss will not be at break even, it will be at DD.

--- 帖子 #497 ---
that is absolutely correct your observation. this is what i call phase shift. if you look at the lot coefficients you will see that they change accordingly with the shift. with this information you know which pair cause this shifting and how it influence the basket. this is one flaw of this system. this is where trade- and ordermanagement meets

--- 帖子 #498 ---
Mediator, is it correct to say that: Higher cointegration = Less phase shift?

--- 帖子 #499 ---
Yeah, I believe so.

--- 帖子 #500 ---
This is actually a very good observation. Yes, it is repainting because the sizes (as Mediator pointed out) have changed. Everyone who tries this should study the following video and think about the implications. (make particular note of how much / how little the sizes change during this test period). Holy Grail??? Or Not! Also spending a few minutes reading through the early pages in this thread on the origins of arb-o-mat might be informational: http://www.forexfactory.com/showthre...=262827&amp;page=4 One thing I'll point out to start the discussion rolling is regarding time. The chart you posted was off a 1 minute with 5000 bars. That is about 3.5 days worth of data. Can we realistically assume that the regressed spread of FX markets has a stable mean and the standard deviation over 3.5 days of data? Because, know it or not, that's the assumption being made with this model.

--- 帖子 #501 ---
This is why you've suggested cointegration is not an ultra-short TF type of strategy correct? Since brokers give out less data on lower TF's. Could meshing 1 min TF data from historical sources with the live MT feed help overcome this challenge? Conceivably, this would widen our "assumption horizon"? To everyone, I want to stress that I've focused most of my attention to only pair trading nzdusd // usdcad. If yoyu read 7bit's thread, this was used successfully about 2 years ago. As far as I can tell, the relationship remains strong. You can see I've posted 2 live trades on this hedge using the arbomat demo version. Both profitable. While the hedge calculations change, I've found on this pair (so far) don't appear to need any active balancing as is suggested on larger multi pair baskets. Next live trade will be when price crosses below the 2nd horizontal line above mean: Attached Image (click to enlarge) If anyone sees a flaw in this approach let me know. Otherwise, I suggest others try it on demo and see how it goes. One more edit then I'll shutup: I looked at a commercial cointegration platform just trying to glean some information. With equities, they look at the whole sector the stock is in. Cointegration could be tested on dozens or even hundreds of stocks in the same niche. This gives you more data points. How can we apply this logic to fx? Well usdcad nzdusd are both commodity currencies. So for fx standards, the same sector. What other "sectors" based on fundamental information can we come up with? The possibilities are endless, but I think it would be interesting if people on the thread also looked at it from this angle.

--- 帖子 #502 ---
I'm having good success so far the way I'm trading it. I have been only using 2 pair at a time. But it varies in pair depending on the numbers when at the right dev. level. I have also been using a 1m TF.

--- 帖子 #503 ---
which pairs?

--- 帖子 #504 ---
All of these just 2 at a time depending on the numbers.

--- 帖子 #505 ---
Hello all i am interested in basket trading a long time ago the way that made me develope my own tools and external programs so i can back-test multipairs strategies and this kind of strategies anyway that was a pref of who i am and that's why i dont interact much here ) anyway ur thread catches my interest there is nice effort done here. so i thought that i would pass a nice indicator that u may find it useful u can add any number of pairs and adjust ur sizes its easy see the attached indicator its for "Squalou" i got it from another thread hope u find this helpful take care all

--- 帖子 #506 ---
Hi Samir, how are you backtesting multi-pair strategies?

--- 帖子 #507 ---
HI Dirtybrown like i mentioned before i have coded an external program that can read the csv files from the metatrader i attach an indicator in metatrader taht export all the data i need to csv files like (open - close - high - low - Indictors data ) then i can read this csv data take it to my program and do all the analysis, compairing the pairs and arrange them in groups depending on price action or arrange then on other ways i created. it is a backtesting program to see how those pairs and how they in are interacting and movieing together. i can simulate buy/sell for any single pair or for the whole basket. i made next previous buttons so i can move through candels step by step forword and backword or i can use automode to run through period of time. sorry about my english and sorry if it seems complecated u the one who asked i started this project 2 years ago coz i found that i have many ideas and many strategies that and till now u cant do that with the help of metatrader

--- 帖子 #508 ---
Thks A.Samir for the indicator, it looks really good. Doing some backtesting will post results some time during the first part of next wk.

--- 帖子 #509 ---
Thanks for the info Samir. Did you base it on the example from the MQL site? If you don't mind sharing it to the thread, we may be able to do a lot with it if it can be integrated to arbomat. If not, I understand. Thanks again.

--- 帖子 #510 ---
It is just a basic USD basket backtest indicator. I'm sure there are lots of variations around this site. Here is a version to display the basket profit total only (USDProfitTotal) and a version to display the individual pair profits (USDProfitExt). You enter the lot sizes and the date ranges. Or you can combine the Arbomat EA with the basket indicator into a single indicator (arbomatInd). This indicator will call R to calculate lot sizes for the pairs and Arb date ranges you specify. Then it will display the basket total profit for the Arb lot sizes and the Display date ranges you specify. This makes high-level backtesting easier. Of course, the accuracy depends on many factors...most importantly, if the calculations are all correct! Edit: I just saw the update in Post 1 from 5/30 saying that the thread is getting too chaotic and you want to concentrate on EA development/testing. Thus, I have deleted the indicator files. I will re-attach if there is interest.

--- 帖子 #511 ---
hi again Dirtybrown first do i have to call u Dirtybrown each time i want to talk with u what is ur first name for god sake kidding anyway i cant share it now espicialy its not a user friendly yet i mean its not have nice looking interface i can use it coz i made may be in the near futur i can share but i have a good news that may be work if my idea is right we can easily make an easy tool to test multipairs here in metatrader it will be quick way if iam right and it can be done within few days if u r intersted PM me so we can discuse it in privte messages in order not confuse people here and make this thread longer and in ordr not to go out of the topic and after we get something we can share it with others here anyway i will PM u and lets see if it will work thank u .

--- 帖子 #512 ---
Hey sorry, I didn't mean for that to be the only means of discussion. Just want to make sure enough people are testing it so we can eventually have some automation. Anyone feel free to post indicators.

--- 帖子 #513 ---
zznbrm, Hi, arbomatindi keep crashing my mt4, I changed path in arbomatind and no luck with it.

--- 帖子 #514 ---
Attached Image (click to enlarge) Attached File(s) sok_v6-7_casovy_uni.7+1.mq4 13 KB | 672 downloads

--- 帖子 #515 ---
jforex is one way

--- 帖子 #516 ---
I am afraid to say that it is still not safe to follow this strategy. I get the margin call last week on the USDCAD &amp; NZDUSD. It was on the upper standard deviation and seems to start revert to the mean. It gives my some profit at the beginning but suddenly it goes on the wrong direction until the margin ..!! However, GBPUSD &amp; EURUSD are still giving me profit but I am not sure if this gonna to continue or not. I start testing on basket of every major dollar pair hope it would give me good result.

--- 帖子 #517 ---
That's why I warned not to take any position on usdcad nzdusd until a confirmed move below the second line. With the jobs report Friday USD as usual had heavy vol. and rebalancing, recommend to stay out of the market until things settle down and price moves as i mentioned above. I've found some new pairs using the Granger test on a commercial platform not sure if it will load correctly through arbomat though. Will post those later.

--- 帖子 #518 ---
Really depends how your using it I'm finding great results and trades seem to only take a few minutes to a couple hrs. DD are reasonable haven't had any trade go more than 40 pips in DD.

--- 帖子 #519 ---
Can someone put an alert in the arbomat not the demo version for the deviation number.I would like to be able to set an alert so when it hits a certain number.

--- 帖子 #520 ---
sorry i can seem to get the ab signal as im not a programer i cant get it to respond to finding the address #define RPATH "C rogram FilesRR-2.15.0bini386Rterm.exe --no-save") now ive tryed on 3 DIIFERENT BROKERS . im sure its how i enterde the above as itseems to be in wait mode rpath is in exactly as per above r is loaded and in as above i must be a dummy i tried copy paste and then typing still no go would realy appreciate help

--- 帖子 #521 ---
Make sure you use forward slashes : Inserted Code [b]#define RPATH "C:[/b]/[b]Program Files[/b]/[b]R/R-2.15.0b[/b]/[b]ini[/b]/[b]386[/b]/[b]Rterm.exe --no-save"[/b]

--- 帖子 #522 ---
I appreciate your help

--- 帖子 #523 ---
Attached Image (click to enlarge) Price action moderating after Friday's news. I'm taking note of each 500 price points as a cyclical measure

--- 帖子 #524 ---
Attached Image (click to enlarge) Watching closely here for entry. The hedge ratios would reverse both portions. So an entry when price falls below the second horizontal blue line according to these ratios would be short both: .40 nzdusd to each 100 usdcad

--- 帖子 #525 ---
Unless you entered the hedge in the wrong directions (even then) you are obviously overleveraged. This isn't a get rich method with no stop loss and 1,000% profit/mo. Better off with the lottery. This is a sound method but you just need some patience. Yes, the levels can change. But any fx trader needs to be aware of the news, whats going on and what is going to happen. All plays a part. For these pairs, there is plenty of time to get in on the hourly so don't rush it. Simply wait for price action to confirm under or above the second deviation for at least say an hour. Remember anything you may know about technical analysis, watch how the price action moves within a channel. These all give clues this isn't just about deviation levels, for me at least.

--- 帖子 #526 ---
I have entered the trade, profitable already.

--- 帖子 #527 ---
Attached Image (click to enlarge) Everything ended by turning the target and begin again at a new trade.

--- 帖子 #528 ---
this is how we do it! Attached Image (click to enlarge)

--- 帖子 #529 ---
Attached Image (click to enlarge)

--- 帖子 #530 ---
Hi Donny care to explain your approach? I just see the screenshots, looks like you are doing well but not sure where you are taking positions or any of your logic. Please let us know, thanks. Feel free to post closed trades too thanks

--- 帖子 #531 ---
Attached Image (click to enlarge) Everything on the basis arbomat I just revamped SOK YOU NOW Indicator which I made ​​available and to which everyone can install steam and lot sizes according arbomat with the fact that you can write your own scale and depending on business, I'm still in the windows indicator FIBO reached.

--- 帖子 #532 ---
Otherwise, any trades are marked with a red line that is marked on the indicator of where I turned to the reverse position.

--- 帖子 #533 ---
Interesting! Thanks a lot Donny I will check it out thanks for sharing. I'll make a link from post #1 to your information.

--- 帖子 #534 ---
This might have been covered but how did you set ur levels fixed. I can't seem to figure it out and like how smooth your chart is.

--- 帖子 #535 ---
I use the demo version, also make sure to hit the home button on both usdcad and nzdusd charts until no more data downloads. This will change deviation levels if not enough data is used.

--- 帖子 #536 ---
Thanks got it

--- 帖子 #537 ---
Just closed position.

--- 帖子 #538 ---
How long do you think the cointegration on this pair will last? I tried to run the cointegration search engine script but I kept getting a divide by zero error no matter what I tried.

--- 帖子 #539 ---
I'll post a link to the post on the synth hedge thread from 2010 from those trading this exact hedge.. so maybe this gives you an idea.. Not sure yet on the cointegration engine, have not had the time to play with it yet. It was not working on the broker I tried it on. While this hedge does not qualify for granger cointegration, it passes ADF. And yes, I've read Granger is better for pairs trading. But the relationship between nzdusd usdcad cannot be denied, so I will keep trading it.. Also, a friend of mine I keep in contact with on skype has been trading this way off and on for the last 18 months, will be speaking with him this weekend and may get more clues then

--- 帖子 #540 ---
Cool thanks. I just thought that it might degrade over time (ie right before I place a live trade). I found some software which can search for cointegrated forex pairs but it's not cheap: http://arb-maker.com/archives/881

--- 帖子 #541 ---
Is this trading EA working for anyone? When I look at the code, the trigger to open trades is: Inserted Code extern int nstddev=2;// Open Trades But "nstddev" is only mentioned once in the code and it's commented out. Am I missing something? - Pete

--- 帖子 #542 ---
Attached Image (click to enlarge) Here's my closed trade, real money. Like magic, price has starting to bounce from the first deviation at this time. Again also note the hedge ratio BARELY changed from nzdusd, exactly same for usdcad. Therefore, this is a very passive strategy. I can set my trades, go to work and live my life, just checking in at key times. This leaves more time for important stuff like the new really hot chick i started dating so less posting but I'm still here.

--- 帖子 #543 ---
Yes I'm trying it but having some issues with live data. Most of the really good stable hedges look to be on 1 day TF. from what i can tell.

--- 帖子 #544 ---
no trades for me

--- 帖子 #545 ---
Dear all, I am trying to understand the explaination of size from different post in this thread but still I have a hard time. Let say GBPCHF USDCHF in 5 minutes his 90% corrolated. How would you do to calculate the exact hedge for those two pair? And of course if we have to stay in for few hours do you correct the size to stay as close as possible hedged? Thanks a lot for all the info in this thread

--- 帖子 #546 ---
Nice one Dirtybrown!

--- 帖子 #548 ---
This system is based on cointegration, not correlation. Please refer to 7bit's original thread for further information.

--- 帖子 #549 ---
right click in your market watch window and select "show all", then let it populate for a while before adding the ea. if you still get a zero divide error, take the ea off, then open every single pair on a 5 minute chart and let all the charts update for an hour or so, then add the ea. sure would be nice if someone would volunteer to take the ea to the next level...

--- 帖子 #550 ---
It's all you bossman! Feel free to take over the thread with EA testing, you or anyone else for that matter. For now I've described my preferred method of just pair trading. Please do not let me trading slow down the thread - Any other baskets or approaches are welcomed.

--- 帖子 #551 ---
Thanks - it's now "working" - firing off trades left right and center? I thought from reading the stevehopwood thread that it would give me a list of cointegrated pairs?

--- 帖子 #552 ---
Originally Posted by 7bit http://www.forexfactory.com/images/buttons/viewpost.gif By setting diff=false there is no trend by definition. I am always long below 0 and always short above 0. USDCAD vs. NZDUSD seems to have very stable coefficients, its one of the nicest two-pair hedges in my opinion. I have started trading it last week at level 2 and now its at level 4 so at the moment I am in drawdown. I made some quick&amp;dirty visual backtests (after observing how stable the coefficients are even during longer periods) and this seems to be quite profitable Mar. 4, 2011 Squalou Very nice "simple" Basket indeed! It has been in this range since july 2007, that's the longest ranging basket i've seen so far. http://www.forexfactory.com/showthre...57#post4448557 Edit: You'll notice 7bit doesn't use the demo version of course. This is where my method differs from his and some of the others from the Synth. thread. However all you need to do is look at my last few posts to see how stable it trades against 2 deviations when you use all available broker data.

--- 帖子 #553 ---
Thanks, let's hope for the best. Fortunately, unlike women, we can sometimes read the market's mind. A sustained manual or EA assisted strategy all depends on how it integrated to your everyday lifestyle. There are many profitable scalping threads on this site for example. But for those that don't have the time resources or have other commitments like a job, forcing short term stategies can lead to failure. Keeping a balance with friends and loved ones I think makes a huge difference. Too much computer time can make anyone depressed, regardless if their statement is going up or down.

--- 帖子 #554 ---
Attached Image (click to enlarge) Attached Image (click to enlarge) Attached Image (click to enlarge) Graphics from Forexticket Very interesting to see the difference in correlation between timeframe. This explains why 1 hr works so well, its one of the least correlated TF's. This is very important to know. Also notice the volitility spikes are nearly identical and occur at the same times GMT. This shows market awareness of the relationship, and I will now compare any key level in arbomat to the highest volatility times. I bet you could even more confidently trade off 2nd deviation/horizontal when you see movements during these times. Best Day of Week Entry: Tuesday(biggest volatility day of week)

--- 帖子 #555 ---
Attached Image (click to enlarge)

--- 帖子 #556 ---
Just realised that the search engine is the first version of the trading EA. Please ignore.

--- 帖子 #557 ---
Thanks for this - very illuminating. True what you say about trading/lifestyle balance. How do you deal with the fact that the hedge ratios change as the EA receives more bars? Do your trades close within your 60 minute time frame? Do you adjust open positions in line with the changing hedge ratios? Or is there a way to fix the lot sizes so the generated standard deviations are correct for your original hedge ratio? (I might be missing something conceptually here.)

--- 帖子 #558 ---
You'll notice the "coefficients" change very little on usdcad // nzdusd, this is a sign of coint. from what i understand. Therefore, on this pair no need to rebalance. I noticed on an entry below the mean, as price rose above the mean then to 2nd deviation, the ratios did change slightly more but the position was still very profitable so I saw no need to try and change anything. This is why i stopped trading most dollar pairs, the ratios change and im not actually sure how to deal with this manually. There is a commercial product I won't mention but has been mention that is supposed to support automatic ratio balancing. I believe there is more you can read regarding larger basket rebalancing on the synth/Old Dog thread, like I mentioned this no longer is my aim in spite of the thread title.

--- 帖子 #559 ---
Hi I just entered this trade because PAIRS are (now) at a good cointegrated level. Few minutes and +10 pips. Let see.

--- 帖子 #560 ---
Thanks Sym. Try running them in this script its easy to run http://quanttrader.info/public/testForCoint.html I posted a way to do this using yahoo data also. Best to: a) hit home on mt chart as much as possible for both pairs b) ctrl-s to save as csv format Instructions on page tell you how to read off spreadsheet. This is a simple ADF test not the best as suggested by FXEZ, but it gives us an idea.

--- 帖子 #561 ---
Added link to Donny's posts on post #1

--- 帖子 #562 ---
Donny, here is my chart. Attached Image (click to enlarge) Can you please let us know where you originally found the indicator? thanks

--- 帖子 #563 ---
This is my own indicators. What if you needed to know about it? With regard to the setting so I hope it pair1 -7 not have to explain. Reverse 1-7 is set to 1 = BUY and -1= SELL Lot1-8 that is setting the size of the Lots This length is the number of candles to be displayed Multiple the number depending on whether it is a standard or micro account with IBFX. If you want to do every couple portrayed so just need to add functionality to the display of a pair. Undo edits

--- 帖子 #564 ---
Ok, thanks for the info. And what is "Nasobek"?

--- 帖子 #565 ---
Multiple = Nasobek nasobek the number depending on whether it is a standard or micro account with IBFX. removes one zero if you use a standard size lot that is 100 000 are using in case of micro account with IBFX there is 1 lot only 10 000.

--- 帖子 #566 ---
Ah ok, good. Donny, of course if you have time next week for the benefit of the thread it may be helpful for you to post all of your settings and your strategy. This would help to maximize the number of users. I think you have created something very profitable here, thanks for helping us to understand it.

--- 帖子 #567 ---
I have a problem in the code I found from arbomat would seek and transformed into the R value for the tick pairs of causing it does not work on other than the USD pairs but also it shows some errors, more vapor system requires information about the value of a tick. For example, in EURUSD 100 pips profit and EURGBP us 80 Pips loss in overall profit is 20 pips then but I have lost financially -240 USD 100 X 10 = +1000 (EURUSD) 80 X15.5 = -1240 (EURGBP). Attached Image (click to enlarge)

--- 帖子 #568 ---
Attached Image (click to enlarge) Here is an example where the indicator are given the same size and direction arbomat but as the curve is almost mirrored, so that the size of lots do not meet the true price of each pair.

--- 帖子 #569 ---
This is correct. I believe somewhere in the synth. code this is acknowledged by 7bit. Also why I've stayed only on USD. Can you post the R code you think is the problem? Someone may be able to see the problem, I access several programming forums.

--- 帖子 #570 ---
I do not think is a bug in R code, but the data it uses, he uses the lot size calculations only the actual price of par, but the correct price should multiply the pip value of the corresponding pairs, and this should solve everything.

--- 帖子 #571 ---
Ok I think you are referring to this code then, I notice there is no similar thing done for non-usd pairs.

--- 帖子 #572 ---
Yes this should be done it is necessary coef divide the corresponding pip value pairs

--- 帖子 #573 ---
Forgive my ignorance, but what exactly do you mean by pip value? Can you please give an example? Thanks.

--- 帖子 #574 ---
One pip of EURUSD is 10 USD, one pip of USDJPY is 10 Yen, one pip of USDCHF is 10 CHF. This is is not taken into account with present tools. And it may be the weak point of Arbomat calculation.

--- 帖子 #575 ---
EURUSD 1pips = 10 USD USDJPY 1 pips = 12,6 USD EURGBP 1 pips = 15,5 USD USDCHF 1 pips = 10.34 USD USDCAD 1 pips = 9.72USD USDNZD 1 pips = 13,50 USD USDAUD 1 pips = 10,08 USD

--- 帖子 #576 ---
Got it, thanks guys

--- 帖子 #577 ---
The MT4 is that this function MarketInfo (competent vapor,MODE_TICKVALUE) and nozzle types with corresponding alterations in pairs every 100 pip for example for EURGBP pair depends on the value price pip GBPUSD pair

--- 帖子 #578 ---
hmm ok my mql is limited. I thought something like this is what you meant?

--- 帖子 #579 ---
You can not put there with a fixed value of the nozzle types for example you need to use a = MarketInfo (USDJPY, MODE_TICKVALUE) if (StringSubstr (sym [i]) == "USDJPY") { coef [i] = coef [i] * a;

--- 帖子 #580 ---
Yes but if I follow the precedent back only about 3 months do not need a precise calculation of backward but I need how to behave curve at that point by the given moment of the calculation.

--- 帖子 #581 ---
LOL here is my attempt, WARNING: It crashes my metatrader so don't load it. Open in the code editor, obviously I didn't do something right. Not seeing any error message.

--- 帖子 #582 ---
Attached Image (click to enlarge) With the weekend gaps now filled, I have re-established this hedge (both short) in the ratio shown. Notice the lower highs, lower lows........ Sound faimiliar?

--- 帖子 #583 ---
I did the same

--- 帖子 #584 ---
Great, let's all cash in! I don't expect much DD at all at these levels

--- 帖子 #585 ---
Hi DirtyBrown! Great job with the R dll... I'm a biostatistician (Bayesian stats and modeling mostly)... and I was looking forward to seeing a bridge MT4-R... Cheers

--- 帖子 #586 ---
Excellent! We need more people like you then. Have you done anything with Granger cointegration?

--- 帖子 #587 ---
Its been working great for me. I have been using the NZD/CAD as well.This trade is a demo trade. So far all live trade have been very profitable with little DD not even 1% so far, so for me now its manageable for sure. http://my.jetscreenshot.com/demo/20120611-yo1f-21kb

--- 帖子 #588 ---
You've opened two equal trades of 0.5 lots - you should have followed the hedge ratios.

--- 帖子 #589 ---
I've attached my attempt to make xlitang's ArbomatEA function. I've tried to make it function how I think the strategy should work - this may not be the optimal way to trade the strategy. Also, I'm not 100% sure it works properly - please correct it if I've made a mistake. 1. The hedge ratios will be sold if the standard deviation reaches between "openposstart" and "openposend" (positive values) and there are no open trades. 2. The hedge ratios will be bought if the standard deviation reaches between "opennegstart" and "opennegend" (both negative values) and there are no open trades. 3. The trades will close if the standard deviation reaches between "closeposstd" and "closenegstd" (first is a positive value, second is a negative value, I base mine around zero mean) 4. The stoploss is that the trades will close if the standard deviation rises above "slposstd" or falls below "slnegstd" The attached picture should explain how my triggers work. There is no rebalancing when the hedge ratios change. My next thought is that I'll set up a trigger so that when the stoploss is hit, no trading takes place until the standard deviation hits zero. Also I've hardcoded the other variables to my testing preferences - double check them as they probably won't be right for you. Pete EDIT: Bug in code - new version attached

--- 帖子 #590 ---
I confess I don't have a clue about Granger co-integration A bit of homework will be needed :nerd: You guys have done a amazing work already... Digesting ~600 posts + the code is going to take me a while

--- 帖子 #591 ---
Closed in gain NZDUSD/USDCAD (yesterday evening) and this morning NZDUSD/USDCHF I like scalping DB: i would put this on init() section int EUpipValue = MarketInfo("EURUSD", MODE_TICKVALUE); int UJpipValue = MarketInfo("USDJPY", MODE_TICKVALUE); int EGpipValue = MarketInfo("EURGBP", MODE_TICKVALUE); int UCpipValue = MarketInfo("USDCHF", MODE_TICKVALUE); int NUpipValue = MarketInfo("NZDUSD", MODE_TICKVALUE); int AUpipValue = MarketInfo("AUDUSD", MODE_TICKVALUE); and why GU is missing? edit: it works, but you need to declare them before as "double" not "int"

--- 帖子 #592 ---
The way I am trading it this was the ratio I needed thats why my numbers are the same.This is my trade from last night. http://my.jetscreenshot.com/demo/20120612-dyps-20kb

--- 帖子 #593 ---
You do not need steam XXXUSD there there is no nozzle types pip value is always 10USD to pip a lot there but you need all the other couples you want to use, of course if you have an account denominated in USD, EUR and if there do not need steam XXXEUR ......

--- 帖子 #594 ---
Hey Pete, thanks a lot! What TF do are you using?

--- 帖子 #595 ---
How are you determining the ratio needed?

--- 帖子 #596 ---
I haven't actually started on any time frames - I finished coding before I left for work this morning and it's currently on the one minute timeframe just to test whether the trades and stoplosses are being triggered correctly. I'll demo a few different time frames once I'm confident that the EA works - I'm sure I've made a few mistakes. The next thing I want to do is butcher Mediator's search engine so it no longer trades but instead prints cointegration comparison results.

--- 帖子 #597 ---
Ok great, I'll start testing on a few TF's and will report back how it does.

--- 帖子 #598 ---
I have found the best results when the deviation level is where I want it. I try to find the pair with the 2 closest numbers to each other and thats the 2 I trade so far its working. It might not be right and I asked how others was using it and no one could say. So I tried different ways and the best results so far has been this way. I am using it on a 1min chart and have tried it on a H1. H1 is pretty slow but it works as well.

--- 帖子 #599 ---
Hi All i test this system on 5 baskets you can for see my result go on http://www.myfxbook.com/members/nase...hedge-r/322867 good luck

--- 帖子 #600 ---
If you don't mind, could you please post your .set file for the EA? I'm thinking of trading it on th same pairs i've been using, usdcad nzdusd. What would be your recommendation based on this chart for the benefit of the thread? Thanks a million. Attached Image (click to enlarge)

--- 帖子 #601 ---
My EA still needs more testing - it doesn't close trades properly. A new version is attached , I'll let you know when I'm confident that it works.

--- 帖子 #602 ---
I really don't know what the values should be... I'd probably just eyeball the chart and enter my trigger and stoploss on the basis of where the standard deviation has gone in the past. I don't have a set file because I'm not confident that the EA works properly... I uploaded a picture to my original post which explains the logic a bit better. You should be able to see what values go where: http://www.forexfactory.com/attachme...1&amp;d=1339528978

--- 帖子 #603 ---
Yes this makes it very clear thanks a lot. Now anyone on the thread can also try to see if they see a problem in the code logic.

--- 帖子 #604 ---
Well the way I understand it it can't just sell above buy below thought it was dependant on if the numbers are + or - to what the direction of the trade should be ?

--- 帖子 #605 ---
When I say buy or sell I mean the EA buys or sells the hedge ratios shown. So in the picture it would sell 1.00 NZDUSD and sell -0.77 USDCAD (which means buy 0.77 USDCAD)

--- 帖子 #606 ---
K just makin sure thanks

--- 帖子 #607 ---
Just found this thread, it's surprising because I never thought that anyone would manage to develop anything this useful for retail trading... Trying out the ea. Edit: I also forgot to ask if anyone tried doing the cointegration search that one of you mentioned?

--- 帖子 #608 ---
A whole new world of chart analysis unfolds when you look at these R charts. Metatrader's role can be properly minimized to that of an order entry api. You can have R and a database control when to trigger trades and send the results back to metatrader using python. Here's a cigar to former meat traders!

--- 帖子 #609 ---
A few things, What has everyone set for the diff parameter? Also, I have this all running on the amd64 version of R, it seems to work fine (someone mentioned it wouldn't). And the latest version of the ea isn't adjusting the sizes correctly, it attempts to open full lots on a small account. Has anyone developed tools for multicointegration testing? Are there any plans to change the code to work with crosses? Statistics isn't my strong suite so I'm hoping you guys figure all of this stuff out.

--- 帖子 #610 ---
I use the arbomat_demo, with defaults. Others will need to say what they use for the final release arbomat version. I believe you are running the basket EA. You should first run arbomat manually to get a feel for how it works. The "Basket" version is still under testing. I tried to get a non usd cross working based on pip values, couldn't get it to work. Maybe someone can figure it out or use my code as a requirement. 7bit mentioned early that the hedge rations "didn't work" for non usd pairs. Maybe a flaw in the code, not sure. Search the thread for fxez's posts, he showed some tests in R. I think I have some matlab code that can calculate hedge ratios I will try to find it.

--- 帖子 #611 ---
130% agreed ! And I can tell as a reguler user that R has nearly no limit: you can do model fitting, simulations, forecasting (ie: just google "Automatic Time Series Forecasting: The forecast Package for R" for instance). Output of the best of statistical modeling technics now can go directly to your MT4 to place orders smartly... And if it s not enough yet (which I doubt), you can write your own R programs I don't get it... I mean, the mt4R.mqh already allow getting results from R... So what Python is here for ?

--- 帖子 #612 ---
Thanks for the suggestions will have a look. It's true, arbomat just scratches the surface of what is possible. Shortly I will be posting some test results based on FXEZ's sample code. We should brainstorm some new R functions, will get back to you once I have the examples done. And I think you are right about python, I'm half asleep its 2 am here

--- 帖子 #613 ---
I thought the python code that 7bit wrote was magically retrieving data for mt4? Something like that? Haha I probably shouldn't be messing with all of this stuff.

--- 帖子 #614 ---
See attached.

--- 帖子 #615 ---
Hi All Today profit is : +2.41% Today pips : 127 Pips http://www.myfxbook.com/members/nase...hedge-r/322867

--- 帖子 #616 ---
Nice work. It will also be helpful if you can take a screenshot when you enter or exit the basket so we can learn from your experience. Thanks for your contribution Naser, look forward to hear more.

--- 帖子 #617 ---
under his open trades, it shows a 133 pip loss. Also, I opened a 1H NZDUSD / USDCAD hedge yesterday and left it over night. It hasn't budged unfortunately. It's too bad we can't have a quantitative strategy that actually outperforms a typical working ta system. I assume they exist...

--- 帖子 #618 ---
hi All Up to this time of today profit is : 1.92% Today Pips : 112.70 Pips i think this System is HolyGrail, but before your must Find Best basket and TP more information's Please see http://www.myfxbook.com/members/nase...hedge-r/322867 Update : Today profit up to : +2.64% and 160 pips

--- 帖子 #619 ---
Oh no. Now you've jinxed it.

--- 帖子 #620 ---
As far as I'm concerned, my pair trades posted in usdcad nzdusd is stable and profitable. I'm using it with real money. It's quite easy to trade and analyze the price pattern. There is some shifting, similar to "repainting" in metatrader. The key is to find cointegrated pairs or baskets. Though typically the augmented dickey fuller tests are used on several dozen individual pairs, usdcad nzdusd pass this test. They do not qualify under Granger cointegration however -&gt; http://en.wikipedia.org/wiki/Cointegration In my experience on this pair (usdcad, nzdusd), ADF is sufficient to prove cointegration. Additionally, the hedge ratios barely budge using 1 hr data on the Arbomat demo version with default settings. This is another confirmation of cointegration, specifically covariance. Higher covariance = less coefficient shifting = less or no need to reblanace your hedge proportions.

--- 帖子 #621 ---
Same on the 1M

--- 帖子 #622 ---
Spread that good word! Attached Image

--- 帖子 #623 ---
Attached Image (click to enlarge) I threw your EA on the chart with defaults on usdcad nzdusd, not bad!! Are these the kinds of results you are getting on 1 min??

--- 帖子 #624 ---
Hi Ditrybrown Just want to ask NZDUSD v USDCAD are inversely correlated rite? So if we try on EURUSD v USDCHF (also inversely correlated) would it produce similar results to the pair you trading? (NZDUSD v USDCAD) Another question let say we enter below mean, so we Buy NZDUSD and Sell USDCAD, but somehow it did not go up to mean but instead go further below the mean, so we will have drawdowns - in this case any idea how we manage the trade to turn around it into profit?

--- 帖子 #625 ---
ah i think i understand + ratio - ratio if below mean, for positive correlated pair we would buy + ratio and sell - ratio (eg EURUSD v GBPUSD) if below mean, for negative correlated pair we would buy + ratio and buy - ratio as well (eg EURUSD v USDCHF) am i rite?

--- 帖子 #626 ---
Actually, there is "no correlation" not, inverse correlation..since that is actually correlation. eurusd and usdchf are inversely correlated also, so would not be ideal for pairs/baskets using this method. During the times I've been looking at the 1 hr R charts generated from Feb. to present have led me to profitable hedges on usdcad nzdusd. Just note that for these pairs, the 1 hr correlation is dramatically lower than for lower and higher TF. You can refer to my previous post for a chart on this. Yes, the levels can change. This is why you cannot just randomly form baskets and always expect to be profitable, such as if the hedge ratio changes dramatically. This is why I look for low delta coefficient baskets, in the hopes they won't need to be rebalanced. My suggestion would simply be to establish a max. stop loss for the basket. Again, if you find the right pairs don't expect that to happen much.

--- 帖子 #627 ---
Not quite that good but close. I've had one loss when the spread returned to zero after 18 hours - could be a bug. My results are here: http://www.myfxbook.com/members/them...ch-test/327752 Ignore the 60% drawdown and focus on the last 8 trades. When I started the demo there was a bug in my code and it would open a basket and close it a few seconds later for a loss - hence the 60% loss. The last 8 trades are with the current posted code - I think the code is right but that 18 hour trade concerns me. To tell you the truth I might have messed up on that one as well.

--- 帖子 #628 ---
Hi there, can somebody tell me - whether the calculated lot basket is profitable when started on a + or - stdev level and spread curve is mean reverting to 0 ? e.g. xlitang's EA is setting: if pred curve &gt; 0 &amp;&amp; coef[i] &lt;0 then OP_BUY or &amp;&amp; coef[i] &gt; 0 then OP_SELL if pred curve &lt; 0 &amp;&amp; coef[i] &lt;0 then OP_SELL or &amp;&amp; coef[i] &gt; 0 then OP_BUY Is ths correct ? - why the original coef should be multiplied with their related pair quotes to obtain lots ? In my opinion the original coef multiplied with a common factor is correct to obtain the lots. Am I wrong ?

--- 帖子 #629 ---
Most times but not always. Sorry I don't know.

--- 帖子 #630 ---
I'm going to start 5 new demos this week. Pairs are NZDUSD (EA attached) and USDCAD, and time frames will be M1, M5, H1, H4 and D1. The triggers and stoplosses are listed below. I've just taken a rough guess at what I think good values might be - there's nothing scientific in my methodolgy. I've updated my EA slightly (attached). The only difference is that it hopefully logs the current standard deviation to a file once per minute. Yes, you can get that from the R chart but the M1 timeframe only contains a couple of rolling days. Demos M1 - Trigger 0.005 SL 0.007 M5 - Trigger 0.015 SL 0.020 H1 - Trigger 0.06 SL 0.08 H4 - Trigger 0.07 SL 0.10 D1 - Trigger 0.175 SL 0.200 I've been thinking about the trigger logic and ideally I think I'd want to enter after the standard deviation reaches a peak, then falls. Example: - once standard deviation rises above a level, trigger entry = max standard deviation minus a buffer - stoploss would be max standard deviation - stoploss would trail - if stoploss is hit, no trading until standard deviation returns to zero There's still a chance of being whipsawed and having the stoploss hit, but I think this has a greater profit potential. Thoughts?

--- 帖子 #631 ---
If that second level that is on arbomat represents the maximum standard deviation (which it won't since it fits the extremes) then isn't it a bad idea to close a position here? surely it should be somewhere in between the two? I think that when the std deviation levels are recalculated the ratios between the new and the old should be taken into account.

--- 帖子 #632 ---
It's hard to judge where a basket should be closed which is why I think this system is more suited to manual trading rather than an EA.

--- 帖子 #633 ---
Hello, TheMaxx: I have attached you EA both on NZDUSD and USDCAD 5m chart with your default setting from market open this mornning. Nothing happen and no error message. Is that correct? Thanks!

--- 帖子 #634 ---
Attach to one chart, and make sure that all variables are correct for your broker. Also - I didn't write the EA - I only updated it slightly. I'm not sure that it works correctly.

--- 帖子 #635 ---
Hi, I am interested in what is going on here, but need help in setting it up. Can somone help? Re: 1st page instructions 1. install R-2.15.0-win - DONE OK Download/install R -&gt; http://www.r-project.org/ then, 2. copy common_functions.mqh &amp; mt4R.mqh into mt4/experts/include - Copied all files from R include and mt4R.mqh into Broker include folder. Is this correct? 3. copy mt4R.dll into mt4/experts/libraries - Where can I find mt4R.dll? 4. copy arbomat.mq4 into mt4/experts - DONE OK 5. open arbomat.mq4 with metaeditor, - DONE OK 6. edit #define RPATH "C:/Programme/R/R-2.11.1/bin/Rterm.exe --no-save" to appropriate directory in your pc (example of mine ... #define RPATH "C rogram FilesRR-2.15.0bini386Rterm.exe --no-save") - DONE OK, but with forward slashes 7. restart your mt4 - DONE OK 8. attach arbomat.mq4 to chart .... - Can't attach? (thanks to Begamer for writing down instructions) Thanks!

--- 帖子 #636 ---
Hello, TheMax: Thank you for your answer. You have written: M1 - Trigger 0.005 SL 0.007 M5 - Trigger 0.015 SL 0.020 H1 - Trigger 0.06 SL 0.08 H4 - Trigger 0.07 SL 0.10 D1 - Trigger 0.175 SL 0.200 The Trigger are: extern double openposstart= 0.0015;// Open Trades positive range start extern double openposend= 0.00151;// Open Trades positive range end extern double opennegstart= -0.0015;// Open Trades negative range start extern double opennegend= -0.00151;// Open Trades negative range end The SL: extern double slposstd= 0.002;// stop loss positive - close postive Trades above this level extern double slnegstd= -0.002; // stop loss negative - close negative Trades above this level Right? The only setting regarding broker is: extern bool CriminalIsECN=true; Am I correct?

--- 帖子 #637 ---
download, common_functions.mqh, mt4R.mqh and mt4R.dll from https://sites.google.com/site/prof7b...on-integration which is listed in post#1.

--- 帖子 #638 ---
Yes. I suggest choosing figures based on what you feel comfortable looking at the R chart, but bear in mind that the R chart is based on limited data (only a few days for the M1 timeframe) and the standard deviation may go much, much higher than the R chart would suggest. Correct. But please bear in mind that I'm not a programmer, and I just hacked away at the code to make it work how I think the strategy would work. Problems I see with my code: 1) if the standard deviation jumps (I don't know if it could???) past my take profit triggers the basket will not close, potentially leading to losses 2) the trade trigger and stoploss trigger might hit multiple times without hitting take profit, blowing out your account

--- 帖子 #639 ---
Your ArbomatEA_maxx_v0.2 does not open any order while ArbomatEA take orders immediately when EA start.

--- 帖子 #640 ---
I don't know - it's working fine for me. You're welcome to modify the code and repost here.

--- 帖子 #641 ---
hi All Today Profit is : 1.48% Today Pips : 12.30 Pips more information's Please see http://www.myfxbook.com/members/nase...hedge-r/322867

--- 帖子 #642 ---
Looks like someone is selling an EA which does something similar. Discussion is here . Interesting thing is if you look at their myfxbook pages here and here , their trades are open at least 6 days.

--- 帖子 #643 ---
u using default setting? (all the 7 pairs)

--- 帖子 #644 ---
Thanks Sunnybeach, got it working in the end.

--- 帖子 #645 ---
Hi guys, I guess I could clarify some confusion: the curve we are seeing is a spread curve of a basket correlation; the standard deviation is showing widening spread which will mean revert to zero when co-integrated (equal to co-integrated pair trading). arbomat is a kind of dynamic co-integrated application because of steady coef adaption to achieve correlation. Therefore a true co-integration is not really nessecary; it will particularly reduce the amount of coef adaptions. The amount of coef adaptions should be controlled, because a high amount of coef adaptions, resp. lot adaptions, will generate additional cost. Stdev is calculated with 2000-3000 bars back so it won't jump when actual spread tick goes beyond 2 stdev. The best trading approach is basket grid trading with stdev levels as grid levels. Basket entries are on certain spread stdev levels and exit is when spread=0 or on lower stdev levels. Stoploss is not really necessary because of steady adaption of the coef, resp lots, and therefore a more or less guaranteed mean reversion. An additional protection can be achieved with a hedge order for opened orders when spread line exceeds 2.5 stdev levels. In addition lots of open orders should be adapted when coef, resp. lot change occurs. Lots should be derived from coef by normalizing them with the respective tick values. The ticks/pips are taken to calculate the coef. Nevertheless ticks of different currency pairs often have different tick values. Therefore lot calc. requires a tick value nomalization, best done with: coefn[i] = coef[i] / MarketInfo(symb[i], MODE_TICKVALUE) The approach of 7bit is particularly taken to enable back testing and is an adaption of the correct calc. above. Lots are now multiples of coefn[i]. adf co-integration test must be still done with the original coef[i].

--- 帖子 #646 ---
Hi No my Friend, i have 5 basket and 5 set Today Profit : +6.14% Today pip : 379.70 Pips See More Informations : http://www.myfxbook.com/members/nase...hedge-r/322867

--- 帖子 #647 ---
I think all of what you are saying is correct. The cointegration search engine here trades the way you outline - grid, no stop loss, non-USD pairs etc. However according to the stevehopwoodforex.com thread where I got it from it's not profitable. If you could look at it that'd be great - it is beyond my skill level.

--- 帖子 #648 ---
Hi TheMaxx, Steve is reporting about his pair trading implementation. Profit movements could be larger with basket trading. Profit influencing issues: - too many incremental coef/lot adaptions, that eliminate profits with additional spreads ,commissions, etc. (my experience in 1min chart: this should be no issue if adf test value &lt;0.5) - too fast spikes of spread basket not leaving time for an adequate basket entry and exit - too tight grid levels for basket entry and exit (could be overcome with larger grid distances or a takeprofit routine measuring the actual basket profit, e.g. for (j=1; j=gridlevels;j++){ for (i=0; i&lt;pairs; i++){ OrderSelect(BasketTickets[j] [i],SELECT_BY_TICKET); if (OrderMagicNumber()==magic) { BasketProfit[j]=BasketProfit[j]+OrderProfit()+OrderCommission() +OrderSwap();} } } - extrem spreads could create margin calls when no hedge protection (could be overcome using only small lot sizes) - when hedgeprotection is used whipsaw effects opening and closing the hedge could create larger losses in my opinion there is a good chance that a basket grid EA is working, but right now I have no time for implementation.

--- 帖子 #649 ---
The main issue when dealing with short lookback windows is stability. A lookback period of 2-3000 bars on a 1 minute chart is short (2 days) while a 2-3000 lookback period on a 60 minute is long (125 days). The stability of the coefficients in my view is a related though separate issue from the actual cointegration of the series. You may run the ADF and have a low value but this may not be sufficient to create a consistently stable set of coefficients as the rolling window moves forward through time. I believe this is the reason Mediator's EA did not produce consistent profitable results. The EA finds pairs that cointegrate over a short sliding window, but this does not ensure coef stability. Coef stability is an outward sign of true cointegration or a stable/deterministic system. Please look at the pictures attached in these posts: http://bit.ly/NQ3mSU http://bit.ly/NQ3t0H http://bit.ly/NQ6BJZ What you are looking at is the stability of the coefficients over a wide range of inputs. The last link contains a range up to 4000 bars. Note how far some of the coefficients change, particularly for lm! Apparently the calculation used DOES matter quite a lot for stability. IMO stability of coefficients should be the #1 priority of a strategy like this, because it determines how far off the mark you will be if you hold a trade to mean reversion. Moving coefficients mean loss of profits and an unstable system ~ the antithesis of cointegration. There are numerous RTM strategies that may be devised and some of them may provide better risk/reward than a grid based strategy. Using system development creativity in this area can pay dividends. The key is applying the RTM strategy to a stable system (see above). Thanks for that, particularly the last sentence.

--- 帖子 #650 ---
Gents, Have been discovering this thread lately (I knew about basket trading long time ago with trader101 posts, retrying with interest...) I have setup the "R" stuff but my ratio values doesn't look like most screenshots posted on this forum. On the Hedge ratio, you seems all to have a (0) value between parenthesis next to the ratio. However I am having a different value than zero - and always negative. Using arbomat_demo.mq4 on GBPUSD H1 Do you know why and which value should I take into account for the ratio (the one in parenthesis or not).

--- 帖子 #651 ---
Hi FXEZ, I slightly disagree with your lookback statement above. In my view it is not important to measure the coef and co-integ. over an absolute period, but it is more important to look at relative trading frequency over a certain timeframe window. If I am opening and closing trades within several minutes than a lookback period of 3000 bars in a 1min timeframe seems to be enough for coef calc.. Or in other words: I don't care about changing coef on an hourly rate and simply adapt lots of open orders if lot changes exceed a certain treshold level.

--- 帖子 #652 ---
Hi, I have set up usdcad with nzdusd on H1 t/f, same as Dirtybrown is trading, I think. I realise that the Arbomat is a shifting window and it is difficult to do a visual look back. But it appears that if we are trading from the 2nd deviation line back towards the mean, then there would only be around 3 trades per 2000 bars (around 4 months for H1). Is this correct?

--- 帖子 #653 ---
Hi TheMaxx, here are some changes for lot calculation: please use coefn[i] = coef[i] / PointValuePerLot with PointValuePerLot= MarketInfo(Symbol(),MODE_TICKVALUE) / MarketInfo(Symbol(),MODE_TICKSIZE) for normalizing the coef's to get the basis for lot multiples. TickValue alone is not sufficient . It shall replace the division by close quotes.

--- 帖子 #654 ---
Would you please jus post your mq4 files?

--- 帖子 #655 ---
Would you please tell me which EA that you use and settings?

--- 帖子 #656 ---
Is anyone else having problems with the value in pred[0]? It will be reflecting the value on my R chart (say around 0.0014) and then suddenly it will jump really high to 0.79 for a few ticks, then it will go back to the correct values. Anyone know how to fix this or what I should be monitoring for trade triggers? See my log file attached for evidence of this - search of "0.79" to see the jump.

--- 帖子 #657 ---
hmm .. thats explain why sometimes trade get triggered eventhough no condition has been met my suggestion is : if (pred[0] != lastpred) { diff = MathAbs ( pred[0] - lastpred ); if ( diff &gt; (stddev*0.75) ) timepause = TimeCurrent(); lastpred = pred[0]; } // put the following code when we are about to open new position if ( (TimeCurrent()-timepause) &lt; (2*60) ) return; so, if we detect differences in pred[0] is more than 75% of standard deviation, then it will not check to open new position for 2 minutes. dont know if it will solve the problem

--- 帖子 #658 ---
I'm pretty sure pred[0] is for the current bar. The close of the current bar is the current price so it's going to flop around. If that's the case, one thing to consider is to only open trades on bar closes and don't react to instantaneous readings.

--- 帖子 #659 ---
Have you tryed Dynamic time warping with R? Please report results. Links: http://en.wikipedia.org/wiki/Dynamic_time_warping http://dtw.r-forge.r-project.org/

--- 帖子 #660 ---
@sapiemas Thanks I'll play around with this code @stevegee58 Thanks - but I have no idea how to code for this! I'm still trying to get the code to do what I set out at the bottom of this post which I think will be a better way to trade this strategy. I'm have no idea what I'm doing

--- 帖子 #661 ---
If you could code &amp; test this I'm sure everyone would be interested. I've never seen this mentioned before in this thread

--- 帖子 #662 ---
Thanks - I don't know how to add this to the current code. Could you please help?

--- 帖子 #663 ---
I dont use arbomat_demo.mq4 but I think you should be using the values not in parenthesis

--- 帖子 #664 ---
Yes, that is correct. Also, if you set intercept to false you'll get horizontal lines rather than the angled lines on your R chart picture

--- 帖子 #665 ---
Click on the paper clip icon at the top right of the page and you'll see all the posted files.

--- 帖子 #666 ---
i refer to the R chart like u guys do. just curious what is the yellow line (spread) plotted on the price? r we suppose to refer to it too?

--- 帖子 #667 ---
sapiemas - I tried to import your code but I couldn't work out where to assign the initial value to lastpred. I've attempted to fix the pred[0] bug in my own weird way - new EA is attached.

--- 帖子 #668 ---
i think, just need to put : double lastpred = 0; at the top

--- 帖子 #669 ---
the problem about wrong values exist because not every candle of different pairs opens at the same time. if for example you put the EA on an EUR/USD chart and take GBP/USD as the basket pair. if a new candle opens in EUR/USD does not mean that at the same time the GBP/USD candle also open. this results in false data especially if you have multiple pairs in a basket. before the EA opens a trade you have to check if at every pair the new candle exist and then take the closeprice of the finished candle. it is also better to use pred[1] as value because then you are safe with a finished value. pred[0] is the actual value and could change during candle development

--- 帖子 #670 ---
Ah I see - thanks.

--- 帖子 #671 ---
Seems simple, thanks!

--- 帖子 #672 ---
maybe you can use a relative strength ma like in ccfp indicator and code it in such a way to give weights to the wining losing basket, im giving you 2 examples with the normal ccpf and im also including the one with the relative strenth of gold, i hope this helps great idea btw

--- 帖子 #673 ---
maybe what is really missing is what BETWEEN the numbers , no i just had to quote that order of chaos film , i mean maybe by using the arbomat to include usoil and ukoil as values from the loonie, using gold prices as weight of newzealand dollar and australian dollar , and as a risk/aversion ratio , i think thats all thats missing altho if you really want to get technical you can use the stock market buisness cycle, at least it would give an idea of some economies more affected by x economic factor and it can give greater weights to some

--- 帖子 #674 ---
I'm interested in this system. There is somobody that is using it ? Any Demo or Real account statement di follow ? Tanks

--- 帖子 #675 ---
Here are links to good economectric software which can be usefull for e.g. cointegration tests of data. http://www.eviews.com/ good forum on their site also http://jmulti.de/ If somebody is interested in cooperation on analysis FOREX data using this software as a start and MATLAB let me know. Krzysztof

--- 帖子 #676 ---
I'd be interested in collaborating on some research ... but I'm a R user (not Matlab). Any R users out there??? EZ

--- 帖子 #677 ---
perhaps using of JMULTI or Eview can be good starting point, than no need to programming at all. Afterwards model parameter can be just implemented in MT4 or another trading platform. Krzysztof

--- 帖子 #678 ---
Other than no need for programming, is there any analytical benefit of using JMULTI or Eviews over R? It took some time but I'm now quite comfortable using the packages in R. Are there methods in Jmulti / Eviews not available in R?

--- 帖子 #679 ---
For sure it will save a time and decrease a risk of making programming errors, the people not familiar with Matlab or R can easily play to start with it. There is also a lot of literature which helps to understand certain econometrics concepts using eview http://avaxsearch.com/avaxhome_search?q=eview&amp;commit=Go Krzysztof

--- 帖子 #680 ---
read this page and download these files, i think it will help you... http://papers.ssrn.com/sol3/results....meout=50000000

--- 帖子 #681 ---
The link is bad. You can't post links to search results from web sites usually; that's what this is.

--- 帖子 #682 ---
hi donny, did you see when we select some usd and jpy to analyse it give funny graph lines check one month back on H1 chart it is because of jpy I checked with other indicator both give same value for last one month if we see before last month your indicator too much wavy we can not have good back test Can you fix bug in it sorry for english thx

--- 帖子 #683 ---
You have a very keen sense of observation friend, i didnt know i couldnt do that, ill post some files here then, good luck none of these are mine and if you are going to use them for comercial products give the authors credit, alright

--- 帖子 #684 ---
Attached Image (click to enlarge)

--- 帖子 #685 ---
donny65 - where did that come from? Is it yours?

--- 帖子 #686 ---
Yes, it's my Indicator done in Excel.

--- 帖子 #687 ---
Looks awesome! How's it going for you?

--- 帖子 #688 ---
There is actually a basis for the whole forex. Attached Image (click to enlarge)

--- 帖子 #689 ---
Hello everyone. I am very much into basket trading, hedging etc. If any one has come up with a good theory using several pairs I may be able to back tested.... Any thing that is pips based I can. Post the idea in the thread or PM me. All these year working in automation I have not found any type of indicator that gives me an edge. so I don't use any. All is pip based and have been getting good results working existing equations in the prices. For example I can test simple and complex correlations trading.. for example simple eur/usd gbp/usd system... say I buy eur/usd when price is up 20 pips and sell de gbp/usd when is up 20 pips (counter trend), let them keep triggering trades like that until some global profit is reached. I can also use the same pairs selling the eur/usd when down 20 pips and buying the gbp/usd when down 20 pips... these in different magic from the first set, basically working the market both ways. Obviously, I have already tested most of the simple things. I can test system up to 8 pairs. J. .

--- 帖子 #690 ---
Something I am trying to figure out how to do and it would make analysis alot easier would be if there is a way to reverse create a basket from currency weights. Example: EURJPY = 0.9 EURUSD = -1.1 USDJPY = -1 Has these net weights JPY = 0.1 EUR = -0.2 USD = 0.1 What I want is to to take just those second weights and generate the cross weights above. I want to do this for these 7 currencies USD,EUR,JPY,GBP,CAD,AUD,NZD and make weights in their 21 crosses. Maybe I shouldn't badger here but seems like a few bright basket minds are around and I am a bit stumped.

--- 帖子 #691 ---
So what sort of back test/forward test you are making for this system ?? Krzysztof

--- 帖子 #692 ---
Attached Image (click to enlarge) This is the real mini account where 1 lot is 10 000 USD. And the account size is 2000 USD Magin at 1:50.

--- 帖子 #693 ---
this looks very promising, not to say outstanding! Will you share this system with us?

--- 帖子 #694 ---
hi can some one help me when i attached with chat all value show 0 when i bring any chart like u/j then it show only its value then i try to bring e/u on it then it show its value but u/j value goes up i.e e/u 1 and u/j 100 i modifyed path according my computer to and compiled and restarted i copied two mqh files in inclued and copied one file dll in library please help

--- 帖子 #695 ---
From what I remember, we can only use Arbomat only with USD curencies.

--- 帖子 #696 ---
hi i requested before what is secret to make it work i think no one like to help I followed #1post didnot worked it has been 2 weeks since i try to make it work i installed in C rogram FilesRR-2.15.1binx64 I downloaded from this site http://probability.ca/cran/ University of Toronto please some one help me when i attached with chat all value show 0 when i bring any chart like u/j then it show only its value then i try to bring e/u on it then it show its value but u/j value goes up i.e e/u 1 and u/j 100 and some time 10000000 i modifyed path according my computer and compiled and restarted i copied two mqh files in inclued and copied one file dll in library but no luck please help

--- 帖子 #697 ---
did you copy commonn functions of 7 bit?

--- 帖子 #698 ---
hi stevewalker, thanks for response i was doing wrong while installing r i was selecting only 64bit. now i did installed 64,32, and corefile all finally working now thanks

--- 帖子 #699 ---
hi, 1) can some one explain how back history work with arb o mat ? 2) do i have to down load proper history for mt4 because i like to use 3 or 4 year back history with ardomat? 3) can we use more other pairs than what arbomat have and can we change pairs in mql editor thanks

--- 帖子 #700 ---
hi this arbomat is only for usd pairs i try to modify with all pairs but no luck can any one make it work with all pairs EUR,JPY,CHF,CAD,GBP,AUD,NZD THANKS

--- 帖子 #701 ---
I like this idea however I find getting this thing started is incredibly confusing for someone not very familiar with R or mt4. Could someone please post steps to get this project up and running in terms that are simplified for non-regular R and MT4 users? It would be much appreciated. I'm having problems getting charts up on R and I'm pretty certain I've followed the instructions. When I drag the arbomat on the MT4 chart, it just opens R and nothing is there.

--- 帖子 #702 ---
interesting system, I will be following this thread,

--- 帖子 #703 ---
The original poster has left forex factory and the thread is dead

--- 帖子 #704 ---
oh what a shame:/

--- 帖子 #705 ---
The R software is great at plotting co-integrated relationships but no one ever worked out how to scan for co-integrated pairs - IMHO that was the crucial key that was missing that would allow a successful trading of this strategy. If you're interested in developing a trading strategy around this concept I strongly recommend http://arb-maker.com/ . It's a paid for product but it has a 2 week free trial and they have integrated an MT4 bridge for data import and a working on an MT4 trading function. The guys sound like they know their stuff on their youtube videos and the manuals are pretty comprehensive. For me it's a "to buy" product once I start making money trading. The official thread is here: http://www.forexfactory.com/showthread.php?t=365196

--- 帖子 #706 ---
Check out Old_Dog's thread I believe he did it.

--- 帖子 #707 ---
I've read his thread - he said to look for non-correlated pairs - is that the key?

--- 帖子 #708 ---
you need to find co-integrated pairs. this is tested for with the ADF or johansen test. I think ADF is implemented in the ea.

--- 帖子 #709 ---
Is anyone able to code for this? Is anyone interested in this strategy?

--- 帖子 #710 ---
It's a fantastic proof of concept strategy, but it needs a lot of work if you want to actually use it.

--- 帖子 #711 ---
Work not worth the reward? We had a lot of traction on the thread when Dirtybrown was around - then he suddenly stopped posting and everything died...

--- 帖子 #712 ---
Yes it is, if you can find someone who will do it. I don't know what happened to him.

--- 帖子 #713 ---
actually there is "pairtrading" R package now does ADF test and backtesting as well, http://cran.r-project.org/web/packag...ing/index.html and there is a good tutorial available on R-Blogger, http://www.r-bloggers.com/pair-tradi...ading-package/

--- 帖子 #714 ---
Looks interesting, but still too complicated for me.

--- 帖子 #715 ---
The thing about ADF tests or even the Johansen test is that they are statistical tests that are based on certain assumptions. My experience with financial data is that #1) it tends to break most/all the assumptions and #2) it is very easy to trick one of these tests into thinking the data series is stationary, only to fall apart in fast order once the out of sample (OOS) data starts. With any of these tests in my opinion it is mandatory to do out of sample testing to validate your testing methodology. Treat the test as a single data point rather than a proof of concept. More weight should be given to the results of OOS testing. My view on these tests is effectively (now after some experience) that they aren't worth the paper they are printed on. I haven't found a positive correlation between passing ADF or Johansen and stable OOS performance. However, as always I suggest others draw their own conclusions based on their own experience.

--- 帖子 #716 ---
This is why people should be looking for statistical relationships between instruments where there is some logical reason at work. That's why pair traders tend towards trading equities, because they can find pairs or baskets that share some real world relationship, like gold and mining companies, coffee and coffee shops, or airliners and jet fuel (although the coffee one probably wouldn't work) For forex I would try a basket of the best/basket of the worst swap pairs (AUDCHF, NZDJPY vs USDZAR, EURAUD etc.), I bet the spread would be pretty easy to trade.

--- 帖子 #717 ---
Sensible points, the OOS issue seems to be universal when it comes to EA development, lot of predictions algorithms fail for the same reason of in sample over-fitting. The PairTrading R package looks fine for me and I am playing it to try if it can work as a indicator (load data of a pairs and show trading simulation results), but indeed I am not sure if it helps in live trading when we talk about real money and future spread dynamics. FXEZ, can you shed some light in pair trading or statistical arbitrage in general that an average individual can deal with using a home PC and some coding capacity in R or Matlab? I am quite amused by your writing on google sites.

--- 帖子 #718 ---
croupier, I'm amused that you are amused! Actually I consider myself to be an average individual as described. However, let me add right at the outset that I'm not trading based on cointegration. I studied the topic in depth but found that I was in fact a short term guy rather than a long term guy. I don't offer this to influence your decision in any way, (correlation has its own stack of problems) just by way of disclosure that in this context I'm more the teacher who teaches rather than the one who trades the cointegration concept. I'm not sure what I can add to what I've already posted in this thread. Basically speaking if you are interested in the stat arb concept this thread and the related links are a good place to start. The original thread (arbomat) has lots of interesting contributions and I would strongly suggest reading that whole thread. Also take a look at Old Dog's Taming the Beast thread to get a reality check on the cointegration concept from a sound scientific perspective. There is a good back and forth between Old_Dog and 7Bit that properly exemplifies the scientist vs. trader arguments respectively. Choose wisely whose views you heed! At the outset, you will need to choose a platform and determine if you are a correlation person or a cointegration person. Correlation is more appropriate for short term relationships and cointegration for long term relationships so your specific goals will play into that. (That said, there have been isolated reports by some who are using cointegration from a short term perspective. I never got this to work but that doesn't mean some aren't doing this very thing.) R, Matlab and Python have capabilities for pairs trading. On this site arbomat was written as a proof of concept for R with pairs trading. It approaches the subject from a trader's point of view rather than a scientist's point of view. If you use Metatrader, I suggest taking Arbomat out for a spin to get a feel for how it works then studying the code to determine how to interface to R from Metatrader or the proper R commands to perform a simple cointegration test. Then if you like the PairTrading package (I haven't used it) you can integrate those commands into Arbomat using Arbomat as a template for viewing the pair relationships in Metatrader. The words of saussiche are worth repeating as the temptation is to attempt to fit anything with no real thought regarding reasons why there should be co-movement: In particular If I were to approach the subject again I would take a hard look at the consistency factor as one of the main ways for judging fit of cointegration (over ADF / Johansen statistical tests) and validity of the model building process. Study the graphics posted by Mechthildche on the Arbomat Thread . Note that principal components is preferred to linear model (lm) for stability as illustrated in those pictures on that link. Also if you choose to go with R and you're new to the platform, you really should take a look at Analysis of Integrated and Cointegrated Time Series With R as a way to walk through the model building process via the urca package with some additional information on the vars package. But there are numerous resources and packages for Matlab and Python with pairs trading so those routes are good paths as well.

--- 帖子 #719 ---
Hi Everyone, Great thread and ideas, however I really need help in loading the Arbomat. I have read and re-read the instructions from the different threads and with no success in making the charts load. I have completed the following; 1. installed R 2. installed common_functions - in expert/include folder 3. installed mt4r.mqh - in expert/include folder 4. installed mt4r.dll - in expert/libraries 5. changed Rpath in EA to Rterm - this is using the 34bit as 64 was stated would not work 6. changed RDEBUG to 2 7. loaded py26 8. loaded Debug view program Sadley nothing works, I place the EA on the charts and it highlights the EA in the corner and nothing. Yes the EA function is on, and I have restarted MT4 multiple times. Guys I would really appreaciate your help as I have already wasted one week intrying to make this work. Thanks G5Supra.

--- 帖子 #720 ---
g5supra, I tried the "arbmat" EA code and it didn't work for me neither, the only thing works is 7bit's indicator exmaple, but why did you load py26? do you use python to call the Rterminal?

--- 帖子 #721 ---
Hi Croupier, Yes it's mean't to bridge the gap between the programs to call the Rterminal. You can locate it on 7bit website, in his words "This is my solution for the problem of mql4 programs not being sufficiently able to communicate with the outside world. It adds the ability to run arbitrary python code (even multi-threaded) directly from within an mql4 script, expert advisor or indicator". Still its frustrating not being able to make the program work. G5supra.

--- 帖子 #722 ---
See this post and please use the mt4R R Project thread for technical support. http://www.forexfactory.com/showthre...08#post6545008

--- 帖子 #723 ---
FXEZ, do you think the below idea is worth testing for an EA? Constantly scan target pairs and open/close positions based upon the ADF test threshold? BTW, I got 7bit's arbmat and trendmat working after following your instruction of "check the enable EA in the MT4", both are good starting point for a pairtrading EA, I am also trying to transform my offline SVM prediction testing result in R into an online EA.

--- 帖子 #724 ---
You could certainly try it. Just keep in mind the caveat posted by saussiche that having a theme to the selection may make things more stable. Also, recall that the ADF or any other statistical test essentially just gives you confidence that the model or the hypothesis is sound on the data tested. However, the more important question is whether the hypothesis or model makes money out of sample (on new data). So I would put more weight in the out of sample test than on the statistical test. I'm not sure if ADF will tell you in a timely manner when to close out from a particular model but it possibly might depending on your specific set of rules and window size. A bit of advice: Treat the testing as generalized framework testing rather than whether any specific system is sound. You are developing a framework for system development using certain tools. Test a group of individual models selected using your method on out of sample data over many different sliding window samples to get a feel for how long you can expect the models on average to continue to perform in similar stable fashion into the future. If you follow the same testing methodology with your framework in the future, you should get similar results. (purely hypothetical) For instance, let's say you follow your selection strategy and apply it to 2000 bars of data from the M15 time frame. This is about 500 hours or 21 days of look back period. You determine from your OOS testing that you can effectively run the average model from your selection scheme forward for 500 bars before the OOS performance starts dropping off. So you get about 5 good days on a particular model then you need to reoptimize. This is what I mean in the previous paragraph. You will then need to determine if the 5 days of life of each model provides enough opportunity to be worth the effort. Glad to hear you got arbomat going. Sometimes it is the simplest things that get us hung up.

--- 帖子 #725 ---
for those of you trading this system. if you just use eurusd and gbpusd, hedge. it'll just end up exactly with eurgbp. From OANDA exposure tab, you could see that. am i wrong? and the graph just show the same as eurgbp. why not just trade the eurgbp? Like trader101 system, it is actually heavily rely on chfjpy and eurjpy pair.

--- 帖子 #726 ---
I also test the 7 pair basket, it end up with either long eurchf or short eurchf. anybody else noticed this ?

--- 帖子 #727 ---
Cointegration techniques have been criticized as being confusing, unreliable, and dangerous. from the wiki but i'm gonna try this method in real oanda account

--- 帖子 #728 ---
I'm not sure if anyone is still reading this thread but I get the sense that those that were leading the charge on finding the new system either gave up or went off in their own new direction. Such is common with cointegration and even correlation threads throughout most forums. I recently started trading cointegration but experimented for quite some time with correlation. I'm versed in VBA and MQL and learning R. My results have been mixed. There are good weeks and there are bad weeks. Just like any other system it is not fool proof. The major issue, just like all other trading system, is proper money management. Having said that, I'm wondering if anyone out there has mixed cointegration with rebalancing algorithms successfully? A general rebalancing algorithm paired with what 7Bit defined here has potential.

--- 帖子 #729 ---
How did it go?

--- 帖子 #730 ---
Hi, I'm relatively new to this but looks good. I would like to know how can i compute sizes. For example for the setup below : AUDUSD -4 (0) EURUSD 100 (0) GBPUSD -4 (0) NZDUSD -5 (0) USDCAD -7 (0) USDCHF 100 (0) USDJPY -16 (0) Are these sizes below are a valid option ? AUDUSD 0.04 Lots EURUSD 1 Lots GBPUSD -0.04 Lots NZDUSD -0.05 Lots USDCAD -0.07 Lots USDCHF 1 Lots USDJPY -0.16 Lots

--- 帖子 #731 ---
Yes the sizes look correct, but I've never seen two currencies with 100 hedge ratios. I don't know why but it doesn't look right to me.

--- 帖子 #732 ---
Does Arb-o-Mat works 4u at MT4 update (600)? Because mine has some problems. What have you guys done, do I have to update anything? Many thanks 4 reply. Rgs FxJ

--- 帖子 #733 ---
Have You got ARBOMAT working on MT4 update (600) ? Only 1 of my versions is seen by MT4 in NAVIGATOR WINDOW but it's still not working :/

--- 帖子 #734 ---
EA doesn't work because of errors during compilation of mt4R.mqh and common_functions.mqh. I've come back to my work on this subject but earlier there had been no problem with running this. Is there a possibility, the syntax have been changed? What else may couse the problem?

--- 帖子 #735 ---
I havent got any progress with set up the chart called by R. I guess mt4R.mqh and common_functions.mqh been out-dated! Right?

--- 帖子 #736 ---
back bars 3500 Attached Image (click to enlarge) back bars 2000 Attached Image (click to enlarge)

--- 帖子 #737 ---
Hello, I am currently testing this system? Does it burn your account in long term or does it work? I would like to know if someone has the same problem as me The R graphics popup and close 1 sec later, how can i fix this problem? Thanks for helping Have a good day

--- 帖子 #738 ---
I also encountered the same problem, seek to explain

--- 帖子 #739 ---
Hey Guys I'm having a trouble getting the R charts going. I followed DirtyBrown instructions. when I go to attach to chart nothing is happening. Im not sure if its because everything is outdated since MT4 is now a new built. Anyone installed and using R lately? and with updated R 3.2.2 ? Any help would be appreciated. Thanks Spaz

--- 帖子 #740 ---
Have you downloaded the updated DLL and MQL files from here? https://www.mql5.com/en/code/11112 Have you followed FXEZ' instructions http://www.forexfactory.com/showthre...08#post6545008 ?

--- 帖子 #149 ---
bit late to the party. first off, thank you for the codes. they are awesome. anyone still at this? i dont think this is a worthless endeavour. just dont try to be too much of a robot (an EA user)/an academic, understand the basic concepts and take it all with a grain of salt and market experience. then you'll be fine. good luck

--- 帖子 #150 ---
Hello everyone, I have just started to dig into hedge strategies and came across this thread. Unfortunately during instalation of arbomat.mq4 some compilation problem appeared. I received 'regressors' - invalid array access' Does anyone know how to fix this ?

--- 帖子 #151 ---
Hello guys, i want some help from you all. Can anyone provide me Arbomat and/or Trendomat copy which is adapted to futures trading where lot sizes vary from security-to-security. I adjusted them for stock trading by replacing currency names with stock names so that arbomat/trendomat can fetch stocks data but i could not adjust them for different lots sizes. I have little knowledge about coding. I want that EA should have input boxes for entering respective lot sizes too so that when R chart is displayed it should show No. of (Futures lots) required in the basket. Anyone having solution.

--- 帖子 #152 ---
Can this part be edited so that lot size effect of variable futures lot sizes in case of Stock and Commodities trading can be incorporated:- Extract from Arbomat.mq4:- " // fill the matrix of regressors // and then copy it over to R for (i=0; i&lt;back; i++){ for (j=0; j&lt;pairs; j++){ ishift = iBarShift(symb[j], 0, Time[i]); regressors[i * pairs + j] = iClose(symb[j], 0, ishift); } } " I assume that just as MT4 makes a regressors array of Closing Prices. If we somehow multiply each stock's price with its respective futures lot size, then R software will do regression on the product so formed and will give out the required number of (Futures Lots) of the basket to be traded.


===== 附件下载链接 =====

